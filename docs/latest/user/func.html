<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex" /><link rel="search" title="Search" href="../search" /><link rel="next" title="Nuisance Signal Regression" href="nuisance" /><link rel="prev" title="Anatomical Preprocessing" href="anat" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.05.06 -->
        <title>Functional Preprocessing - C-PAC 1.8.7.dev1 Beta documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a96c6ba1" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fe2d11c3" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index"><div class="brand">C-PAC 1.8.7.dev1 Beta documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/cpac_logo_vertical.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">C-PAC 1.8.7.dev1 Beta documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="release_notes/v1.8.7">Latest Release: Version 1.8.7 Beta (May 03, 2024)</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="pipelines/pipeline_config">3. Select Your Pipeline</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 3. Select Your Pipeline</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pipelines/preconfig">Pre-configured Pipelines</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/configurable-settings">Configurable Settings</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Configurable Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l4"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l4"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/data-environment">Data Management and Environment Settings</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Data Management and Environment Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="compute_config">Computer Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="output_config">Output Settings</a></li>
</ul>
</li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="pipelines/pre-and-post">Pre- and post-processing</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Pre- and post-processing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Functional Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/derivatives">Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="sca">Seed-based Correlation Analysis (SCA) and Dual Regression - Analyze the connectivity between brain regions.</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">Voxel-mirrored Homotopic Connectivity (VMHC) - Investigate connectivity between hemispheres.</a></li>
<li class="toctree-l4"><a class="reference internal" href="alff">Amplitude of Low Frequency Fluctuations (ALFF) and fractional ALFF (fALFF) - Measure the power of slow fluctuations in brain activity.</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">Regional Homogeneity (ReHo) - Measure the similarity of activity patterns across neighboring voxels.</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality - Analyze the structure of functional networks.</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/quality">Quality Control</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Quality Control</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="qc_interface">QC Pages - Visual Data Quality Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="xcpqc">XCP QC files - eXtensible Connectivity Pipeline-style quality control files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="preprocessing">4. Pre-Process Your Data</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 4. Pre-Process Your Data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="longitudinal">Longitudinal Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l3"><a class="reference internal" href="aroma_ica">ICA Denoising</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="derivatives">5. Compute Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 5. Compute Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l3"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l3"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l3"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running">6. All Run Options</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="group_analysis">7. Run Group Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 7. Run Group Analysis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="group_fsl_feat">FSL FEAT &amp; Randomise</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_pybasc">Bootstrapped Analysis of Stable Clusters (PyBASC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_isc">Inter-subject Correlation (ISC) &amp; Inter-subject Functional Correlation (ISFC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_qpp">Quasi-Periodic Patterns (QPP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="tutorials/index">9. Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of 9. Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials/observed_usage/index">1. Tutorial: optimizing memory estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="help">10. Troubleshoot</a></li>
<li class="toctree-l2"><a class="reference internal" href="rnotes">11. Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix#benchmark-package">Benchmark Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions">C-PAC versions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/index">Developer Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Developer Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/installation">Installing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/pipeline">Pipeline Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/templates">Templates and Atlases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/random_state">Random State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflow_documentation">Workflow Documentation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/workflows/index">Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Workflows</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/cpac_pipeline">C-PAC Pipeline Construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/anat_preproc">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/func_preproc">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/seg_preproc">Segmentation Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/sca">Seed Based Correlation Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/basc">Bootstrap Analysis of Stable Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/nuisance">Nuisance Signal Removal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/alff">Amplitude of Low Frequency Fluctuations(ALFF) and fractional ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/vmhc">Voxel Mirrored Homotopic Connectivity Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/reho">Regional Homogeneity Approach to fMRI data analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/generate_motion_statistics">Generate Motion and Power Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/scrubbing">Scrubbing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/group_analysis">Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/easy_thresh">Easy thresh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/median_angle">Median Angle Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/timeseries">Timeseries Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/network_centrality">Network Centrality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflows/index#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/xcpqc">eXtensible Connectivity Pipeline-style quality control files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/utils">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing">Testing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/continuous_integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/deprecating">Deprecating a version of C-PAC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license">License</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/user/func.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="functional-preprocessing">
<h1>Functional Preprocessing<a class="headerlink" href="#functional-preprocessing" title="Permalink to this heading">¶</a></h1>
<div class="svg-flowchart docutils container">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:lucid="lucid" width="1390" height="1487.4" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1390 1487.4"><g transform="translate(-230 227.4)" lucid:page-tab-id="0_0"><path d="M748-60c17.67 0 32 17.9 32 40s-14.33 40-32 40h-96c-17.67 0-32-17.9-32-40s14.33-40 32-40z" stroke="#000" stroke-width="2" fill="#ffc374"/><use xlink:href="#a" transform="matrix(1,0,0,1,625,-55) translate(6.599999999999994 27.525)"/><use xlink:href="#b" transform="matrix(1,0,0,1,625,-55) translate(94.45 27.525)"/><use xlink:href="#c" transform="matrix(1,0,0,1,625,-55) translate(21.5 49.125)"/><use xlink:href="#d" transform="matrix(1,0,0,1,625,-55) translate(71.65 49.125)"/><path d="M468-40c17.67 0 32 13.43 32 30s-14.33 30-32 30h-96c-17.67 0-32-13.43-32-30s14.33-30 32-30z" stroke="#000" stroke-width="2" fill="#ffc374"/><use xlink:href="#e" transform="matrix(1,0,0,1,345,-35) translate(5.574999999999989 30.025)"/><use xlink:href="#f" transform="matrix(1,0,0,1,345,-35) translate(51.57499999999999 30.025)"/><path d="M460 440h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#g" transform="matrix(1,0,0,1,465,445) translate(28.65 16.5875)"/><use xlink:href="#h" transform="matrix(1,0,0,1,465,445) translate(33.599999999999994 38.1875)"/><use xlink:href="#i" transform="matrix(1,0,0,1,465,445) translate(15.149999999999991 59.7875)"/><use xlink:href="#j" transform="matrix(1,0,0,1,465,445) translate(67 59.7875)"/><path d="M460 560h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#k" transform="matrix(1,0,0,1,465,565) translate(34.574999999999996 27.525)"/><use xlink:href="#i" transform="matrix(1,0,0,1,465,565) translate(21.14999999999999 49.125)"/><use xlink:href="#l" transform="matrix(1,0,0,1,465,565) translate(73 49.125)"/><path d="M460 680h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#m" transform="matrix(1,0,0,1,465,685) translate(13.599999999999994 16.5875)"/><use xlink:href="#n" transform="matrix(1,0,0,1,465,685) translate(86.45 16.5875)"/><use xlink:href="#o" transform="matrix(1,0,0,1,465,685) translate(106.45 16.5875)"/><use xlink:href="#p" transform="matrix(1,0,0,1,465,685) translate(51.575 38.1875)"/><use xlink:href="#q" transform="matrix(1,0,0,1,465,685) translate(25.099999999999994 59.7875)"/><path d="M460 920h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#r" transform="matrix(1,0,0,1,465,925) translate(33.574999999999996 27.525)"/><use xlink:href="#s" transform="matrix(1,0,0,1,465,925) translate(41.55 49.125)"/><path d="M750 920h160v80H750z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#t" transform="matrix(1,0,0,1,755,925) translate(18.64999999999999 27.525)"/><use xlink:href="#i" transform="matrix(1,0,0,1,755,925) translate(20.125 49.125)"/><use xlink:href="#u" transform="matrix(1,0,0,1,755,925) translate(71.975 49.125)"/><path d="M750 1040h160v80H750z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#v" transform="matrix(1,0,0,1,755,1045) translate(28.950000000000003 16.5875)"/><use xlink:href="#w" transform="matrix(1,0,0,1,755,1045) translate(73.15 16.5875)"/><use xlink:href="#x" transform="matrix(1,0,0,1,755,1045) translate(21.624999999999993 38.1875)"/><use xlink:href="#y" transform="matrix(1,0,0,1,755,1045) translate(16.949999999999996 59.7875)"/><use xlink:href="#z" transform="matrix(1,0,0,1,755,1045) translate(60.199999999999996 59.7875)"/><path d="M950 920h160v80H950z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#A" transform="matrix(1,0,0,1,955,925) translate(2.5999999999999943 16.5875)"/><use xlink:href="#B" transform="matrix(1,0,0,1,955,925) translate(82.45 16.5875)"/><use xlink:href="#C" transform="matrix(1,0,0,1,955,925) translate(132.4 16.5875)"/><use xlink:href="#D" transform="matrix(1,0,0,1,955,925) translate(31.6 38.1875)"/><use xlink:href="#E" transform="matrix(1,0,0,1,955,925) translate(70.5 38.1875)"/><use xlink:href="#F" transform="matrix(1,0,0,1,955,925) translate(17.125 59.7875)"/><use xlink:href="#G" transform="matrix(1,0,0,1,955,925) translate(68.975 59.7875)"/><path d="M950 1040h160v80H950z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#H" transform="matrix(1,0,0,1,955,1045) translate(14.074999999999996 16.5875)"/><use xlink:href="#I" transform="matrix(1,0,0,1,955,1045) translate(72.975 16.5875)"/><use xlink:href="#C" transform="matrix(1,0,0,1,955,1045) translate(120.92500000000001 16.5875)"/><use xlink:href="#J" transform="matrix(1,0,0,1,955,1045) translate(36.55 38.1875)"/><use xlink:href="#y" transform="matrix(1,0,0,1,955,1045) translate(16.949999999999996 59.7875)"/><use xlink:href="#z" transform="matrix(1,0,0,1,955,1045) translate(60.199999999999996 59.7875)"/><path d="M1568 920c17.67 0 32 17.9 32 40s-14.33 40-32 40h-96c-17.67 0-32-17.9-32-40s14.33-40 32-40z" stroke="#000" stroke-width="2" fill="#ffc374"/><use xlink:href="#K" transform="matrix(1,0,0,1,1445,925) translate(8.599999999999994 27.525)"/><use xlink:href="#L" transform="matrix(1,0,0,1,1445,925) translate(58.55 27.525)"/><use xlink:href="#M" transform="matrix(1,0,0,1,1445,925) translate(30.625 49.125)"/><use xlink:href="#N" transform="matrix(1,0,0,1,1445,925) translate(64.525 49.125)"/><path d="M1278 1040c17.67 0 32 17.9 32 40s-14.33 40-32 40h-96c-17.67 0-32-17.9-32-40s14.33-40 32-40z" stroke="#000" stroke-width="2" fill="#ffc374"/><use xlink:href="#a" transform="matrix(1,0,0,1,1155,1045) translate(10.125 27.525)"/><use xlink:href="#O" transform="matrix(1,0,0,1,1155,1045) translate(97.97500000000001 27.525)"/><use xlink:href="#P" transform="matrix(1,0,0,1,1155,1045) translate(53.525 49.125)"/><path d="M878 1160c17.67 0 32 17.9 32 40s-14.33 40-32 40h-96c-17.67 0-32-17.9-32-40s14.33-40 32-40z" stroke="#000" stroke-width="2" fill="#ffc374"/><use xlink:href="#Q" transform="matrix(1,0,0,1,755,1165) translate(19.554999999999993 16.5875)"/><use xlink:href="#R" transform="matrix(1,0,0,1,755,1165) translate(11.474999999999994 38.1875)"/><use xlink:href="#S" transform="matrix(1,0,0,1,755,1165) translate(99.325 38.1875)"/><use xlink:href="#T" transform="matrix(1,0,0,1,755,1165) translate(49.555 59.7875)"/><path d="M700 22v28H540v10.5" stroke="#000" stroke-width="2" fill="none"/><path d="M701 22.03h-2V21h2z"/><path d="M540 75.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M540 282v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 282.03h-2V281h2z"/><path d="M540 315.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M540 402v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 402.03h-2V401h2z"/><path d="M540 435.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M540 522v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 522.03h-2V521h2z"/><path d="M540 555.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M540 642v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 642.03h-2V641h2z"/><path d="M540 675.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M622 960h108.5" stroke="#000" stroke-width="2" fill="none"/><path d="M622.03 961H621v-2h1.03z"/><path d="M745.76 960l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M912 960h18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M912.03 961H911v-2h1.03z"/><path d="M945.76 960l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M830 1002v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M831 1002.03h-2V1001h2z"/><path d="M830 1035.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M830 1122v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M831 1122.03h-2V1121h2z"/><path d="M830 1155.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M912 1080h18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M912.03 1081H911v-2h1.03z"/><path d="M945.76 1080l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M1112 1080h18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M1112.03 1081H1111v-2h1.03z"/><path d="M1145.76 1080l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M460 200h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#U" transform="matrix(1,0,0,1,465,205) translate(3.625 27.525)"/><use xlink:href="#V" transform="matrix(1,0,0,1,465,205) translate(62.525000000000006 27.525)"/><use xlink:href="#W" transform="matrix(1,0,0,1,465,205) translate(35.599999999999994 49.125)"/><path d="M460 320h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#X" transform="matrix(1,0,0,1,465,325) translate(42.55 16.5875)"/><use xlink:href="#i" transform="matrix(1,0,0,1,465,325) translate(8.625 38.1875)"/><use xlink:href="#Y" transform="matrix(1,0,0,1,465,325) translate(60.475 38.1875)"/><use xlink:href="#Z" transform="matrix(1,0,0,1,465,325) translate(38.574999999999996 59.7875)"/><path d="M460 80h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#aa" transform="matrix(1,0,0,1,465,85) translate(45.55 16.5875)"/><use xlink:href="#i" transform="matrix(1,0,0,1,465,85) translate(21.625 38.1875)"/><use xlink:href="#ab" transform="matrix(1,0,0,1,465,85) translate(73.475 38.1875)"/><use xlink:href="#Z" transform="matrix(1,0,0,1,465,85) translate(38.574999999999996 59.7875)"/><path d="M540 162v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 162.03h-2V161h2z"/><path d="M540 195.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M420 22v458h20.5" stroke="#000" stroke-width="2" fill="none"/><path d="M421 22.03h-2V21h2z"/><path d="M455.76 480l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M720 80h280v80H720z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#ac" transform="matrix(1,0,0,1,725,85.00000000000003) translate(53.19999999999999 27.7125)"/><use xlink:href="#ad" transform="matrix(1,0,0,1,725,85.00000000000003) translate(134 27.7125)"/><use xlink:href="#ae" transform="matrix(1,0,0,1,725,85.00000000000003) translate(24.94999999999999 49.3125)"/><use xlink:href="#af" transform="matrix(1,0,0,1,725,85.00000000000003) translate(86.89999999999999 49.3125)"/><use xlink:href="#ag" transform="matrix(1,0,0,1,725,85.00000000000003) translate(118.44999999999999 49.3125)"/><use xlink:href="#ah" transform="matrix(1,0,0,1,725,85.00000000000003) translate(128.45 49.3125)"/><path d="M700 22v28h160v10.5" stroke="#000" stroke-width="2" fill="none"/><path d="M701 22.03h-2V21h2z"/><path d="M860 75.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M1132-40c15.46 0 28 13.43 28 30s-12.54 30-28 30h-84c-15.46 0-28-13.43-28-30s12.54-30 28-30z" stroke="#000" stroke-width="2" fill="#ffc374"/><use xlink:href="#ai" transform="matrix(1,0,0,1,1025,-35) translate(21.104999999999997 17.525)"/><use xlink:href="#aj" transform="matrix(1,0,0,1,1025,-35) translate(64.955 17.525)"/><use xlink:href="#ak" transform="matrix(1,0,0,1,1025,-35) translate(17.629999999999995 39.125)"/><use xlink:href="#al" transform="matrix(1,0,0,1,1025,-35) translate(37.529999999999994 39.125)"/><path d="M692 440h96l32 40-32 40h-96l-32-40z" stroke="#000" stroke-width="2" fill="#ffeca9"/><use xlink:href="#am" transform="matrix(1,0,0,1,665,445) translate(25.07999999999999 27.7125)"/><use xlink:href="#an" transform="matrix(1,0,0,1,665,445) translate(95.93 27.7125)"/><use xlink:href="#ao" transform="matrix(1,0,0,1,665,445) translate(27.555 49.3125)"/><use xlink:href="#ap" transform="matrix(1,0,0,1,665,445) translate(52.555 49.3125)"/><path d="M1090 22v98h-70.5" stroke="#000" stroke-width="2" fill="none"/><path d="M1091 22.03h-2V21h2z"/><path d="M1004.24 120l14.26-4.64v9.28z" stroke="#000" stroke-width="2"/><path d="M460 800h160v80H460z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#U" transform="matrix(1,0,0,1,465,805) translate(4.1499999999999915 27.525)"/><use xlink:href="#aq" transform="matrix(1,0,0,1,465,805) translate(63.05 27.525)"/><use xlink:href="#i" transform="matrix(1,0,0,1,465,805) translate(11.649999999999991 49.125)"/><use xlink:href="#ar" transform="matrix(1,0,0,1,465,805) translate(63.49999999999999 49.125)"/><path d="M540 762v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 762.03h-2V761h2z"/><path d="M540 795.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M540 882v18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M541 882.03h-2V881h2z"/><path d="M540 915.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M660 800h160v80H660z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><use xlink:href="#U" transform="matrix(1,0,0,1,665,805) translate(3.625 27.525)"/><use xlink:href="#V" transform="matrix(1,0,0,1,665,805) translate(62.525000000000006 27.525)"/><use xlink:href="#W" transform="matrix(1,0,0,1,665,805) translate(35.599999999999994 49.125)"/><path d="M622 840h18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M622.03 841H621v-2h1.03z"/><path d="M655.76 840l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M740 522v258.5" stroke="#000" stroke-width="2" fill="none"/><path d="M741 522.03h-2V521h2z"/><path d="M740 795.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M600-207.4h200v74.8H600z" stroke="#000" stroke-width="2" fill="#ffdba9"/><path d="M620-207.4v74.8m160-74.8v74.8" stroke="#000" stroke-width="2" fill="none"/><use xlink:href="#as" transform="matrix(1,0,0,1,630,-202.4) translate(2.049999999999997 25.299999999999997)"/><use xlink:href="#at" transform="matrix(1,0,0,1,630,-202.4) translate(47.05 25.299999999999997)"/><use xlink:href="#ag" transform="matrix(1,0,0,1,630,-202.4) translate(90 25.299999999999997)"/><use xlink:href="#au" transform="matrix(1,0,0,1,630,-202.4) translate(100 25.299999999999997)"/><use xlink:href="#av" transform="matrix(1,0,0,1,630,-202.4) translate(16.599999999999994 46.9)"/><path d="M700-130.6v51.1" stroke="#000" stroke-width="2" fill="none"/><path d="M701-130.57h-2v-1.03h2z"/><path d="M700-64.24l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M700-130.6v44.3H420v26.8" stroke="#000" stroke-width="2" fill="none"/><path d="M701-130.57h-2v-1.03h2z"/><path d="M420-44.24l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M700-130.6v44.3h390v26.8" stroke="#000" stroke-width="2" fill="none"/><path d="M701-130.57h-2v-1.03h2z"/><path d="M1090-44.24l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M740 438V262.57H639.5" stroke="#000" stroke-width="2" fill="none"/><path d="M741 439h-2v-1.03h2z"/><path d="M624.24 262.57l14.26-4.64v9.27z" stroke="#000" stroke-width="2"/><path d="M1008 200c17.67 0 32 13.43 32 30s-14.33 30-32 30h-96c-17.67 0-32-13.43-32-30s14.33-30 32-30z" stroke="#000" stroke-width="2" fill="#ffc374"/><g><use xlink:href="#U" transform="matrix(1,0,0,1,885,205) translate(6.099999999999994 30.025)"/><use xlink:href="#aw" transform="matrix(1,0,0,1,885,205) translate(65 30.025)"/></g><path d="M622 230.9h238.55" stroke="#000" stroke-width="2" fill="none"/><path d="M622.03 231.9H621v-2h1.03z"/><path d="M875.82 230.9l-14.27 4.64v-9.27z" stroke="#000" stroke-width="2"/><path d="M1008 810c17.67 0 32 13.43 32 30s-14.33 30-32 30h-96c-17.67 0-32-13.43-32-30s14.33-30 32-30z" stroke="#000" stroke-width="2" fill="#ffc374"/><g><use xlink:href="#U" transform="matrix(1,0,0,1,885,815) translate(6.099999999999994 30.025)"/><use xlink:href="#aw" transform="matrix(1,0,0,1,885,815) translate(65 30.025)"/></g><path d="M822 840h38.5" stroke="#000" stroke-width="2" fill="none"/><path d="M822.03 841H821v-2h1.03z"/><path d="M875.76 840l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M1219 810h72l24 30-24 30h-72l-24-30z" stroke="#000" stroke-width="2" fill="#ffeca9"/><g><use xlink:href="#ax" transform="matrix(1,0,0,1,1200,815) translate(24.549999999999997 17.799999999999997)"/><use xlink:href="#ay" transform="matrix(1,0,0,1,1200,815) translate(62.5 17.799999999999997)"/><use xlink:href="#az" transform="matrix(1,0,0,1,1200,815) translate(8.599999999999994 39.4)"/></g><path d="M1255 872v28.5" stroke="#000" stroke-width="2" fill="none"/><path d="M1256 872.03h-2V871h2z"/><path d="M1255 915.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M288 930h84l28 30-28 30h-84l-28-30z" stroke="#000" stroke-width="2" fill="#ffeca9"/><g><use xlink:href="#aA" transform="matrix(1,0,0,1,265,935) translate(31.554999999999996 17.525)"/><use xlink:href="#aB" transform="matrix(1,0,0,1,265,935) translate(30.029999999999998 39.125)"/></g><path d="M402.37 960h38.13" stroke="#000" stroke-width="2" fill="none"/><path d="M402.4 961h-1.97l.94-1-.94-1h1.96z"/><path d="M455.76 960l-14.26 4.64v-9.28z" stroke="#000" stroke-width="2"/><path d="M250 820h160v60H250z" stroke="#000" stroke-width="2" fill="#ffdba9"/><path d="M266 820v60m128-60v60" stroke="#000" stroke-width="2" fill="none"/><g><use xlink:href="#aC" transform="matrix(1,0,0,1,275,825) translate(23.074999999999996 17.799999999999997)"/><use xlink:href="#av" transform="matrix(1,0,0,1,275,825) translate(1.5999999999999943 39.4)"/></g><path d="M330 882v28.5" stroke="#000" stroke-width="2" fill="none"/><path d="M331 882.03h-2V881h2z"/><path d="M330 925.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M1175 700h160v60h-160z" stroke="#000" stroke-width="2" fill="#ffdba9"/><path d="M1191 700v60m128-60v60" stroke="#000" stroke-width="2" fill="none"/><g><use xlink:href="#aC" transform="matrix(1,0,0,1,1200,705) translate(23.074999999999996 17.799999999999997)"/><use xlink:href="#av" transform="matrix(1,0,0,1,1200,705) translate(1.5999999999999943 39.4)"/></g><path d="M1255 762v28.5" stroke="#000" stroke-width="2" fill="none"/><path d="M1256 762.03h-2V761h2z"/><path d="M1255 805.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M880 440h160v80H880z" stroke="#000" stroke-width="2" fill="#ffdba9"/><path d="M896 440v80m128-80v80" stroke="#000" stroke-width="2" fill="none"/><g><use xlink:href="#aD" transform="matrix(1,0,0,1,905,445) translate(17.549999999999997 28.299999999999997)"/><use xlink:href="#aE" transform="matrix(1,0,0,1,905,445) translate(9.574999999999996 49.9)"/></g><path d="M960 262v158.5" stroke="#000" stroke-width="2" fill="none"/><path d="M961 262.03h-2V261h2z"/><path d="M960 435.76l-4.64-14.26h9.28z" stroke="#000" stroke-width="2"/><path d="M960 808V539.5" stroke="#000" stroke-width="2" fill="none"/><path d="M961 809h-2v-1.03h2z"/><path d="M960 524.24l4.64 14.26h-9.28z" stroke="#000" stroke-width="2"/><path d="M1112 944.1h18.5" stroke="#000" stroke-width="2" fill="none"/><path d="M1112.03 945.1H1111v-2h1.03z"/><path d="M1145.76 944.1l-14.26 4.63v-9.27z" stroke="#000" stroke-width="2"/><path d="M1362 944.1h61.16" stroke="#000" stroke-width="2" fill="none"/><path d="M1362.03 945.1H1361v-2h1.03z"/><path d="M1438.42 944.1l-14.26 4.63v-9.27z" stroke="#000" stroke-width="2"/><path d="M1112 975.77h311.03" stroke="#000" stroke-width="2" fill="none"/><path d="M1112.03 976.77H1111v-2h1.03z"/><path d="M1438.3 975.77l-14.27 4.63v-9.27z" stroke="#000" stroke-width="2"/><path d="M1150 920h210v80h-210z" stroke="#000" stroke-width="2" fill="#c1e4f7"/><g><use xlink:href="#aF" transform="matrix(1,0,0,1,1155,925) translate(17.69999999999999 27.525)"/><use xlink:href="#aG" transform="matrix(1,0,0,1,1155,925) translate(45.64999999999999 27.525)"/><use xlink:href="#aH" transform="matrix(1,0,0,1,1155,925) translate(133.45 27.525)"/><use xlink:href="#aI" transform="matrix(1,0,0,1,1155,925) translate(7.25 49.125)"/></g><path d="M300 330h60l20 30-20 30h-60l-20-30z" stroke="#000" stroke-width="2" fill="#ffeca9"/><g><use xlink:href="#aJ" transform="matrix(1,0,0,1,285,335) translate(13.680000000000001 30.025)"/></g><path d="M330 818V409.5" stroke="#000" stroke-width="2" fill="none"/><path d="M331 819h-2v-1.03h2z"/><path d="M330 394.24l4.64 14.26h-9.28z" stroke="#000" stroke-width="2"/><path d="M382.2 360h58.3" stroke="#ef8d22" stroke-width="2" fill="none"/><path d="M382.23 361h-1.7l.67-1-.66-1h1.7z" fill="#ef8d22"/><path d="M455.76 360l-14.26 4.64v-9.28z" stroke="#ef8d22" stroke-width="2" fill="#ef8d22"/><path d="M330 328V120h110.5" stroke="#ef8d22" stroke-width="2" fill="none"/><path d="M331 329h-2v-1.03h2z" fill="#ef8d22"/><path d="M455.76 120l-14.26 4.64v-9.28z" stroke="#ef8d22" stroke-width="2" fill="#ef8d22"/><path d="M1173 730H775.44V539.5" stroke="#ef8d22" stroke-width="2" fill="none"/><path d="M1174 731h-1.03v-2h1.03z" fill="#ef8d22"/><path d="M775.44 524.24l4.63 14.26h-9.27z" stroke="#ef8d22" stroke-width="2" fill="#ef8d22"/><defs><path d="M63-220v92h138v28H63V0H30v-248h175v28H63" id="aK"/><path d="M84 4C-5 8 30-112 23-190h32v120c0 31 7 50 39 49 72-2 45-101 50-169h31l1 190h-30c-1-10 1-25-2-33-11 22-28 36-60 37" id="aL"/><path d="M117-194c89-4 53 116 60 194h-32v-121c0-31-8-49-39-48C34-167 62-67 57 0H25l-1-190h30c1 10-1 24 2 32 11-22 29-35 61-36" id="aM"/><path d="M96-169c-40 0-48 33-48 73s9 75 48 75c24 0 41-14 43-38l32 2c-6 37-31 61-74 61-59 0-76-41-82-99-10-93 101-131 147-64 4 7 5 14 7 22l-32 3c-4-21-16-35-41-35" id="aN"/><path d="M59-47c-2 24 18 29 38 22v24C64 9 27 4 27-40v-127H5v-23h24l9-43h21v43h35v23H59v120" id="aO"/><path d="M24-231v-30h32v30H24zM24 0v-190h32V0H24" id="aP"/><path d="M100-194c62-1 85 37 85 99 1 63-27 99-86 99S16-35 15-95c0-66 28-99 85-99zM99-20c44 1 53-31 53-75 0-43-8-75-51-75s-53 32-53 75 10 74 51 75" id="aQ"/><path d="M141-36C126-15 110 5 73 4 37 3 15-17 15-53c-1-64 63-63 125-63 3-35-9-54-41-54-24 1-41 7-42 31l-33-3c5-37 33-52 76-52 45 0 72 20 72 64v82c-1 20 7 32 28 27v20c-31 9-61-2-59-35zM48-53c0 20 12 33 32 33 41-3 63-29 60-74-43 2-92-5-92 41" id="aR"/><path d="M24 0v-261h32V0H24" id="aS"/><g id="a"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,10.950000000000001,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,20.950000000000003,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,30.950000000000003,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,39.95,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,44.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,78.9,0)" xlink:href="#aS"/></g><path d="M160-131c35 5 61 23 61 61C221 17 115-2 30 0v-248c76 3 177-17 177 60 0 33-19 50-47 57zm-97-11c50-1 110 9 110-42 0-47-63-36-110-37v79zm0 115c55-2 124 14 124-45 0-56-70-42-124-44v89" id="aT"/><path d="M140-251c81 0 123 46 123 126C263-46 219 4 140 4 59 4 17-45 17-125s42-126 123-126zm0 227c63 0 89-41 89-101s-29-99-89-99c-61 0-89 39-89 99S79-25 140-24" id="aU"/><path d="M30 0v-248h33v221h125V0H30" id="aV"/><path d="M30-248c118-7 216 8 213 122C240-48 200 0 122 0H30v-248zM63-27c89 8 146-16 146-99s-60-101-146-95v194" id="aW"/><g id="b"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aT"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aU"/><use transform="matrix(0.05,0,0,0.05,26,0)" xlink:href="#aV"/><use transform="matrix(0.05,0,0,0.05,36,0)" xlink:href="#aW"/></g><path d="M87 75C49 33 22-17 22-94c0-76 28-126 65-167h31c-38 41-64 92-64 168S80 34 118 75H87" id="aX"/><path d="M127-220V0H93v-220H8v-28h204v28h-85" id="aY"/><path d="M210-169c-67 3-38 105-44 169h-31v-121c0-29-5-50-35-48C34-165 62-65 56 0H25l-1-190h30c1 10-1 24 2 32 10-44 99-50 107 0 11-21 27-35 58-36 85-2 47 119 55 194h-31v-121c0-29-5-49-35-48" id="aZ"/><path d="M100-194c63 0 86 42 84 106H49c0 40 14 67 53 68 26 1 43-12 49-29l28 8c-11 28-37 45-77 45C44 4 14-33 15-96c1-61 26-98 85-98zm52 81c6-60-76-77-97-28-3 7-6 17-6 28h103" id="ba"/><g id="c"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#aY"/><use transform="matrix(0.05,0,0,0.05,16.25,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,20.2,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,35.15,0)" xlink:href="#ba"/></g><path d="M185-189c-5-48-123-54-124 2 14 75 158 14 163 119 3 78-121 87-175 55-17-10-28-26-33-46l33-7c5 56 141 63 141-1 0-78-155-14-162-118-5-82 145-84 179-34 5 7 8 16 11 25" id="bb"/><path d="M114-163C36-179 61-72 57 0H25l-1-190h30c1 12-1 29 2 39 6-27 23-49 58-41v29" id="bc"/><path d="M135-143c-3-34-86-38-87 0 15 53 115 12 119 90S17 21 10-45l28-5c4 36 97 45 98 0-10-56-113-15-118-90-4-57 82-63 122-42 12 7 21 19 24 35" id="bd"/><path d="M33-261c38 41 65 92 65 168S71 34 33 75H2C39 34 66-17 66-93S39-220 2-261h31" id="be"/><g id="d"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,22,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,31.899999999999995,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,41.9,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,50.9,0)" xlink:href="#be"/></g><g id="e"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,21,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,31,0)" xlink:href="#aM"/></g><path d="M30-248c87 1 191-15 191 75 0 78-77 80-158 76V0H30v-248zm33 125c57 0 124 11 124-50 0-59-68-47-124-48v98" id="bf"/><g id="f"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bf"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,22,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,37.95,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,52.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,62.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,67.9,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,77.9,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,83.85000000000001,0)" xlink:href="#bd"/></g><path d="M16-82v-28h88v28H16" id="bg"/><path d="M177-190C167-65 218 103 67 71c-23-6-38-20-44-43l32-5c15 47 100 32 89-28v-30C133-14 115 1 83 1 29 1 15-40 15-95c0-56 16-97 71-98 29-1 48 16 59 35 1-10 0-23 2-32h30zM94-22c36 0 50-32 50-73 0-42-14-75-50-75-39 0-46 34-46 75s6 73 46 73" id="bh"/><g id="g"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,15.949999999999998,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,19.9,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,28.899999999999995,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,38.9,0)" xlink:href="#bg"/><use transform="matrix(0.05,0,0,0.05,44.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,49.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,53.800000000000004,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,68.75,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,72.7,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,82.7,0)" xlink:href="#bh"/></g><path d="M212-179c-10-28-35-45-73-45-59 0-87 40-87 99 0 60 29 101 89 101 43 0 62-24 78-52l27 14C228-24 195 4 139 4 59 4 22-46 18-125c-6-104 99-153 187-111 19 9 31 26 39 46" id="bi"/><g id="h"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,34.85,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,44.85,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,58.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,62.800000000000004,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,72.80000000000001,0)" xlink:href="#aM"/></g><path d="M205 0l-28-72H64L36 0H1l101-248h38L239 0h-34zm-38-99l-47-123c-12 45-31 82-46 123h93" id="bj"/><path d="M190 0L58-211 59 0H30v-248h39L202-35l-2-213h31V0h-41" id="bk"/><path d="M33 0v-248h34V0H33" id="bl"/><g id="i"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#bj"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,28.899999999999995,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,41.85,0)" xlink:href="#bl"/></g><path d="M126-127c33 6 58 20 58 59 0 88-139 92-164 29-3-8-5-16-6-25l32-3c6 27 21 44 54 44 32 0 52-15 52-46 0-38-36-46-79-43v-28c39 1 72-4 72-42 0-27-17-43-46-43-28 0-47 15-49 41l-32-3c6-42 35-63 81-64 48-1 79 21 79 65 0 36-21 52-52 59" id="bm"/><path d="M85-194c31 0 48 13 60 33l-1-100h32l1 261h-30c-2-10 0-23-3-31C134-8 116 4 85 4 32 4 16-35 15-94c0-66 23-100 70-100zm9 24c-40 0-46 34-46 75 0 40 6 74 45 74 42 0 51-32 51-76 0-42-9-74-50-73" id="bn"/><path d="M106-169C34-169 62-67 57 0H25v-261h32l-1 103c12-21 28-36 61-36 89 0 53 116 60 194h-32v-121c2-32-8-49-39-48" id="bo"/><path d="M101-234c-31-9-42 10-38 44h38v23H63V0H32v-167H5v-23h27c-7-52 17-82 69-68v24" id="bp"/><g id="j"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#aY"/><use transform="matrix(0.05,0,0,0.05,28.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,37.95,0)" xlink:href="#bo"/><use transform="matrix(0.05,0,0,0.05,47.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,51.900000000000006,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,56.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,61.900000000000006,0)" xlink:href="#be"/></g><path d="M115-194c53 0 69 39 70 98 0 66-23 100-70 100C84 3 66-7 56-30L54 0H23l1-261h32v101c10-23 28-34 59-34zm-8 174c40 0 45-34 45-75 0-40-5-75-45-74-42 0-51 32-51 76 0 43 10 73 51 73" id="bq"/><path d="M145-31C134-9 116 4 85 4 32 4 16-35 15-94c0-59 17-99 70-100 32-1 48 14 60 33 0-11-1-24 2-32h30l-1 268h-32zM93-21c41 0 51-33 51-76s-8-73-50-73c-40 0-46 35-46 75s5 74 45 74" id="br"/><g id="k"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,32.95,0)" xlink:href="#bq"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,46.900000000000006,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,50.85000000000001,0)" xlink:href="#br"/><use transform="matrix(0.05,0,0,0.05,60.85,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,70.85000000000001,0)" xlink:href="#ba"/></g><g id="l"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,25.950000000000003,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,35.95,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,40.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,44.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,49.900000000000006,0)" xlink:href="#be"/></g><path d="M233-177c-1 41-23 64-60 70L243 0h-38l-65-103H63V0H30v-248c88 3 205-21 203 71zM63-129c60-2 137 13 137-47 0-61-80-42-137-45v92" id="bs"/><g id="m"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bs"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,32.95,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,42.85000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,52.85,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,62.85,0)" xlink:href="#aO"/></g><g id="n"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,5,0)" xlink:href="#aQ"/></g><g id="o"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bs"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#bf"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#bl"/></g><g id="p"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#bj"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,28.899999999999995,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,41.85,0)" xlink:href="#bl"/></g><path d="M115-194c55 1 70 41 70 98S169 2 115 4C84 4 66-9 55-30l1 105H24l-1-265h31l2 30c10-21 28-34 59-34zm-8 174c40 0 45-34 45-75s-6-73-45-74c-42 0-51 32-51 76 0 43 10 73 51 73" id="bt"/><g id="q"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,25.950000000000003,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,35.95,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,44.95,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,54.95,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,69.9,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,79.9,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,83.85000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,93.85000000000001,0)" xlink:href="#be"/></g><g id="r"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,10.950000000000001,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,20.950000000000003,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,30.950000000000003,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,39.95,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,44.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,78.9,0)" xlink:href="#aS"/></g><path d="M240 0l2-218c-23 76-54 145-80 218h-23L58-218 59 0H30v-248h44l77 211c21-75 51-140 76-211h43V0h-30" id="bu"/><path d="M143 0L79-87 56-68V0H24v-261h32v163l83-92h37l-77 82L181 0h-38" id="bv"/><g id="s"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bu"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,33.95,0)" xlink:href="#bv"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,46.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,56.900000000000006,0)" xlink:href="#bh"/></g><g id="t"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#bv"/><use transform="matrix(0.05,0,0,0.05,21,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,31,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#bg"/><use transform="matrix(0.05,0,0,0.05,44.85000000000001,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,58.85,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,64.80000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,68.75000000000001,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,78.75000000000001,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,88.75000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,92.70000000000002,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,102.7,0)" xlink:href="#bh"/></g><g id="u"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,29,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,39,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,51.95,0)" xlink:href="#be"/></g><g id="v"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aY"/><use transform="matrix(0.05,0,0,0.05,10.3,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,14.25,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,29.200000000000003,0)" xlink:href="#ba"/></g><g id="w"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,9,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,19,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,24.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,28.899999999999995,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,38.9,0)" xlink:href="#bd"/></g><path d="M9 0v-24l116-142H16v-24h144v24L44-24h123V0H9" id="bw"/><g id="x"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,25.950000000000003,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,40.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,50.9,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,54.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,58.800000000000004,0)" xlink:href="#bw"/><use transform="matrix(0.05,0,0,0.05,67.80000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,77.80000000000001,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,82.80000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,86.75000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,96.75000000000001,0)" xlink:href="#aM"/></g><g id="y"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,16.900000000000002,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#aV"/></g><g id="z"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,5,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,14,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,32.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,42.9,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,47.9,0)" xlink:href="#bo"/><use transform="matrix(0.05,0,0,0.05,57.900000000000006,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,66.9,0)" xlink:href="#be"/></g><g id="A"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,26.900000000000002,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,35.900000000000006,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,45.900000000000006,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,49.85000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,59.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,64.85000000000001,0)" xlink:href="#ba"/></g><g id="B"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#aM"/></g><g id="C"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bp"/></g><g id="D"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,5,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,8.95,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,23.9,0)" xlink:href="#ba"/></g><g id="E"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,9,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,19,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,24.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,28.899999999999995,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,38.9,0)" xlink:href="#bd"/></g><g id="F"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#bj"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,28.899999999999995,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,41.85,0)" xlink:href="#bl"/></g><g id="G"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#aY"/><use transform="matrix(0.05,0,0,0.05,28.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,37.95,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,52.95,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,57.95,0)" xlink:href="#be"/></g><g id="H"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,18.900000000000002,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,43.900000000000006,0)" xlink:href="#ba"/></g><g id="I"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,33.95,0)" xlink:href="#bv"/></g><g id="J"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,5,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,15,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,25,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,34,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,39,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,52.95,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,62.95,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,72.95,0)" xlink:href="#aS"/></g><g id="K"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bu"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#aM"/></g><g id="L"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,10.950000000000001,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,20.950000000000003,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,30.950000000000003,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,39.95,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,44.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,78.9,0)" xlink:href="#aS"/></g><g id="M"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,15.949999999999998,0)" xlink:href="#aW"/></g><g id="N"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,3.95,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,18.900000000000002,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#bh"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#be"/></g><g id="O"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aT"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,31.899999999999995,0)" xlink:href="#aM"/></g><g id="P"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bu"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,33.95,0)" xlink:href="#bv"/></g><g id="Q"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bf"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,37.95,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,43.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,53.900000000000006,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,62.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,72.9,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,81.9,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,90.9,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,100.9,0)" xlink:href="#bn"/></g><g id="R"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,10.950000000000001,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,20.950000000000003,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,30.950000000000003,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,39.95,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,44.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,78.9,0)" xlink:href="#aS"/></g><g id="S"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aY"/><use transform="matrix(0.05,0,0,0.05,10.3,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,14.25,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,29.200000000000003,0)" xlink:href="#ba"/></g><g id="T"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,22,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,31.899999999999995,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,41.9,0)" xlink:href="#bd"/></g><g id="U"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bu"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,29.950000000000003,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,33.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,43.900000000000006,0)" xlink:href="#aM"/></g><path d="M30 0v-248h187v28H63v79h144v27H63v87h162V0H30" id="bx"/><g id="V"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bx"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,21,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,26,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,29.950000000000003,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,44.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,54.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,59.900000000000006,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,63.85,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,73.85,0)" xlink:href="#aM"/></g><g id="W"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#aU"/><use transform="matrix(0.05,0,0,0.05,19.95,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,29.950000000000003,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,72.85000000000001,0)" xlink:href="#be"/></g><g id="X"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,31.950000000000003,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,41.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,45.900000000000006,0)" xlink:href="#bv"/><use transform="matrix(0.05,0,0,0.05,54.900000000000006,0)" xlink:href="#ba"/></g><path d="M68-38c1 34 0 65-14 84H32c9-13 17-26 17-46H33v-38h35" id="by"/><g id="Y"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,32.95,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,52.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,56.900000000000006,0)" xlink:href="#bv"/><use transform="matrix(0.05,0,0,0.05,65.9,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,75.9,0)" xlink:href="#by"/></g><g id="Z"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aU"/><use transform="matrix(0.05,0,0,0.05,14,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,24,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,29,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,32.95,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,52.95,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,62.95,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,66.9,0)" xlink:href="#be"/></g><g id="aa"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bb"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,21,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,31,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#bh"/></g><g id="ab"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,25.950000000000003,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,35.95,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,40.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,44.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,49.900000000000006,0)" xlink:href="#by"/></g><g id="ac"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,16.900000000000002,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,25.900000000000002,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,30.900000000000002,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,40.900000000000006,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,46.85000000000001,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,51.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,55.80000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,65.80000000000001,0)" xlink:href="#aM"/></g><g id="ad"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,34.85,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,44.85,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,58.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,62.800000000000004,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,72.80000000000001,0)" xlink:href="#aM"/></g><g id="ae"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#bf"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#bo"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,37.95,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,46.95,0)" xlink:href="#ba"/></g><g id="af"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,16.900000000000002,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,21.55,0)" xlink:href="#bp"/></g><path d="M0 4l72-265h28L28 4H0" id="bz"/><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bz" id="ag"/><path d="M232-93c-1 65-40 97-104 97C67 4 28-28 28-90v-158h33c8 89-33 224 67 224 102 0 64-133 71-224h33v155" id="bA"/><path d="M206 0h-36l-40-164L89 0H53L-1-190h32L70-26l43-164h34l41 164 42-164h31" id="bB"/><g id="ah"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aT"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,15.949999999999998,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,19.9,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,29.899999999999995,0)" xlink:href="#bg"/><use transform="matrix(0.05,0,0,0.05,35.85,0)" xlink:href="#bA"/><use transform="matrix(0.05,0,0,0.05,48.800000000000004,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,58.800000000000004,0)" xlink:href="#bg"/><use transform="matrix(0.05,0,0,0.05,64.75,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,77.7,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,87.7,0)" xlink:href="#bB"/><use transform="matrix(0.05,0,0,0.05,100.65,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,110.65,0)" xlink:href="#be"/></g><g id="ai"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,10.950000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,14.9,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,24.900000000000002,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,28.85,0)" xlink:href="#bn"/></g><g id="aj"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bu"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#bd"/></g><g id="ak"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,9.9,0)" xlink:href="#bp"/></g><g id="al"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,19,0)" xlink:href="#br"/><use transform="matrix(0.05,0,0,0.05,29,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,39,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#be"/></g><g id="am"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,15.949999999999998,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,25.950000000000003,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,35.95,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,41.900000000000006,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,45.85000000000001,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,55.85,0)" xlink:href="#bh"/></g><g id="an"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,19,0)" xlink:href="#aM"/></g><g id="ao"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bq"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#ba"/></g><g id="ap"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,9,0)" xlink:href="#bB"/><use transform="matrix(0.05,0,0,0.05,21.950000000000003,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,25.900000000000002,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,30.900000000000002,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,39.900000000000006,0)" xlink:href="#bo"/><use transform="matrix(0.05,0,0,0.05,49.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,59.900000000000006,0)" xlink:href="#bn"/></g><g id="aq"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,34.85,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,44.85,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,58.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,62.800000000000004,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,72.80000000000001,0)" xlink:href="#aM"/></g><path d="M108 0H70L1-190h34L89-25l56-165h34" id="bC"/><g id="ar"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bm"/><use transform="matrix(0.05,0,0,0.05,10,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,20,0)" xlink:href="#bC"/><use transform="matrix(0.05,0,0,0.05,29,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,39,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,58.900000000000006,0)" xlink:href="#bh"/><use transform="matrix(0.05,0,0,0.05,68.9,0)" xlink:href="#be"/></g><g id="as"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bl"/><use transform="matrix(0.05,0,0,0.05,5,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,15,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,25,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,35,0)" xlink:href="#aO"/></g><g id="at"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aR"/></g><g id="au"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aW"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,27.950000000000003,0)" xlink:href="#aR"/></g><g id="av"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,32.95,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,37.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,41.900000000000006,0)" xlink:href="#bh"/><use transform="matrix(0.05,0,0,0.05,51.900000000000006,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,61.900000000000006,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,67.85000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,77.85000000000001,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,82.85000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,86.80000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,96.80000000000001,0)" xlink:href="#aM"/></g><g id="aw"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bx"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,21,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,26,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,29.950000000000003,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,44.9,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,54.900000000000006,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,59.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,69.9,0)" xlink:href="#bd"/></g><g id="ax"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bs"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aM"/></g><path d="M155-56V0h-30v-56H8v-25l114-167h33v167h35v25h-35zm-30-156c-27 46-58 90-88 131h88v-131" id="bD"/><g id="ay"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#bD"/></g><path d="M103-251c84 0 111 97 45 133-19 10-37 24-39 52H78c0-63 77-55 77-114 0-30-21-42-52-43-32 0-53 17-56 46l-32-2c7-45 34-72 88-72zM77 0v-35h34V0H77" id="bE"/><g id="az"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,34.85,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,44.85,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,58.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,62.800000000000004,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,72.80000000000001,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,82.80000000000001,0)" xlink:href="#bE"/></g><g id="aA"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bu"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,33.95,0)" xlink:href="#bv"/><use transform="matrix(0.05,0,0,0.05,42.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,46.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,56.900000000000006,0)" xlink:href="#bh"/></g><g id="aB"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aZ"/><use transform="matrix(0.05,0,0,0.05,14.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,24.950000000000003,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,29.950000000000003,0)" xlink:href="#bo"/><use transform="matrix(0.05,0,0,0.05,39.95,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,49.95,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,59.95,0)" xlink:href="#bE"/></g><g id="aC"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bf"/><use transform="matrix(0.05,0,0,0.05,12,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,15.949999999999998,0)" xlink:href="#bt"/><use transform="matrix(0.05,0,0,0.05,25.950000000000003,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,35.95,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,39.900000000000006,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,43.85000000000001,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#ba"/></g><g id="aD"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aL"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,26.900000000000002,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,35.900000000000006,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,45.900000000000006,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,55.900000000000006,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,64.9,0)" xlink:href="#ba"/></g><g id="aE"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bs"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bh"/><use transform="matrix(0.05,0,0,0.05,32.95,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,57.900000000000006,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,66.9,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,70.85000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,80.85000000000001,0)" xlink:href="#aM"/></g><g id="aF"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#bD"/></g><g id="aG"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,28.900000000000002,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,34.85,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,44.85,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,53.85,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,58.85,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,62.800000000000004,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,72.80000000000001,0)" xlink:href="#aM"/></g><g id="aH"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aX"/><use transform="matrix(0.05,0,0,0.05,5.95,0)" xlink:href="#bj"/><use transform="matrix(0.05,0,0,0.05,17.95,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,30.899999999999995,0)" xlink:href="#aY"/><use transform="matrix(0.05,0,0,0.05,39.85,0)" xlink:href="#bd"/></g><g id="aI"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#bk"/><use transform="matrix(0.05,0,0,0.05,12.950000000000001,0)" xlink:href="#bD"/><use transform="matrix(0.05,0,0,0.05,22.950000000000003,0)" xlink:href="#aT"/><use transform="matrix(0.05,0,0,0.05,34.95,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,38.900000000000006,0)" xlink:href="#aR"/><use transform="matrix(0.05,0,0,0.05,48.900000000000006,0)" xlink:href="#bd"/><use transform="matrix(0.05,0,0,0.05,57.900000000000006,0)" xlink:href="#aK"/><use transform="matrix(0.05,0,0,0.05,68.85000000000001,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,72.80000000000001,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,82.80000000000001,0)" xlink:href="#aS"/><use transform="matrix(0.05,0,0,0.05,86.75000000000001,0)" xlink:href="#bn"/><use transform="matrix(0.05,0,0,0.05,96.75000000000001,0)" xlink:href="#bi"/><use transform="matrix(0.05,0,0,0.05,109.7,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,119.7,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,125.65000000000003,0)" xlink:href="#bc"/><use transform="matrix(0.05,0,0,0.05,131.60000000000002,0)" xlink:href="#ba"/><use transform="matrix(0.05,0,0,0.05,141.60000000000002,0)" xlink:href="#aN"/><use transform="matrix(0.05,0,0,0.05,150.60000000000002,0)" xlink:href="#aO"/><use transform="matrix(0.05,0,0,0.05,155.60000000000002,0)" xlink:href="#aP"/><use transform="matrix(0.05,0,0,0.05,159.55,0)" xlink:href="#aQ"/><use transform="matrix(0.05,0,0,0.05,169.55,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,179.55,0)" xlink:href="#be"/></g><g id="aJ"><use transform="matrix(0.05,0,0,0.05,0,0)" xlink:href="#aU"/><use transform="matrix(0.05,0,0,0.05,14,0)" xlink:href="#aM"/><use transform="matrix(0.05,0,0,0.05,24,0)" xlink:href="#bz"/><use transform="matrix(0.05,0,0,0.05,29,0)" xlink:href="#aU"/><use transform="matrix(0.05,0,0,0.05,43,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,47.65,0)" xlink:href="#bp"/><use transform="matrix(0.05,0,0,0.05,52.650000000000006,0)" xlink:href="#bE"/></g></defs></g></svg>
<p><a class="reference external" href="../_static/flowcharts/functional.svg">Open image</a></p>
</div>
<section id="initial-preprocessing">
<h2>Initial Preprocessing<a class="headerlink" href="#initial-preprocessing" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="../_images/func_init_options.png" src="../_images/func_init_options.png" />
</figure>
<ol class="arabic">
<li><p><strong>ANT’s N4BiasFieldCorrection - [On, Off]:</strong> Choose On to perform N4 Bias Field Correction on mean EPI image, may help enhance coregistration quality. Default is Off.</p></li>
<li><p><strong>Despike - [On, Off, On/Off]:</strong> Choose On to perform AFNI 3dDespike. Default is Off.</p></li>
<li><p><strong>Scaling - [On, Off]:</strong> Choose On to scale the brain to a different size, especially optimal for rodent data.</p></li>
<li><p><strong>Scaling Factor - [integer]:</strong>  The scaling factor of the brain. Default is 10.</p></li>
<li><p><strong>Motion Statistics before Slice Timing Correction - [On, Off, On/Off]:</strong> Choose On to calculate motion parameter estimation before slice timing correction, with actual motion correction still occurring after slice timing correction. The motion parameters go on to be used in nuisance regression and statistics reporting. Default is Off.</p></li>
<li><p><strong>Motion Correction Tool - [3dvolreg, mcflirt]:</strong> Choose motion correction method. Options: AFNI volreg, FSL mcflirt. Default is AFNI volreg.</p></li>
<li><p><strong>Motion Correction Reference - [mean, median, selected volume]:</strong> Choose motion correction reference. Options: mean, median, selected volume. Default is mean.</p></li>
<li><p><strong>Motion Correction Reference Volume - [integer]:</strong> Choose an integer as the motion correction reference volume if choosing “selected volume” as motion correction reference.</p></li>
<li><p><strong>Motion Estimate Filter:</strong> Adapted from the motion estimate filter by <a class="reference external" href="https://github.com/DCAN-Labs">DCAN Labs</a>. Based on the filter described in Fair <em>et al.</em><a class="footnote-reference brackets" href="#footcite-fair20" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><strong>run - [False, True]:</strong> Toggle the filter.</p></li>
<li><p><strong>filter_type - [‘notch’, ‘lowpass’]:</strong> Use either a notch/bandstop or low-pass filter.</p></li>
<li><p><strong>filter_order - [integer]:</strong> Specify the filter order. Default is 4.</p></li>
<li><p><strong>breathing_rate_min - [integer]:</strong> Lowest breaths-per-minute value in the entire dataset (across all participants). Required for both notch and lowpass filters. Mutually exclusive with <cite>center_frequency</cite>, <cite>filter_bandwidth</cite>, and <cite>lowpass_cutoff</cite>. Using this parameter will guide the automatic design of the filter.</p></li>
<li><p><strong>breathing_rate_max - [integer]:</strong> Highest breaths-per-minute value in the entire dataset (across all participants). Required for the notch filter. Mutually exclusive with <cite>center_frequency</cite>, <cite>filter_bandwidth</cite>, and <cite>lowpass_cutoff</cite>. Using this parameter will guide the automatic design of the filter.</p></li>
<li><p><strong>center_frequency - [float]:</strong> Notch filter only. Manually select the center frequency for the notch filter. Mutually exclusive with <cite>breathing_rate_min</cite> and <cite>breathing_rate_max</cite>. Use this to manually design the filter.</p></li>
<li><p><strong>filter_bandwidth - [float]:</strong> Notch filter only. Manually select the bandwidth for the notch filter. Mutually exclusive with <cite>breathing_rate_min</cite> and <cite>breathing_rate_max</cite>. Use this to manually design the filter.</p></li>
<li><p><strong>lowpass_cutoff - [float]:</strong> Lowpass filter only. Manually select the cutoff frequency for the lowpass filter. Mutually exclusive with <cite>breathing_rate_min</cite> and <cite>breathing_rate_max</cite>. Use this to manually design the filter.</p></li>
</ol>
</div></blockquote>
</li>
</ol>
<section id="configuration-without-the-gui">
<span id="func-init-without-gui"></span><h3>Configuration Without the GUI<a class="headerlink" href="#configuration-without-the-gui" title="Permalink to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">registration_workflows</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">functional_registration</span><span class="p">:</span>

<span class="w">    </span><span class="nt">coregistration</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># functional (BOLD/EPI) registration to anatomical (structural/T1)</span>

<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># reference: &#39;brain&#39; or &#39;restore-brain&#39;</span>
<span class="w">      </span><span class="c1"># In ABCD-options pipeline, &#39;restore-brain&#39; is used as coregistration reference</span>
<span class="w">      </span><span class="nt">reference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">brain</span>

<span class="w">      </span><span class="c1"># Choose FSL or ABCD as coregistration method</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FSL</span>

<span class="w">      </span><span class="c1"># Choose brain or whole-head as coregistration input</span>
<span class="w">      </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">brain</span>

<span class="w">      </span><span class="c1"># Choose coregistration interpolation</span>
<span class="w">      </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trilinear</span>

<span class="w">      </span><span class="c1"># Choose coregistration cost function</span>
<span class="w">      </span><span class="nt">cost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">corratio</span>

<span class="w">      </span><span class="c1"># Choose coregistration degree of freedom</span>
<span class="w">      </span><span class="nt">dof</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>

<span class="w">      </span><span class="c1"># Extra arguments for FSL flirt</span>
<span class="w">      </span><span class="nt">arguments</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">      </span><span class="nt">func_input_prep</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Choose whether to use functional brain or skull as the input to functional-to-anatomical registration</span>
<span class="w">        </span><span class="nt">reg_with_skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Choose whether to use the mean of the functional/EPI as the input to functional-to-anatomical registration or one of the volumes from the functional 4D timeseries that you choose.</span>
<span class="w">        </span><span class="c1"># input: [&#39;Mean_Functional&#39;, &#39;Selected_Functional_Volume&#39;, &#39;fmriprep_reference&#39;]</span>
<span class="w">        </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;Mean_Functional&#39;</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="nt">Mean Functional</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Run ANTs’ N4 Bias Field Correction on the input BOLD (EPI)</span>
<span class="w">          </span><span class="c1"># this can increase tissue contrast which may improve registration quality in some data</span>
<span class="w">          </span><span class="nt">n4_correct_func</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="w">        </span><span class="nt">Selected Functional Volume</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Only for when &#39;Use as Functional-to-Anatomical Registration Input&#39; is set to &#39;Selected Functional Volume&#39;.</span>
<span class="w">          </span><span class="c1">#Input the index of which volume from the functional 4D timeseries input file you wish to use as the input for functional-to-anatomical registration.</span>
<span class="w">          </span><span class="nt">func_reg_input_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">functional_preproc</span><span class="p">:</span>

<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">update_header</span><span class="p">:</span><span class="w"> </span>

<span class="w">    </span><span class="c1"># Convert raw data from LPI to RPI</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">truncation</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># First timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is 0 (beginning of timeseries).</span>
<span class="w">    </span><span class="c1"># First timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">start_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># Last timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is None or End (end of timeseries).</span>
<span class="w">    </span><span class="c1"># Last timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">stop_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">scaling</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Scale functional raw data, usually used in rodent pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">    </span><span class="c1"># Scale the size of the dataset voxels by the factor.</span>
<span class="w">    </span><span class="nt">scaling_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">  </span><span class="nt">despiking</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Run AFNI 3dDespike</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">motion_estimates_and_correction</span><span class="p">:</span>
<span class="w">  </span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_estimates</span><span class="p">:</span><span class="w"> </span>

<span class="w">      </span><span class="c1"># calculate motion statistics BEFORE slice-timing correction</span>
<span class="w">      </span><span class="nt">calculate_motion_first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># calculate motion statistics AFTER motion correction</span>
<span class="w">      </span><span class="nt">calculate_motion_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_correction</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># using: [&#39;3dvolreg&#39;, &#39;mcflirt&#39;]</span>
<span class="w">      </span><span class="c1"># Forking is currently broken for this option.</span>
<span class="w">      </span><span class="c1"># Please use separate configs if you want to use each of 3dvolreg and mcflirt.</span>
<span class="w">      </span><span class="c1"># Follow https://github.com/FCP-INDI/C-PAC/issues/1935 to see when this issue is resolved.</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3dvolreg&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># option parameters</span>
<span class="w">      </span><span class="nt">AFNI-3dvolreg</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># This option is useful when aligning high-resolution datasets that may need more alignment than a few voxels.</span>
<span class="w">        </span><span class="nt">functional_volreg_twopass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference. Options: mean, median, selected_volume, fmriprep_reference</span>
<span class="w">      </span><span class="nt">motion_correction_reference</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;mean&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference volume</span>
<span class="w">      </span><span class="nt">motion_correction_reference_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="nt">motion_estimate_filter</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Filter physiological (respiration) artifacts from the head motion estimates.</span>
<span class="w">      </span><span class="c1"># Adapted from DCAN Labs filter.</span>
<span class="w">      </span><span class="c1">#     https://www.ohsu.edu/school-of-medicine/developmental-cognition-and-neuroimaging-lab</span>
<span class="w">      </span><span class="c1">#     https://www.biorxiv.org/content/10.1101/337360v1.full.pdf</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notch&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Highest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For notch filter.</span>
<span class="w">          </span><span class="nt">breathing_rate_max</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># notch filter direct customization parameters</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min and breathing_rate_max are provided,</span>
<span class="w">          </span><span class="c1"># the following parameters will be ignored.</span>

<span class="w">          </span><span class="c1"># the center frequency of the notch filter</span>
<span class="w">          </span><span class="nt">center_frequency</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># the width of the notch filter</span>
<span class="w">          </span><span class="nt">filter_bandwidth</span><span class="p">:</span>

<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lowpass&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># lowpass filter direct customization parameter</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min is provided, the following</span>
<span class="w">          </span><span class="c1"># parameter will be ignored.</span>

<span class="w">          </span><span class="c1"># the frequency cutoff of the filter</span>
<span class="w">          </span><span class="nt">lowpass_cutoff</span><span class="p">:</span>
</pre></div>
</div>
<div class="versionchanged" id="motion-estimate-filter-valid-options">
<p><span class="versionmodified changed">Changed in version 1.8.5: </span>Changed from single dictionary to <code class="docutils literal notranslate"><span class="pre">filters</span></code> list of dictionaries</p>
</div>
<p>For each filter in <code class="docutils literal notranslate"><span class="pre">motion_estimate_filter.filters</span></code>, if <code class="docutils literal notranslate"><span class="pre">breathing_rate_min</span></code> and <code class="docutils literal notranslate"><span class="pre">breathing_rate_max</span></code> are provided, the filter design attributes (<code class="docutils literal notranslate"><span class="pre">center_frequency</span></code>, <code class="docutils literal notranslate"><span class="pre">filter_bandwidth</span></code>, <code class="docutils literal notranslate"><span class="pre">lowpass_cutoff</span></code>) are automatically configured. But if you provide these directly, you don’t need the breathing rates. If all all parameters are provided, the filter design attributes will be ignored in favor of the <code class="docutils literal notranslate"><span class="pre">breathing_rate_*</span></code> attributes. A configuration must match at least one row in the following table:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">run</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">filter_type</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">filter_order</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">breathing_rate_min</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">breathing_rate_max</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">center_frequency</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">filter_bandwidth</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">lowpass_cutoff</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">Name</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>“Off”</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>“On”</p></td>
<td><p>“notch”</p></td>
<td><p><strong>required</strong> int</p></td>
<td><p><strong>required</strong> float</p></td>
<td><p><strong>required</strong> float</p></td>
<td></td>
<td></td>
<td></td>
<td><p>optional str</p></td>
</tr>
<tr class="row-even"><td><p>“On”</p></td>
<td><p>“notch”</p></td>
<td><p><strong>required</strong> int</p></td>
<td><p><em>None</em></p></td>
<td><p><em>None</em></p></td>
<td><p><strong>required</strong> float</p></td>
<td><p><strong>required</strong> float</p></td>
<td></td>
<td><p>optional str</p></td>
</tr>
<tr class="row-odd"><td><p>“On”</p></td>
<td><p>“lowpass”</p></td>
<td><p><strong>required</strong> int</p></td>
<td><p><strong>required</strong> float</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>optional str</p></td>
</tr>
<tr class="row-even"><td><p>“On”</p></td>
<td><p>“lowpass”</p></td>
<td><p><strong>required</strong> int</p></td>
<td><p><em>None</em></p></td>
<td></td>
<td></td>
<td></td>
<td><p><strong>required</strong> float</p></td>
<td><p>optional str</p></td>
</tr>
</tbody>
</table>
</div>
<p>For each filter, <code class="docutils literal notranslate"><span class="pre">Name</span></code> need not be provided; if <code class="docutils literal notranslate"><span class="pre">Name</span></code> is not provided, it will be autopopulated based on the configuration, using the keys in this table <a class="footnote-reference brackets" href="#motion-filter-abbreviations" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">breathing_rate_min</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">breathing_rate_max</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">center_frequency</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">filter_bandwidth</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">lowpass_cutoff</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fl</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fu</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fc</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bw</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fc</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>and the format <code class="docutils literal notranslate"><span class="pre">{filterType}{filterOrder}[{key}{value}]*</span></code> with a lowercase <code class="docutils literal notranslate"><span class="pre">p</span></code> replacing any decimal points. If any filters have duplicate names (given or generated), each name after the first will be suffixed with <code class="docutils literal notranslate"><span class="pre">dup{duplicate_number}</span></code>, with <code class="docutils literal notranslate"><span class="pre">duplicate_number</span></code> starting at 1. See <a class="reference internal" href="../developer/schema#CPAC.pipeline.schema.name_motion_filter" title="CPAC.pipeline.schema.name_motion_filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">CPAC.pipeline.schema.name_motion_filter</span></code></a> for examples.</p>
<p class="rubric">Note about abbreviation table</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="motion-filter-abbreviations" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>These abbreviations are based on <a class="footnote-reference brackets" href="#footcite-eybe16" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> but modified to comply with <a class="footnote-reference brackets" href="#footcite-bids21" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>.</p>
</aside>
</aside>
<p class="rubric">References</p>
<div class="docutils container" id="id5">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-fair20" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Fair, D. A., Miranda-Dominguez, O., Snyder, A. Z., Perrone, A., Earl, E. A., Van, A. N., Koller, J. M., Feczko, E., Tisdall, M. D., van der Kouwe, A., Klein, R. L., Mirro, A. E., Hampton, J. M., Adeyemo, B., Laumann, T. O., Gratton, C., Greene, D. J., Schlaggar, B. L., Hagler, D. J., Watts, R., Garavan, H., Barch, D. M., Nigg, J. T., Petersen, S. E., Dale, A. M., Feldstein-Ewing, S. W., Nagel, B. J., and Dosenbach, N. U. F. 2020 March. <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S1053811919309917">Correction of respiratory artifacts in MRI head motion estimates.</a> <em>Neuroimage, 208</em> , pp. 116400 <a class="reference external" href="https://dx.doi.org/10.1016/j.neuroimage.2019.116400">doi:10.1016/j.neuroimage.2019.116400</a></p>
</aside>
<aside class="footnote brackets" id="footcite-eybe16" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Eyben, F. 2016. Spectral Bands and Filter Shapes. <em>Real-time Speech and Music Classification by Large Audio Feature Space Extraction</em> Cham, Switzerland: Springer International Publishing.</p>
</aside>
<aside class="footnote brackets" id="footcite-bids21" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>BIDS-contributors. 2022. <a class="reference external" href="https://bids-specification.readthedocs.io/en/v1.7.0/99-appendices/09-entities.html">Appendix IX: Entities.</a> <em>The Brain Imaging Data Structure (BIDS) Specification, 1.7.0</em></p>
</aside>
</aside>
</div>
</section>
</section>
<section id="slice-timing-correction">
<h2>Slice Timing Correction<a class="headerlink" href="#slice-timing-correction" title="Permalink to this heading">¶</a></h2>
<p>Most fMRI images are created by combining multiple 2D slices into a single 3D volume. Slices are acquired one after another, either sequentially in ascending or descending order, or in an interleaved manner, such that every other slice is acquired in a first pass, and the remaining slices are acquired in a second pass. The time elapsed between the acquisition of the first and last slice is equivalent to the repetition time (TR) used. Slice timing correction acts to adjust the timecourse of voxels in each slice to account for these differences. This is done by interpolating the data in each slice to match the timing of a reference slice. Slice timing correction is necessary because many statistical models used for fMRI analysis assume that all voxels are measured simultaneously. As such, differences in acquisition time between slices can cause confounds.</p>
<p>You can configure your slice time correction settings through the C-PAC pipeline configuration editor, under the <em>Time Series Options</em> tab in the <em>Functional Preprocessing</em> section. Here you can select whether or not to run Slice Time Correction, as well as which slice acquisition pattern to enter.</p>
<figure class="align-default">
<img alt="../_images/ts_options.png" src="../_images/ts_options.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>First Timepoint - [integer]:</strong> The starting volume of the scan.  If you need to censor the first volumes of a scan to facilitate stable magnetization, you can do so here.</p></li>
<li><p><strong>Last Timepoint - [integer/text]:</strong> The last volume of the timeseries.  If you wish to cut off the timeseries before a specific point, you can do so here.  Otherwise, set this to ‘End’.</p></li>
<li><p><strong>TR - [numerical value]:</strong> The TR for volume acquisitions.  If you wish to have this information read from the NifTI header set this to ‘None’.</p></li>
<li><p><strong>Perform Slice Time Correction - [On, Off, On/Off]:</strong>  Interpolate voxel timeseries so that sampling occurs at the same time.</p></li>
<li><p><strong>Slice Acquisition Pattern - [Use NifTI Header, alt+z, alt+z2, alt-z, alt-z2, seq+z, seq-z]:</strong> The order of slice acquisition for the scans.</p></li>
</ol>
<p>Note that if a scan parameters file was used to construct the participant list, the parameters defined in this file will override the settings used here.</p>
<section id="id6">
<h3>Configuration Without the GUI<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">functional_preproc</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">slice_timing_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Interpolate voxel time courses so they are sampled at the same time points.</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># use specified slice time pattern rather than one in header</span>
<span class="w">    </span><span class="nt">tpattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">    </span><span class="c1"># align each slice to given time offset</span>
<span class="w">    </span><span class="c1"># The default alignment time is the average of the &#39;tpattern&#39; values (either from the dataset header or from the tpattern option).</span>
<span class="w">    </span><span class="nt">tzero</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>
</pre></div>
</div>
</section>
<section id="through-the-data-configuration">
<h3>Through the Data Configuration<a class="headerlink" href="#through-the-data-configuration" title="Permalink to this heading">¶</a></h3>
<p>You can also specify slice timing parameters within the subject list.  If you wish to specify slice timing correction parameters in this way, scan parameters must be supplied to C-PAC in a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file, and the path to this file provided when <a class="reference internal" href="subject_list_config"><span class="doc">setting up a new subject list</span></a>.</p>
<div class="line-block">
<div class="line"><strong>If all subjects within a site have the same acquisition order:</strong></div>
<div class="line">Use the template <code class="file docutils literal notranslate"><span class="pre">scan_parameters.csv</span></code> file available for download <a class="reference external" href="https://raw.github.com/FCP-INDI/C-PAC/main/configs/scan_parameters.csv">here</a>.</div>
<div class="line"><br /></div>
<div class="line"><strong>If subjects within a site have different acquisition orders:</strong></div>
<div class="line">Use the template <code class="file docutils literal notranslate"><span class="pre">scan_parameters_multiscan.csv</span></code> file available for download <a class="reference external" href="https://raw.github.com/FCP-INDI/C-PAC/main/configs/scan_parameters_multiscan.csv">here</a>.</div>
</div>
<p>Slice Timing information should be entered into these files as follows:</p>
<ul>
<li><p><strong>Site</strong> - Site name corresponding to a site-level folder in your directory structure (e.g. <code class="file docutils literal notranslate"><span class="pre">site_1</span></code>).</p></li>
<li><p><strong>Scan</strong> - Only for <code class="file docutils literal notranslate"><span class="pre">scan_parameters_multiscan.csv</span></code>. Scan name corresponding to a scan-level folder in your directory structure (e.g. <code class="file docutils literal notranslate"><span class="pre">anat</span></code>, <code class="file docutils literal notranslate"><span class="pre">rest</span></code>)</p></li>
<li><p><strong>TR</strong> - TR in seconds.</p></li>
<li><p><strong>Reference</strong> - Desired reference slice (usually the middle slice).</p></li>
<li><p><strong>Acquisition</strong> - Acquisition order.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>altplus</strong> - Alternating in the +z direction</p></li>
<li><p><strong>alt+z</strong> - Alternating in the +z direction</p></li>
<li><p><strong>alt+z2</strong> - Alternating, but beginning at slice #1</p></li>
<li><p><strong>altminus</strong> - Alternating in the -z direction</p></li>
<li><p><strong>alt-z</strong> - Alternating in the -z direction</p></li>
<li><p><strong>alt-z2</strong> - Alternating, starting at slice #nz-2 instead of #nz-1</p></li>
<li><p><strong>seqplus</strong> - Sequential in the plus direction</p></li>
<li><p><strong>seqminus</strong> - Sequential in the minus direction</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>FirstTR</strong> - First volume to include in analysis. (Reminder, volumes start at 0)</p></li>
<li><p><strong>LastTR</strong> - Last volume to include in analysis.</p></li>
</ul>
<p>If your data does not conform to one of the 6 acquisition orders in the list above (as would be the case for multiband and multi-echo sequences), you must generate acquisition order files before running slice timing correction. This is done using the AFNI command <code class="docutils literal notranslate"><span class="pre">dicom_hdr</span></code> and specifying the first DICOM file in an image sequence, as well as the name of an output <code class="file docutils literal notranslate"><span class="pre">.txt</span></code> file.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dicom_hdr</span> <span class="o">-</span><span class="n">slice_times</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">dcm</span> <span class="o">&gt;</span> <span class="n">output_name</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>This will output a text file with the name you specified. Each number in this file corresponds to a slice and the time when it was acquired (relative to the beginning of the TR). The following is an example of an acquisition order file for a a multiband fMRI scan with 40 slices and TR=645ms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">0.0</span> <span class="mf">452.5</span> <span class="mf">257.5</span> <span class="mf">65.0</span> <span class="mf">517.5</span> <span class="mf">322.5</span> <span class="mf">130.0</span> <span class="mf">582.5</span> <span class="mf">387.5</span> <span class="mf">195.0</span> <span class="mf">0.0</span> <span class="mf">452.5</span> <span class="mf">257.5</span> <span class="mf">65.0</span> <span class="mf">517.5</span> <span class="mf">322.5</span> <span class="mf">130.0</span> <span class="mf">582.5</span> <span class="mf">387.5</span> <span class="mf">195.0</span> <span class="mf">0.0</span> <span class="mf">452.5</span> <span class="mf">257.5</span> <span class="mf">65.0</span> <span class="mf">517.5</span> <span class="mf">322.5</span> <span class="mf">130.0</span> <span class="mf">582.5</span> <span class="mf">387.5</span> <span class="mf">195.0</span> <span class="mf">0.0</span> <span class="mf">452.5</span> <span class="mf">257.5</span> <span class="mf">65.0</span> <span class="mf">517.5</span> <span class="mf">322.5</span> <span class="mf">130.0</span> <span class="mf">582.5</span> <span class="mf">387.5</span> <span class="mf">195.0</span>
</pre></div>
</div>
<p>The path to the acquisition order file for each scan should be specified in the “Acquisition” column of your <code class="file docutils literal notranslate"><span class="pre">scan_parameters.csv</span></code> or <code class="file docutils literal notranslate"><span class="pre">scan_parameters_multiscan.csv</span></code> file.</p>
<p><strong>Note:</strong> alt+z2 is the order most commonly used on Siemens scanners for interleaved scans with an even number of slices.</p>
<p><strong>Note:</strong> Scan parameter information specified for slice timing correction will override the settings specified in the pipeline configuration YAML.</p>
</section>
</section>
<section id="field-map-based-distortion-correction">
<h2>Field Map-Based Distortion Correction<a class="headerlink" href="#field-map-based-distortion-correction" title="Permalink to this heading">¶</a></h2>
<p>Distortion correction is a method that aims to reduce distortion in EPI (fMRI) images caused by inhomogeneities in the magnetic field (which often stem from differences in tissue across tissue boundaries in the head). C-PAC has the option of including field map-based distortion correction into your pre-processing pipeline, and two methods, <strong>Phase Difference (PhaseDiff)</strong> or <strong>Phase-Encoding Polarity (Blip-up/Blip-down)</strong> to perform distortion correction.</p>
<p>Performing PhaseDiff distortion correction requires the acquisition of a phase difference image and two magnitude images. The “best of the two” magnitude images is chosen, and a final input of one phase difference file and one magnitude file are then used by the pre-processing pipeline.
Phase-Encoding Polarity (commonly known as blip-up/blip-down) employs phase-encoding direction-specific EPI field maps to correct for distortion in the direction of the phase-encoding. It uses AFNI 3dQWarp to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</p>
<p>These files are used to generate the field map during pre-processing, and they can be provided to the C-PAC pipeline through the data configuration (participant list) file. More information on how to set this data configuration file is <a class="reference external" href="http://fcp-indi.github.io/docs/user/subject_list_config.html">available here</a>.</p>
<p>The C-PAC pipeline configuration builder provides options for configuring the Distortion Correction workflow. The field maps are generated within the distortion correction workflow, and the result is subsequently sent to the functional-to-anatomical registration step (FSL FLIRT, and with Boundary-Based Registration if selected and if tissue segmentation is run), where the distortion is “un-warped” during the transform.</p>
<figure class="align-default">
<img alt="../_images/fmap_dist_corr.png" src="../_images/fmap_dist_corr.png" />
</figure>
<ol class="arabic">
<li><p><strong>Distortion correction - [On, Off]:</strong> Perform field map-based distortion correction.</p></li>
<li><p><strong>PhaseDiff - [On, Off]:</strong> Perform field map correction using a single phase difference image, a subtraction of the two phase images from each echo. Default scanner for this method is SIEMENS.</p></li>
<li><p><strong>Blip - [On, Off]:</strong> Uses AFNI 3dQWarp to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</p></li>
<li><p><strong>Skull-strip the magnitude file with - [BET, 3dSkullStrip]:</strong> Since the results of the distortion correction can be strongly affected by the strength of the skull-stripping of the magnitude file, the choice between using FSL’s BET or AFNI’s 3dSkullStrip is left open, as these tools can have varying results depending on the data itself. The choice of tool is only for skull-stripping the magnitude file, and not for the skull-stripping step of the main anatomical pre-processing part of the pipeline.</p></li>
<li><p><strong>BET threshold/AFNI shrink factor - [float]:</strong> The threshold for brain extraction. FSL requires tight skull-stripping, erring on the side of ignoring brain voxels rather than adding noise. However, it might not be required to increase the threshold in all datasets, so it is important to check your dataset before changing the threshold.In FSL-BET, this is referred to as “threshold intensity” and in AFNI’S 3dSkull Strip, it is the -shrink_factor. The default value is 0.5.</p></li>
<li><p><strong>DeltaTE, in ms - [float]:</strong> The time difference between the first magnitude image and the second magnitude image. The default value is 2.46 ms, which is widely used for SIEMENS, but it may differ with different datasets acquired by other MRI scanner brands, so it is important to ascertain this value specific to your data.</p></li>
<li><p><strong>EffectiveEchoSpacing, in s - [float]:</strong> The effective echo spacing is the time between the start of the readout of two successive lines in k-space during the EPI acquisition. This is a value obtained from the functional EPI (NOT the fieldmap).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.3.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.8.5.</span></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Prior to v1.8.5, C-PAC erroneously used the <code class="docutils literal notranslate"><span class="pre">DwellTime</span></code> value from the fieldmap metadata instead of the appropriate <code class="docutils literal notranslate"><span class="pre">EffectiveEchoSpacing</span></code> value from the BOLD metadata.</p>
</div>
</li>
<li><p><strong>EffectiveEchoSpacing to asymmetric ratio - [float]:</strong> This is the ratio between the effective echo spacing, as referenced above, and the asymmetric time.</p></li>
<li><p><strong>Phase encoding direction - [string]:</strong> This is the position of the voxels in the input image, and can have values of x/y/z or -x/-y/-z.</p></li>
</ol>
<section id="id7">
<h3>Configuration Without the GUI<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">functional_preproc</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">distortion_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># using: [&#39;PhaseDiff&#39;, &#39;Blip&#39;, &#39;Blip-FSL-TOPUP&#39;]</span>
<span class="w">    </span><span class="c1">#   PhaseDiff - Perform field map correction using a single phase difference image, a subtraction of the two phase images from each echo. Default scanner for this method is SIEMENS.</span>
<span class="w">    </span><span class="c1">#   Blip - Uses AFNI 3dQWarp to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="c1">#   Blip-FSL-TOPUP - Uses FSL TOPUP to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;PhaseDiff&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;Blip&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># option parameters</span>
<span class="w">    </span><span class="nt">PhaseDiff</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Since the quality of the distortion heavily relies on the skull-stripping step, we provide a choice of method (&#39;AFNI&#39; for AFNI 3dSkullStrip or &#39;BET&#39; for FSL BET).</span>
<span class="w">      </span><span class="c1"># Options: &#39;BET&#39; or &#39;AFNI&#39;</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_option</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;BET&#39;</span>

<span class="w">      </span><span class="c1"># Set the fraction value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.5.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_BET_frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>

<span class="w">      </span><span class="c1"># Set the threshold value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.6.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_AFNI_threshold</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="w">      </span>
<span class="w">    </span><span class="nt">Blip-FSL-TOPUP</span><span class="p">:</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># (approximate) resolution (in mm) of warp basis for the different sub-sampling levels, default 10</span>
<span class="w">      </span><span class="nt">warpres</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># sub-sampling scheme, default 1</span>
<span class="w">      </span><span class="nt">subsamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># FWHM (in mm) of gaussian smoothing kernel, default 8</span>
<span class="w">      </span><span class="nt">fwhm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Max # of non-linear iterations, default 5</span>
<span class="w">      </span><span class="nt">miter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Weight of regularisation, default depending on --ssqlambda and --regmod switches. See user documentation.</span>
<span class="w">      </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), lambda is weighted by current ssq, default 1</span>
<span class="w">      </span><span class="nt">ssqlambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Model for regularisation of warp-field [membrane_energy bending_energy], default bending_energy</span>
<span class="w">      </span><span class="nt">regmod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bending_energy</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Estimate movements if set, default 1 (true)</span>
<span class="w">      </span><span class="nt">estmov</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Minimisation method 0=Levenberg-Marquardt, 1=Scaled Conjugate Gradient, default 0 (LM)</span>
<span class="w">      </span><span class="nt">minmet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Order of spline, 2-&gt;Qadratic spline, 3-&gt;Cubic spline. Default=3</span>
<span class="w">      </span><span class="nt">splineorder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Precision for representing Hessian, double or float. Default double</span>
<span class="w">      </span><span class="nt">numprec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Image interpolation model, linear or spline. Default spline</span>
<span class="w">      </span><span class="nt">interp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spline</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), the images are individually scaled to a common mean, default 0 (false)</span>
<span class="w">      </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), the calculations are done in a different grid, default 1 (true)</span>
<span class="w">      </span><span class="nt">regrid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</section>
</section>
<section id="functional-to-anatomical-registration">
<h2>Functional to Anatomical Registration<a class="headerlink" href="#functional-to-anatomical-registration" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="../_images/func_to_anat_reg.png" src="../_images/func_to_anat_reg.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>Run Functional-to-Anatomical Registration - [On, Off]:</strong> Register the functional timeseries and functional mean images to the T1 anatomical images.</p></li>
<li><p><strong>Using BB Register - [On, Off, On/Off]:</strong> Use Boundary-Based Registration in the functional-to-anatomical registration process. This uses the anatomical segmentation outputs to improve the co-registration of functional images to the anatomical. However, this may not be the best option if your anatomical images feature low contrast, resulting in segmentation which may not be of high quality.</p></li>
<li><p><strong>Boundary Based Registration Scheduler - [path]:</strong> Standard FSL 5.0 Scheduler used for Boundary Based Registration. It is not necessary to change this path unless you intend to use non-standard MNI registration.</p></li>
<li><p><strong>Use as Functional-to-Anatomical Registration Input - [Mean Functional, Selected Functional Volume]:</strong> Choose whether to use the mean of the functional/EPI as the input to functional-to-anatomical registration or one of the volumes from the functional 4D timeseries that you choose.</p></li>
<li><p><strong>Functional Volume to Use as Input (Selected Functional Volume only) - [integer]:</strong> Only for when ‘Use as Functional-to-Anatomical Registration Input’ is set to ‘Selected Functional Volume’. Input the index of which volume from the functional 4D timeseries input file you wish to use as the input for functional-to-anatomical registration.</p></li>
<li><p><strong>Functional Masking - [AFNI, FSL, FSL_AFNI, Anatomical_Refined]:</strong> Choose which tool to be used in functional masking - AFNI (3dAutoMask), FSL (BET), FSL_AFNI (BET+3dAutoMask) or Anatomical_Refined (generate functional mask by registering anatomical mask to functional space). Default is AFNI.</p></li>
</ol>
<section id="id8">
<h3>Configuration Without the GUI<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">registration_workflows</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">functional_registration</span><span class="p">:</span>

<span class="w">    </span><span class="nt">coregistration</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># functional (BOLD/EPI) registration to anatomical (structural/T1)</span>

<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">      </span><span class="nt">func_input_prep</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Choose whether to use functional brain or skull as the input to functional-to-anatomical registration</span>
<span class="w">        </span><span class="nt">reg_with_skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Choose whether to use the mean of the functional/EPI as the input to functional-to-anatomical registration or one of the volumes from the functional 4D timeseries that you choose.</span>
<span class="w">        </span><span class="c1"># input: [&#39;Mean_Functional&#39;, &#39;Selected_Functional_Volume&#39;, &#39;fmriprep_reference&#39;]</span>
<span class="w">        </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;Mean_Functional&#39;</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="nt">Mean Functional</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Run ANTs’ N4 Bias Field Correction on the input BOLD (EPI)</span>
<span class="w">          </span><span class="c1"># this can increase tissue contrast which may improve registration quality in some data</span>
<span class="w">          </span><span class="nt">n4_correct_func</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="w">        </span><span class="nt">Selected Functional Volume</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Only for when &#39;Use as Functional-to-Anatomical Registration Input&#39; is set to &#39;Selected Functional Volume&#39;.</span>
<span class="w">          </span><span class="c1">#Input the index of which volume from the functional 4D timeseries input file you wish to use as the input for functional-to-anatomical registration.</span>
<span class="w">          </span><span class="nt">func_reg_input_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="nt">boundary_based_registration</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># this is a fork point</span>
<span class="w">        </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="c1"># Standard FSL 5.0 Scheduler used for Boundary Based Registration.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use non-standard MNI registration.</span>
<span class="w">        </span><span class="nt">bbr_schedule</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/etc/flirtsch/bbr.sch</span>

<span class="w">        </span><span class="c1"># reference for boundary based registration</span>
<span class="w">        </span><span class="c1"># options: &#39;whole-head&#39; or &#39;brain&#39;</span>
<span class="w">        </span><span class="nt">reference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whole-head</span>

<span class="w">        </span><span class="c1"># choose which FAST map to generate BBR WM mask</span>
<span class="w">        </span><span class="c1"># options: &#39;probability_map&#39;, &#39;partial_volume_map&#39;</span>
<span class="w">        </span><span class="nt">bbr_wm_map</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;probability_map&#39;</span>

<span class="w">        </span><span class="c1"># optional FAST arguments to generate BBR WM mask</span>
<span class="w">        </span><span class="nt">bbr_wm_mask_args</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;-thr</span><span class="nv"> </span><span class="s">0.5</span><span class="nv"> </span><span class="s">-bin&#39;</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">functional_preproc</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">func_masking</span><span class="p">:</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">    </span><span class="c1"># using: [&#39;AFNI&#39;, &#39;FSL&#39;, &#39;FSL_AFNI&#39;, &#39;Anatomical_Refined&#39;, &#39;Anatomical_Based&#39;, &#39;Anatomical_Resampled&#39;, &#39;CCS_Anatomical_Refined&#39;]</span>

<span class="w">    </span><span class="c1"># FSL_AFNI: fMRIPrep-style BOLD mask. Ref: https://github.com/nipreps/niworkflows/blob/a221f612/niworkflows/func/util.py#L246-L514</span>
<span class="w">    </span><span class="c1"># Anatomical_Refined: 1. binarize anat mask, in case it is not a binary mask. 2. fill holes of anat mask 3. init_bold_mask : input raw func → dilate init func brain mask 4. refined_bold_mask : input motion corrected func → dilate anatomical mask 5. get final func mask</span>
<span class="w">    </span><span class="c1"># Anatomical_Based: Generate the BOLD mask by basing it off of the anatomical brain mask. Adapted from DCAN Lab&#39;s BOLD mask method from the ABCD pipeline.</span>
<span class="w">    </span><span class="c1"># Anatomical_Resampled: Resample anatomical brain mask in standard space to get BOLD brain mask in standard space. Adapted from DCAN Lab&#39;s BOLD mask method from the ABCD pipeline. (&quot;Create fMRI resolution standard space files for T1w image, wmparc, and brain mask […] don&#39;t use FLIRT to do spline interpolation with -applyisoxfm for the 2mm and 1mm cases because it doesn&#39;t know the peculiarities of the MNI template FOVs&quot;)</span>
<span class="w">    </span><span class="c1"># CCS_Anatomical_Refined: Generate the BOLD mask by basing it off of the anatomical brain. Adapted from the BOLD mask method from the CCS pipeline.</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;AFNI&#39;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="configuring-fsl-bet-options">
<h3>Configuring FSL BET options:<a class="headerlink" href="#configuring-fsl-bet-options" title="Permalink to this heading">¶</a></h3>
<p><strong>Note:</strong> These options are pre-set for FSL BET’s default values. These do not need to be modified unless you are looking to optimize the results of skull-stripping for your particular dataset.</p>
<figure class="align-default">
<img alt="../_images/func_masking_fsl.png" src="../_images/func_masking_fsl.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>Threshold - [0.3]:</strong> Set the threshold value controlling the brain vs non-brain voxels. Default is 0.3</p></li>
<li><p><strong>Radius - [0]:</strong> Integer value of head radius. Default is 0.</p></li>
<li><p><strong>Vertical gradient - [0]:</strong> Vertical gradient un fractional intensity threshold. Within the range of (-1,1).</p></li>
<li><p><strong>Func_mean - [Off,On]:</strong> Apply to 4D FMRI data, if bold_bet_functional_mean_boolean : Off. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces. Default is Off.</p></li>
<li><p><strong>Apply Threshold - [Off,On]:</strong> Apply thresholding to segmented brain image and mask. Default is Off.</p></li>
<li><p><strong>Mask - [Off, On]:</strong> Mask created along with skull stripping. Default option is Off.</p></li>
<li><p><strong>Mesh - [Off, On]:</strong> Mesh created along with skull stripping. Default is Off.</p></li>
<li><p><strong>Skull - [Off,On]:</strong> Create a Skull Image. Default is Off.</p></li>
<li><p><strong>Surfaces - [Off, On]:</strong> Get additional skull and scalp surfaces by running bet2 and betsurf. This is mutually exclusive with reduce bias, robust, padding, remove_eyes.</p></li>
<li><p><strong>Surfaces Outline - [Off, On]:</strong> Create a surface outline image, Default is Off.</p></li>
<li><p><strong>Padding - [Off, On]:</strong> Add padding to the end of the image, improving BET. Mutually exclusive functional, reduce_bias, robust, padding, remove_eyes, surfaces.</p></li>
<li><p><strong>Reduce bias - [Off, On]:</strong> Reduce bias and cleanup neck. Mutually exclusive with functional, reduce_bias, robust, padding, remove_eyes, surfaces.</p></li>
<li><p><strong>Remove eyes - [Off,On]:</strong> Eyes and optic nerve cleanup. Mutually exclusive with functional, reduce_bias, robust, padding, remove_eyes, surfaces.</p></li>
<li><p><strong>Robust brain center - [Off, On]:</strong> Robust brain center estimation. Mutually exclusive with functional, reduce_bias, robust, padding, remove_eyes, surfaces.</p></li>
</ol>
</section>
<section id="id9">
<h3>Configuration Without the GUI<a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">functional_preproc</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">FSL-BET</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Switch &quot;On&quot; to crop out neck regions before generating the mask (default: Off).    </span>
<span class="w">      </span><span class="nt">Robustfov </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Set the threshold value controling the brain vs non-brain voxels, default is 0.5</span>
<span class="w">      </span><span class="nt">frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>

<span class="w">      </span><span class="c1"># Mesh created along with skull stripping</span>
<span class="w">      </span><span class="nt">mesh_boolean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Create a surface outline image</span>
<span class="w">      </span><span class="nt">outline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Add padding to the end of the image, improving BET.Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">padding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Integer value of head radius</span>
<span class="w">      </span><span class="nt">radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="c1"># Reduce bias and cleanup neck. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">reduce_bias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Eyes and optic nerve cleanup. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">remove_eyes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Robust brain center estimation. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">robust</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># Create a skull image</span>
<span class="w">      </span><span class="nt">skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Gets additional skull and scalp surfaces by running bet2 and betsurf. This is mutually exclusive with reduce_bias, robust, padding, remove_eyes</span>
<span class="w">      </span><span class="nt">surfaces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Apply thresholding to segmented brain image and mask</span>
<span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Vertical gradient in fractional intensity threshold (-1,1)</span>
<span class="w">      </span><span class="nt">vertical_gradient </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>

<span class="w">    </span><span class="nt">UNet</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># UNet model</span>
<span class="w">      </span><span class="nt">unet_model </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://fcp-indi/resources/cpac/resources/Site-All-T-epoch_36.model</span>

<span class="w">    </span><span class="nt">niworkflows-ants</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Template to be used during niworkflows-ants.</span>
<span class="w">      </span><span class="c1"># It is not necessary to change this path unless you intend to use a non-standard template.</span>

<span class="w">      </span><span class="c1"># niworkflows-ants Brain extraction template</span>
<span class="w">      </span><span class="nt">template_path </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ants_template/oasis/T_template0.nii.gz</span>

<span class="w">      </span><span class="c1"># niworkflows-ants probability mask</span>
<span class="w">      </span><span class="nt">mask_path </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ants_template/oasis/T_template0_BrainCerebellumProbabilityMask.nii.gz</span>

<span class="w">      </span><span class="c1"># niworkflows-ants registration mask (can be optional)</span>
<span class="w">      </span><span class="nt">regmask_path </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ants_template/oasis/T_template0_BrainCerebellumRegistrationMask.nii.gz</span>

<span class="w">    </span><span class="nt">FreeSurfer-BET</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Template to be used for FreeSurfer-BET brain extraction in CCS-options pipeline</span>
<span class="w">      </span><span class="nt">T1w_brain_template_mask_ccs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ccs_template/MNI152_T1_1mm_first_brain_mask.nii.gz</span>


<span class="nt">segmentation</span><span class="p">:</span>

<span class="w">  </span><span class="c1"># Automatically segment anatomical images into white matter, gray matter,</span>
<span class="w">  </span><span class="c1"># and CSF based on prior probability maps.</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">tissue_segmentation</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># using: [&#39;FSL-FAST&#39;, &#39;Template_Based&#39;, &#39;ANTs_Prior_Based&#39;, &#39;FreeSurfer&#39;]</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;FSL-FAST&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># option parameters</span>
<span class="w">    </span><span class="nt">FSL-FAST</span><span class="p">:</span>

<span class="w">      </span><span class="nt">thresholding</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># thresholding of the tissue segmentation probability maps</span>
<span class="w">        </span><span class="c1"># options: &#39;Auto&#39;, &#39;Custom&#39;</span>
<span class="w">        </span><span class="nt">use</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Auto&#39;</span>

<span class="w">        </span><span class="nt">Custom</span><span class="p">:</span>
<span class="w">          </span><span class="c1"># Set the threshold value for the segmentation probability masks (CSF, White Matter, and Gray Matter)</span>
<span class="w">          </span><span class="c1"># The values remaining will become the binary tissue masks.</span>
<span class="w">          </span><span class="c1"># A good starting point is 0.95.</span>

<span class="w">          </span><span class="c1"># CSF (cerebrospinal fluid) threshold.</span>
<span class="w">          </span><span class="nt">CSF_threshold_value </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>

<span class="w">          </span><span class="c1"># White matter threshold.</span>
<span class="w">          </span><span class="nt">WM_threshold_value </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>

<span class="w">          </span><span class="c1"># Gray matter threshold.</span>
<span class="w">          </span><span class="nt">GM_threshold_value </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>

<span class="w">      </span><span class="nt">use_priors</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Use template-space tissue priors to refine the binary tissue masks generated by segmentation.</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">        </span><span class="c1"># Full path to a directory containing binarized prior probability maps.</span>
<span class="w">        </span><span class="c1"># These maps are included as part of the &#39;Image Resource Files&#39; package available on the Install page of the User Guide.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use non-standard priors.</span>
<span class="w">        </span><span class="nt">priors_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/tissuepriors/2mm</span>

<span class="w">        </span><span class="c1"># Full path to a binarized White Matter prior probability map.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use non-standard priors.</span>
<span class="w">        </span><span class="nt">WM_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$priors_path/avg152T1_white_bin.nii.gz</span>

<span class="w">        </span><span class="c1"># Full path to a binarized Gray Matter prior probability map.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use non-standard priors.</span>
<span class="w">        </span><span class="nt">GM_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$priors_path/avg152T1_gray_bin.nii.gz</span>

<span class="w">        </span><span class="c1"># Full path to a binarized CSF prior probability map.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use non-standard priors.</span>
<span class="w">        </span><span class="nt">CSF_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$priors_path/avg152T1_csf_bin.nii.gz</span>

<span class="w">    </span><span class="nt">Template_Based</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># These masks should be in the same space of your registration template, e.g. if</span>
<span class="w">      </span><span class="c1"># you choose &#39;EPI Template&#39; , below tissue masks should also be EPI template tissue masks.</span>
<span class="w">      </span><span class="c1">#</span>
<span class="w">      </span><span class="c1"># Options: [&#39;T1_Template&#39;, &#39;EPI_Template&#39;]</span>
<span class="w">      </span><span class="nt">template_for_segmentation</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;T1_Template&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># These masks are included as part of the &#39;Image Resource Files&#39; package available</span>
<span class="w">      </span><span class="c1"># on the Install page of the User Guide.</span>

<span class="w">      </span><span class="c1"># Full path to a binarized White Matter mask.</span>
<span class="w">      </span><span class="nt">WHITE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/tissuepriors/2mm/avg152T1_white_bin.nii.gz</span>

<span class="w">      </span><span class="c1"># Full path to a binarized Gray Matter mask.</span>
<span class="w">      </span><span class="nt">GRAY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/tissuepriors/2mm/avg152T1_gray_bin.nii.gz</span>

<span class="w">      </span><span class="c1"># Full path to a binarized CSF mask.</span>
<span class="w">      </span><span class="nt">CSF</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/tissuepriors/2mm/avg152T1_csf_bin.nii.gz</span>

<span class="w">    </span><span class="nt">ANTs_Prior_Based</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Generate white matter, gray matter, CSF masks based on antsJointLabelFusion</span>
<span class="w">      </span><span class="c1"># ANTs Prior-based Segmentation workflow that has shown optimal results for non-human primate data.</span>

<span class="w">      </span><span class="c1"># The atlas image assumed to be used in ANTs Prior-based Segmentation.</span>
<span class="w">      </span><span class="nt">template_brain_list </span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/cpac_templates/MacaqueYerkes19_T1w_0.5mm_desc-JLC_T1w_brain.nii.gz</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/cpac_templates/J_Macaque_11mo_atlas_nACQ_194x252x160space_0.5mm_desc-JLC_T1w_brain.nii.gz</span>

<span class="w">      </span><span class="c1"># The atlas segmentation images.</span>
<span class="w">      </span><span class="c1"># For performing ANTs Prior-based segmentation method</span>
<span class="w">      </span><span class="c1"># the number of specified segmentations should be identical to the number of atlas brain image sets.</span>
<span class="w">      </span><span class="c1"># eg.</span>
<span class="w">      </span><span class="c1"># ANTs_prior_seg_template_brain_list :</span>
<span class="w">      </span><span class="c1">#   - atlas1.nii.gz</span>
<span class="w">      </span><span class="c1">#   - atlas2.nii.gz</span>
<span class="w">      </span><span class="c1"># ANTs_prior_seg_template_segmentation_list:</span>
<span class="w">      </span><span class="c1">#   - segmentation1.nii.gz</span>
<span class="w">      </span><span class="c1">#   - segmentation1.nii.gz</span>
<span class="w">      </span><span class="nt">template_segmentation_list</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/cpac_templates/MacaqueYerkes19_T1w_0.5mm_desc-JLC_Segmentation.nii.gz</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/cpac_templates/J_Macaque_11mo_atlas_nACQ_194x252x160space_0.5mm_desc-JLC_Segmentation.nii.gz</span>

<span class="w">      </span><span class="c1"># Label values corresponding to CSF/GM/WM in atlas file</span>
<span class="w">      </span><span class="c1"># It is not necessary to change this values unless your CSF/GM/WM label values are different from Freesurfer Color Lookup Table.</span>
<span class="w">      </span><span class="c1"># https://surfer.nmr.mgh.harvard.edu/fswiki/FsTutorial/AnatomicalROI/FreeSurferColorLUT</span>

<span class="w">      </span><span class="c1"># Label values corresponding to CSF in multiatlas file</span>
<span class="w">      </span><span class="nt">CSF_label </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">24</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Label values corresponding to Gray Matter in multiatlas file</span>
<span class="w">      </span><span class="nt">GM_label </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">42</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Label values corresponding to White Matter in multiatlas file</span>
<span class="w">      </span><span class="nt">WM_label </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">41</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">FreeSurfer</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Use mri_binarize --erode option to erode segmentation masks</span>
<span class="w">      </span><span class="nt">erode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="c1"># Label values corresponding to CSF in FreeSurfer aseg segmentation file</span>
<span class="w">      </span><span class="nt">CSF_label </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">24</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Label values corresponding to Gray Matter in FreeSurfer aseg segmentation file</span>
<span class="w">      </span><span class="nt">GM_label </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">42</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Label values corresponding to White Matter in FreeSurfer aseg segmentation file</span>
<span class="w">      </span><span class="nt">WM_label </span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">41</span><span class="p p-Indicator">]</span>


<span class="nt">registration_workflows</span><span class="p">:</span>

<span class="w">  </span><span class="nt">anatomical_registration</span><span class="p">:</span>

<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="c1"># The resolution to which anatomical images should be transformed during registration.</span>
<span class="w">    </span><span class="c1"># This is the resolution at which processed anatomical files will be output.</span>
<span class="w">    </span><span class="nt">resolution_for_anat</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2mm</span>

<span class="w">    </span><span class="c1"># Template to be used during registration.</span>
<span class="w">    </span><span class="c1"># It is not necessary to change this path unless you intend to use a non-standard template.</span>
<span class="w">    </span><span class="nt">T1w_brain_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain.nii.gz</span>

<span class="w">    </span><span class="c1"># Template to be used during registration.</span>
<span class="w">    </span><span class="c1"># It is not necessary to change this path unless you intend to use a non-standard template.</span>
<span class="w">    </span><span class="nt">T1w_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}.nii.gz</span>

<span class="w">    </span><span class="c1"># Template to be used during registration.</span>
<span class="w">    </span><span class="c1"># It is not necessary to change this path unless you intend to use a non-standard template.</span>
<span class="w">    </span><span class="nt">T1w_brain_template_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain_mask.nii.gz</span>

<span class="w">    </span><span class="c1"># Register skull-on anatomical image to a template.</span>
<span class="w">    </span><span class="nt">reg_with_skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">    </span><span class="nt">registration</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># using: [&#39;ANTS&#39;, &#39;FSL&#39;, &#39;FSL-linear&#39;]</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1">#   selecting both [&#39;ANTS&#39;, &#39;FSL&#39;] will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;ANTS&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># option parameters</span>
<span class="w">      </span><span class="nt">ANTs</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># If a lesion mask is available for a T1w image, use it to improve the ANTs&#39; registration</span>
<span class="w">        </span><span class="c1"># ANTS registration only.</span>
<span class="w">        </span><span class="nt">use_lesion_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="w">        </span><span class="c1"># ANTs parameters for T1-template-based registration</span>
<span class="w">        </span><span class="nt">T1_registration</span><span class="p">:</span>

<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">collapse-output-transforms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dimensionality</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">initial-moving-transform </span><span class="p">:</span>
<span class="w">             </span><span class="nt">initializationFeature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">transforms</span><span class="p">:</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Rigid</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">metric </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MI</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">numberOfBins </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">                   </span><span class="nt">samplingStrategy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regular</span>
<span class="w">                   </span><span class="nt">samplingPercentage </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000x500x250x100</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-08</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Affine</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">metric </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MI</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">numberOfBins </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">                   </span><span class="nt">samplingStrategy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regular</span>
<span class="w">                   </span><span class="nt">samplingPercentage </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000x500x250x100</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-08</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">SyN</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">updateFieldVarianceInVoxelSpace </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">                 </span><span class="nt">totalFieldVarianceInVoxelSpace </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">                 </span><span class="nt">metric</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CC</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">radius </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100x100x70x20</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-09</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">                 </span><span class="nt">winsorize-image-intensities </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">lowerQuantile </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">                   </span><span class="nt">upperQuantile </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.99</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed anatomical images.</span>
<span class="w">        </span><span class="c1"># Possible values: Linear, BSpline, LanczosWindowedSinc</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LanczosWindowedSinc</span>

<span class="w">      </span><span class="nt">FSL-FNIRT</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Configuration file to be used by FSL to set FNIRT parameters.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use custom FNIRT parameters or a non-standard template.</span>
<span class="w">        </span><span class="nt">fnirt_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">T1_2_MNI152_2mm</span>

<span class="w">        </span><span class="c1"># The resolution to which anatomical images should be transformed during registration.</span>
<span class="w">        </span><span class="c1"># This is the resolution at which processed anatomical files will be output. </span>
<span class="w">        </span><span class="c1"># specifically for monkey pipeline</span>
<span class="w">        </span><span class="nt">ref_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2mm</span>

<span class="w">        </span><span class="c1"># Reference mask for FSL registration.</span>
<span class="w">        </span><span class="nt">ref_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain_mask_dil.nii.gz</span>
<span class="w">        </span>
<span class="w">        </span><span class="c1"># Template to be used during registration.</span>
<span class="w">        </span><span class="c1"># It is for monkey pipeline specifically. </span>
<span class="w">        </span><span class="nt">FNIRT_T1w_brain_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">        </span><span class="c1"># Template to be used during registration.</span>
<span class="w">        </span><span class="c1"># It is for monkey pipeline specifically. </span>
<span class="w">        </span><span class="nt">FNIRT_T1w_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>
<span class="w">        </span>
<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed anatomical images.</span>
<span class="w">        </span><span class="c1"># Possible values: trilinear, sinc, spline</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sinc</span>

<span class="w">        </span><span class="c1"># Identity matrix used during FSL-based resampling of anatomical-space data throughout the pipeline.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use a different template.</span>
<span class="w">        </span><span class="nt">identity_matrix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/etc/flirtsch/ident.mat</span>

<span class="w">        </span><span class="c1"># Reference mask with 2mm resolution to be used during FNIRT-based brain extraction in ABCD-options pipeline.</span>
<span class="w">        </span><span class="nt">ref_mask_res-2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_2mm_brain_mask_dil.nii.gz</span>

<span class="w">        </span><span class="c1"># Template with 2mm resolution to be used during FNIRT-based brain extraction in ABCD-options pipeline.</span>
<span class="w">        </span><span class="nt">T1w_template_res-2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_2mm.nii.gz</span>

<span class="w">    </span><span class="nt">overwrite_transform</span><span class="p">:</span>

<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Choose the tool to overwrite transform, currently only support &#39;FSL&#39; to overwrite &#39;ANTs&#39; transforms in ABCD-options pipeline.</span>
<span class="w">      </span><span class="c1"># using: &#39;FSL&#39;</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FSL</span>

<span class="w">  </span><span class="nt">functional_registration</span><span class="p">:</span>

<span class="w">    </span><span class="nt">coregistration</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># functional (BOLD/EPI) registration to anatomical (structural/T1)</span>

<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># reference: &#39;brain&#39; or &#39;restore-brain&#39;</span>
<span class="w">      </span><span class="c1"># In ABCD-options pipeline, &#39;restore-brain&#39; is used as coregistration reference</span>
<span class="w">      </span><span class="nt">reference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">brain</span>

<span class="w">      </span><span class="c1"># Choose FSL or ABCD as coregistration method</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FSL</span>

<span class="w">      </span><span class="c1"># Choose brain or whole-head as coregistration input</span>
<span class="w">      </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">brain</span>

<span class="w">      </span><span class="c1"># Choose coregistration interpolation</span>
<span class="w">      </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trilinear</span>

<span class="w">      </span><span class="c1"># Choose coregistration cost function</span>
<span class="w">      </span><span class="nt">cost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">corratio</span>

<span class="w">      </span><span class="c1"># Choose coregistration degree of freedom</span>
<span class="w">      </span><span class="nt">dof</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>

<span class="w">      </span><span class="c1"># Extra arguments for FSL flirt</span>
<span class="w">      </span><span class="nt">arguments</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">      </span><span class="nt">func_input_prep</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Choose whether to use functional brain or skull as the input to functional-to-anatomical registration</span>
<span class="w">        </span><span class="nt">reg_with_skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Choose whether to use the mean of the functional/EPI as the input to functional-to-anatomical registration or one of the volumes from the functional 4D timeseries that you choose.</span>
<span class="w">        </span><span class="c1"># input: [&#39;Mean_Functional&#39;, &#39;Selected_Functional_Volume&#39;, &#39;fmriprep_reference&#39;]</span>
<span class="w">        </span><span class="nt">input</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;Mean_Functional&#39;</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="nt">Mean Functional</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Run ANTs’ N4 Bias Field Correction on the input BOLD (EPI)</span>
<span class="w">          </span><span class="c1"># this can increase tissue contrast which may improve registration quality in some data</span>
<span class="w">          </span><span class="nt">n4_correct_func</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="w">        </span><span class="nt">Selected Functional Volume</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Only for when &#39;Use as Functional-to-Anatomical Registration Input&#39; is set to &#39;Selected Functional Volume&#39;.</span>
<span class="w">          </span><span class="c1">#Input the index of which volume from the functional 4D timeseries input file you wish to use as the input for functional-to-anatomical registration.</span>
<span class="w">          </span><span class="nt">func_reg_input_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="nt">boundary_based_registration</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># this is a fork point</span>
<span class="w">        </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="c1"># Standard FSL 5.0 Scheduler used for Boundary Based Registration.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use non-standard MNI registration.</span>
<span class="w">        </span><span class="nt">bbr_schedule</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/etc/flirtsch/bbr.sch</span>

<span class="w">        </span><span class="c1"># reference for boundary based registration</span>
<span class="w">        </span><span class="c1"># options: &#39;whole-head&#39; or &#39;brain&#39;</span>
<span class="w">        </span><span class="nt">reference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">whole-head</span>

<span class="w">        </span><span class="c1"># choose which FAST map to generate BBR WM mask</span>
<span class="w">        </span><span class="c1"># options: &#39;probability_map&#39;, &#39;partial_volume_map&#39;</span>
<span class="w">        </span><span class="nt">bbr_wm_map</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;probability_map&#39;</span>

<span class="w">        </span><span class="c1"># optional FAST arguments to generate BBR WM mask</span>
<span class="w">        </span><span class="nt">bbr_wm_mask_args</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;-thr</span><span class="nv"> </span><span class="s">0.5</span><span class="nv"> </span><span class="s">-bin&#39;</span>

<span class="w">    </span><span class="nt">EPI_registration</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># directly register the mean functional to an EPI template</span>
<span class="w">      </span><span class="c1">#   instead of applying the anatomical T1-to-template transform to the functional data that has been</span>
<span class="w">      </span><span class="c1">#   coregistered to anatomical/T1 space</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># using: [&#39;ANTS&#39;, &#39;FSL&#39;, &#39;FSL-linear&#39;]</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1"># ex. selecting both [&#39;ANTS&#39;, &#39;FSL&#39;] will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;ANTS&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># EPI template for direct functional-to-template registration</span>
<span class="w">      </span><span class="c1"># (bypassing coregistration and the anatomical-to-template transforms)</span>
<span class="w">      </span><span class="nt">EPI_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://fcp-indi/resources/cpac/resources/epi_hbn.nii.gz</span>

<span class="w">      </span><span class="c1"># EPI template mask.</span>
<span class="w">      </span><span class="nt">EPI_template_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">      </span><span class="nt">ANTs</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># EPI registration configuration - synonymous with T1_registration</span>
<span class="w">        </span><span class="c1"># parameters under anatomical registration above</span>
<span class="w">        </span><span class="nt">parameters</span><span class="p">:</span>

<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">collapse-output-transforms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dimensionality</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">initial-moving-transform </span><span class="p">:</span>
<span class="w">             </span><span class="nt">initializationFeature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">transforms</span><span class="p">:</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Rigid</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">metric </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MI</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">numberOfBins </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">                   </span><span class="nt">samplingStrategy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regular</span>
<span class="w">                   </span><span class="nt">samplingPercentage </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000x500x250x100</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-08</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Affine</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">metric </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MI</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">numberOfBins </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">                   </span><span class="nt">samplingStrategy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regular</span>
<span class="w">                   </span><span class="nt">samplingPercentage </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000x500x250x100</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-08</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">SyN</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">updateFieldVarianceInVoxelSpace </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">                 </span><span class="nt">totalFieldVarianceInVoxelSpace </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">                 </span><span class="nt">metric</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CC</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">radius </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100x100x70x20</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-09</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">                 </span><span class="nt">winsorize-image-intensities </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">lowerQuantile </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">                   </span><span class="nt">upperQuantile </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.99</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed EPI images.</span>
<span class="w">        </span><span class="c1"># Possible values: Linear, BSpline, LanczosWindowedSinc</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LanczosWindowedSinc</span>

<span class="w">      </span><span class="nt">FSL-FNIRT</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Configuration file to be used by FSL to set FNIRT parameters.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use custom FNIRT parameters or a non-standard template.</span>
<span class="w">        </span><span class="nt">fnirt_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">T1_2_MNI152_2mm</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed EPI images.</span>
<span class="w">        </span><span class="c1"># Possible values: trilinear, sinc, spline</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sinc</span>

<span class="w">        </span><span class="c1"># Identity matrix used during FSL-based resampling of BOLD-space data throughout the pipeline.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use a different template.</span>
<span class="w">        </span><span class="nt">identity_matrix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/etc/flirtsch/ident.mat</span>

<span class="w">    </span><span class="nt">func_registration_to_template</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># these options modify the application (to the functional data), not the calculation, of the</span>
<span class="w">      </span><span class="c1"># T1-to-template and EPI-to-template transforms calculated earlier during registration</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># apply the functional-to-template (T1 template) registration transform to the functional data</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># apply the functional-to-template (EPI template) registration transform to the functional data</span>
<span class="w">      </span><span class="nt">run_EPI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="nt">output_resolution</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># The resolution (in mm) to which the preprocessed, registered functional timeseries outputs are written into.</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   selecting a 1 mm or 2 mm resolution might substantially increase your RAM needs- these resolutions should be selected with caution.</span>
<span class="w">        </span><span class="c1">#   for most cases, 3 mm or 4 mm resolutions are suggested.</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   this also includes the single-volume 3D preprocessed functional data,</span>
<span class="w">        </span><span class="c1">#   such as the mean functional (mean EPI) in template space</span>
<span class="w">        </span><span class="nt">func_preproc_outputs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3mm</span>

<span class="w">        </span><span class="c1"># The resolution (in mm) to which the registered derivative outputs are written into.</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   this is for the single-volume functional-space outputs (i.e. derivatives)</span>
<span class="w">        </span><span class="c1">#   thus, a higher resolution may not result in a large increase in RAM needs as above</span>
<span class="w">        </span><span class="nt">func_derivative_outputs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3mm</span>

<span class="w">      </span><span class="nt">target_template</span><span class="p">:</span><span class="w">      </span>
<span class="w">        </span><span class="c1"># choose which template space to transform derivatives towards</span>
<span class="w">        </span><span class="c1"># using: [&#39;T1_template&#39;, &#39;EPI_template&#39;]</span>
<span class="w">        </span><span class="c1"># this is a fork point</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   this will determine which registration transform to use to warp the functional</span>
<span class="w">        </span><span class="c1">#   outputs and derivatives to template space</span>
<span class="w">        </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;T1_template&#39;</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="nt">T1_template</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Standard Skull Stripped Template. Used as a reference image for functional registration.</span>
<span class="w">          </span><span class="c1"># This can be different than the template used as the reference/fixed for T1-to-template registration.</span>
<span class="w">          </span><span class="nt">T1w_brain_template_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${func_resolution}_brain.nii.gz</span>

<span class="w">          </span><span class="c1"># Standard Anatomical Brain Image with Skull.</span>
<span class="w">          </span><span class="c1"># This can be different than the template used as the reference/fixed for T1-to-template registration.</span>
<span class="w">          </span><span class="nt">T1w_template_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${func_resolution}.nii.gz</span>

<span class="w">          </span><span class="c1"># Template to be used during registration.</span>
<span class="w">          </span><span class="c1"># It is not necessary to change this path unless you intend to use a non-standard template.</span>
<span class="w">          </span><span class="nt">T1w_brain_template_mask_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${func_resolution}_brain_mask.nii.gz</span>

<span class="w">          </span><span class="c1"># a standard template for resampling if using float resolution</span>
<span class="w">          </span><span class="nt">T1w_template_for_resample</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_1mm_brain.nii.gz</span>

<span class="w">        </span><span class="nt">EPI_template</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># EPI template for direct functional-to-template registration</span>
<span class="w">          </span><span class="c1"># (bypassing coregistration and the anatomical-to-template transforms)</span>
<span class="w">          </span><span class="nt">EPI_template_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://fcp-indi/resources/cpac/resources/epi_hbn.nii.gz</span>

<span class="w">          </span><span class="c1"># EPI template mask.</span>
<span class="w">          </span><span class="nt">EPI_template_mask_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">          </span><span class="c1"># a standard template for resampling if using float resolution</span>
<span class="w">          </span><span class="nt">EPI_template_for_resample</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_1mm_brain.nii.gz</span>

<span class="w">      </span><span class="nt">ANTs_pipelines</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed functional images.</span>
<span class="w">        </span><span class="c1"># Possible values: Linear, BSpline, LanczosWindowedSinc</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LanczosWindowedSinc</span>

<span class="w">      </span><span class="nt">FNIRT_pipelines</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed functional images.</span>
<span class="w">        </span><span class="c1"># Possible values: trilinear, sinc, spline</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sinc</span>

<span class="w">        </span><span class="c1"># Identity matrix used during FSL-based resampling of functional-space data throughout the pipeline.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use a different template.</span>
<span class="w">        </span><span class="nt">identity_matrix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/etc/flirtsch/ident.mat</span>

<span class="w">      </span><span class="nt">apply_transform</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># options: &#39;default&#39;, &#39;abcd&#39;, &#39;single_step_resampling_from_stc&#39;, &#39;dcan_nhp&#39;</span>
<span class="w">        </span><span class="c1"># &#39;default&#39;: apply func-to-anat and anat-to-template transforms on motion corrected functional image.</span>
<span class="w">        </span><span class="c1"># &#39;abcd&#39;: apply motion correction, func-to-anat and anat-to-template transforms on each of raw functional volume using FSL applywarp based on ABCD-HCP pipeline.</span>
<span class="w">        </span><span class="c1"># &#39;single_step_resampling_from_stc&#39;: apply motion correction, func-to-anat and anat-to-template transforms on each of slice-time-corrected functional volume using ANTs antsApplyTransform based on fMRIPrep pipeline.</span>
<span class="w">        </span><span class="c1">#   - if &#39;single_step_resampling_from_stc&#39;, &#39;template&#39; is the only valid option for ``nuisance_corrections: 2-nuisance_regression: space``</span>
<span class="w">        </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;default&#39;</span>


<span class="nt">functional_preproc</span><span class="p">:</span>

<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">update_header</span><span class="p">:</span><span class="w"> </span>

<span class="w">    </span><span class="c1"># Convert raw data from LPI to RPI</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">truncation</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># First timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is 0 (beginning of timeseries).</span>
<span class="w">    </span><span class="c1"># First timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">start_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># Last timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is None or End (end of timeseries).</span>
<span class="w">    </span><span class="c1"># Last timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">stop_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">scaling</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Scale functional raw data, usually used in rodent pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">    </span><span class="c1"># Scale the size of the dataset voxels by the factor.</span>
<span class="w">    </span><span class="nt">scaling_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">  </span><span class="nt">despiking</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Run AFNI 3dDespike</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">slice_timing_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Interpolate voxel time courses so they are sampled at the same time points.</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># use specified slice time pattern rather than one in header</span>
<span class="w">    </span><span class="nt">tpattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">    </span><span class="c1"># align each slice to given time offset</span>
<span class="w">    </span><span class="c1"># The default alignment time is the average of the &#39;tpattern&#39; values (either from the dataset header or from the tpattern option).</span>
<span class="w">    </span><span class="nt">tzero</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">motion_estimates_and_correction</span><span class="p">:</span>
<span class="w">  </span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_estimates</span><span class="p">:</span><span class="w"> </span>

<span class="w">      </span><span class="c1"># calculate motion statistics BEFORE slice-timing correction</span>
<span class="w">      </span><span class="nt">calculate_motion_first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># calculate motion statistics AFTER motion correction</span>
<span class="w">      </span><span class="nt">calculate_motion_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_correction</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># using: [&#39;3dvolreg&#39;, &#39;mcflirt&#39;]</span>
<span class="w">      </span><span class="c1"># Forking is currently broken for this option.</span>
<span class="w">      </span><span class="c1"># Please use separate configs if you want to use each of 3dvolreg and mcflirt.</span>
<span class="w">      </span><span class="c1"># Follow https://github.com/FCP-INDI/C-PAC/issues/1935 to see when this issue is resolved.</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3dvolreg&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># option parameters</span>
<span class="w">      </span><span class="nt">AFNI-3dvolreg</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># This option is useful when aligning high-resolution datasets that may need more alignment than a few voxels.</span>
<span class="w">        </span><span class="nt">functional_volreg_twopass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference. Options: mean, median, selected_volume, fmriprep_reference</span>
<span class="w">      </span><span class="nt">motion_correction_reference</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;mean&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference volume</span>
<span class="w">      </span><span class="nt">motion_correction_reference_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="nt">motion_estimate_filter</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Filter physiological (respiration) artifacts from the head motion estimates.</span>
<span class="w">      </span><span class="c1"># Adapted from DCAN Labs filter.</span>
<span class="w">      </span><span class="c1">#     https://www.ohsu.edu/school-of-medicine/developmental-cognition-and-neuroimaging-lab</span>
<span class="w">      </span><span class="c1">#     https://www.biorxiv.org/content/10.1101/337360v1.full.pdf</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notch&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Highest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For notch filter.</span>
<span class="w">          </span><span class="nt">breathing_rate_max</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># notch filter direct customization parameters</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min and breathing_rate_max are provided,</span>
<span class="w">          </span><span class="c1"># the following parameters will be ignored.</span>

<span class="w">          </span><span class="c1"># the center frequency of the notch filter</span>
<span class="w">          </span><span class="nt">center_frequency</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># the width of the notch filter</span>
<span class="w">          </span><span class="nt">filter_bandwidth</span><span class="p">:</span>

<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lowpass&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># lowpass filter direct customization parameter</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min is provided, the following</span>
<span class="w">          </span><span class="c1"># parameter will be ignored.</span>

<span class="w">          </span><span class="c1"># the frequency cutoff of the filter</span>
<span class="w">          </span><span class="nt">lowpass_cutoff</span><span class="p">:</span>

<span class="w">  </span><span class="nt">distortion_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># using: [&#39;PhaseDiff&#39;, &#39;Blip&#39;, &#39;Blip-FSL-TOPUP&#39;]</span>
<span class="w">    </span><span class="c1">#   PhaseDiff - Perform field map correction using a single phase difference image, a subtraction of the two phase images from each echo. Default scanner for this method is SIEMENS.</span>
<span class="w">    </span><span class="c1">#   Blip - Uses AFNI 3dQWarp to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="c1">#   Blip-FSL-TOPUP - Uses FSL TOPUP to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;PhaseDiff&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;Blip&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># option parameters</span>
<span class="w">    </span><span class="nt">PhaseDiff</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Since the quality of the distortion heavily relies on the skull-stripping step, we provide a choice of method (&#39;AFNI&#39; for AFNI 3dSkullStrip or &#39;BET&#39; for FSL BET).</span>
<span class="w">      </span><span class="c1"># Options: &#39;BET&#39; or &#39;AFNI&#39;</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_option</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;BET&#39;</span>

<span class="w">      </span><span class="c1"># Set the fraction value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.5.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_BET_frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>

<span class="w">      </span><span class="c1"># Set the threshold value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.6.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_AFNI_threshold</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="w">      </span>
<span class="w">    </span><span class="nt">Blip-FSL-TOPUP</span><span class="p">:</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># (approximate) resolution (in mm) of warp basis for the different sub-sampling levels, default 10</span>
<span class="w">      </span><span class="nt">warpres</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># sub-sampling scheme, default 1</span>
<span class="w">      </span><span class="nt">subsamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># FWHM (in mm) of gaussian smoothing kernel, default 8</span>
<span class="w">      </span><span class="nt">fwhm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Max # of non-linear iterations, default 5</span>
<span class="w">      </span><span class="nt">miter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Weight of regularisation, default depending on --ssqlambda and --regmod switches. See user documentation.</span>
<span class="w">      </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), lambda is weighted by current ssq, default 1</span>
<span class="w">      </span><span class="nt">ssqlambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Model for regularisation of warp-field [membrane_energy bending_energy], default bending_energy</span>
<span class="w">      </span><span class="nt">regmod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bending_energy</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Estimate movements if set, default 1 (true)</span>
<span class="w">      </span><span class="nt">estmov</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Minimisation method 0=Levenberg-Marquardt, 1=Scaled Conjugate Gradient, default 0 (LM)</span>
<span class="w">      </span><span class="nt">minmet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Order of spline, 2-&gt;Qadratic spline, 3-&gt;Cubic spline. Default=3</span>
<span class="w">      </span><span class="nt">splineorder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Precision for representing Hessian, double or float. Default double</span>
<span class="w">      </span><span class="nt">numprec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Image interpolation model, linear or spline. Default spline</span>
<span class="w">      </span><span class="nt">interp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spline</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), the images are individually scaled to a common mean, default 0 (false)</span>
<span class="w">      </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), the calculations are done in a different grid, default 1 (true)</span>
<span class="w">      </span><span class="nt">regrid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">  </span><span class="nt">func_masking</span><span class="p">:</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">    </span><span class="c1"># using: [&#39;AFNI&#39;, &#39;FSL&#39;, &#39;FSL_AFNI&#39;, &#39;Anatomical_Refined&#39;, &#39;Anatomical_Based&#39;, &#39;Anatomical_Resampled&#39;, &#39;CCS_Anatomical_Refined&#39;]</span>
</pre></div>
</div>
</section>
</section>
<section id="functional-to-template-registration">
<h2>Functional to Template Registration<a class="headerlink" href="#functional-to-template-registration" title="Permalink to this heading">¶</a></h2>
<figure class="align-default">
<img alt="../_images/func_to_template_reg.png" src="../_images/func_to_template_reg.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>Run Functional to Template Registration - [On, Off]:</strong> Register functional images to a standard MNI152 template or EPI template. This option must be enabled if you wish to calculate any derivatives.</p></li>
<li><p><strong>Functional Resolution - [1 An integer indicating three same dimensions (e.g., 1mm, 2mm, 3mm, 4mm); 2 A float number indicating three same dimensions (e.g., 3.5mm etc.); 3 Three numbers connected by ‘x’ indicating three different dimensions (e.g., 2.67mmx2.67mmx3mm etc.)]:</strong> The resolution (in mm) to which the preprocessed, registered functional timeseries outputs are written into. <strong>Note that selecting a 1 mm or 2 mm resolution might substantially increase your RAM needs- these resolutions should be selected with caution. For most cases, 3 mm or 4 mm resolutions are suggested. Float numbers and three different dimensions are supported.</strong></p></li>
<li><p><strong>Derivative Resolution - [1 An integer indicating three same dimensions (e.g., 1mm, 2mm, 3mm, 4mm); 2 A float number indicating three same dimensions (e.g., 3.5mm etc.); 3 Three numbers connected by ‘x’ indicating three different dimensions (e.g., 2.67mmx2.67mmx3mm etc.)]:</strong> The resolution (in mm) to which functional images are transformed during registration.  Note that selecting a 1 mm or 2 mm resolution will substantially increase your RAM needs.  For most cases, 3 mm or 4 mm resolutions are suggested.</p></li>
<li><p><strong>Standard Identity Matrix - [path]:</strong> Matrix containing all 1’s. Used as an identity matrix during registration. It is not necessary to change this path unless you intend to use non-standard MNI registration.</p></li>
<li><p><strong>T1 Template Registration - [On, Off]:</strong> Register functional images to a standard MNI152 template.</p></li>
<li><p><strong>Standard Brain only Template (functional resolution) - [path]:</strong> Standard FSL Skull Stripped Template. Used as a reference image for functional registration.</p></li>
<li><p><strong>Standard Template with Skull (functional resolution) - [path]:</strong> Standard FSL Anatomical Brain Image with skull.</p></li>
<li><p><strong>EPI Template Registration - [On, Off]:</strong> Register functional images to a standard EPI template.</p></li>
<li><p><strong>Standard Brain Template - [path]:</strong> Used as a reference image for functional EPI registration.</p></li>
<li><p><strong>ANTs Registration Parameters :</strong> Clicking on the setting icon will bring up a dialog where you can set ‘antsRegistration’ parameters.</p></li>
</ol>
<section id="id10">
<h3>Configuration Without the GUI<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">registration_workflows</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">functional_registration</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">EPI_registration</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># directly register the mean functional to an EPI template</span>
<span class="w">      </span><span class="c1">#   instead of applying the anatomical T1-to-template transform to the functional data that has been</span>
<span class="w">      </span><span class="c1">#   coregistered to anatomical/T1 space</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># using: [&#39;ANTS&#39;, &#39;FSL&#39;, &#39;FSL-linear&#39;]</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1"># ex. selecting both [&#39;ANTS&#39;, &#39;FSL&#39;] will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;ANTS&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># EPI template for direct functional-to-template registration</span>
<span class="w">      </span><span class="c1"># (bypassing coregistration and the anatomical-to-template transforms)</span>
<span class="w">      </span><span class="nt">EPI_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://fcp-indi/resources/cpac/resources/epi_hbn.nii.gz</span>

<span class="w">      </span><span class="c1"># EPI template mask.</span>
<span class="w">      </span><span class="nt">EPI_template_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">      </span><span class="nt">ANTs</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># EPI registration configuration - synonymous with T1_registration</span>
<span class="w">        </span><span class="c1"># parameters under anatomical registration above</span>
<span class="w">        </span><span class="nt">parameters</span><span class="p">:</span>

<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">collapse-output-transforms</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dimensionality</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">initial-moving-transform </span><span class="p">:</span>
<span class="w">             </span><span class="nt">initializationFeature</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">transforms</span><span class="p">:</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Rigid</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">metric </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MI</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">numberOfBins </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">                   </span><span class="nt">samplingStrategy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regular</span>
<span class="w">                   </span><span class="nt">samplingPercentage </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000x500x250x100</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-08</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Affine</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">metric </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MI</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">numberOfBins </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">                   </span><span class="nt">samplingStrategy </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Regular</span>
<span class="w">                   </span><span class="nt">samplingPercentage </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000x500x250x100</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-08</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">SyN</span><span class="p">:</span>
<span class="w">                 </span><span class="nt">gradientStep </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">                 </span><span class="nt">updateFieldVarianceInVoxelSpace </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">                 </span><span class="nt">totalFieldVarianceInVoxelSpace </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">                 </span><span class="nt">metric</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">type </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CC</span>
<span class="w">                   </span><span class="nt">metricWeight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                   </span><span class="nt">radius </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">                 </span><span class="nt">convergence</span><span class="p">:</span>
<span class="w">                   </span><span class="nt">iteration </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100x100x70x20</span>
<span class="w">                   </span><span class="nt">convergenceThreshold </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e-09</span>
<span class="w">                   </span><span class="nt">convergenceWindowSize </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
<span class="w">                 </span><span class="nt">smoothing-sigmas </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0x2.0x1.0x0.0</span>
<span class="w">                 </span><span class="nt">shrink-factors </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6x4x2x1</span>
<span class="w">                 </span><span class="nt">use-histogram-matching </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">                 </span><span class="nt">winsorize-image-intensities </span><span class="p">:</span>
<span class="w">                   </span><span class="nt">lowerQuantile </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">                   </span><span class="nt">upperQuantile </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.99</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed EPI images.</span>
<span class="w">        </span><span class="c1"># Possible values: Linear, BSpline, LanczosWindowedSinc</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LanczosWindowedSinc</span>

<span class="w">      </span><span class="nt">FSL-FNIRT</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Configuration file to be used by FSL to set FNIRT parameters.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use custom FNIRT parameters or a non-standard template.</span>
<span class="w">        </span><span class="nt">fnirt_config</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">T1_2_MNI152_2mm</span>

<span class="w">        </span><span class="c1"># Interpolation method for writing out transformed EPI images.</span>
<span class="w">        </span><span class="c1"># Possible values: trilinear, sinc, spline</span>
<span class="w">        </span><span class="nt">interpolation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sinc</span>

<span class="w">        </span><span class="c1"># Identity matrix used during FSL-based resampling of BOLD-space data throughout the pipeline.</span>
<span class="w">        </span><span class="c1"># It is not necessary to change this path unless you intend to use a different template.</span>
<span class="w">        </span><span class="nt">identity_matrix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/etc/flirtsch/ident.mat</span>

<span class="w">    </span><span class="nt">func_registration_to_template</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># these options modify the application (to the functional data), not the calculation, of the</span>
<span class="w">      </span><span class="c1"># T1-to-template and EPI-to-template transforms calculated earlier during registration</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># apply the functional-to-template (T1 template) registration transform to the functional data</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># apply the functional-to-template (EPI template) registration transform to the functional data</span>
<span class="w">      </span><span class="nt">run_EPI</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="nt">output_resolution</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># The resolution (in mm) to which the preprocessed, registered functional timeseries outputs are written into.</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   selecting a 1 mm or 2 mm resolution might substantially increase your RAM needs- these resolutions should be selected with caution.</span>
<span class="w">        </span><span class="c1">#   for most cases, 3 mm or 4 mm resolutions are suggested.</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   this also includes the single-volume 3D preprocessed functional data,</span>
<span class="w">        </span><span class="c1">#   such as the mean functional (mean EPI) in template space</span>
<span class="w">        </span><span class="nt">func_preproc_outputs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3mm</span>

<span class="w">        </span><span class="c1"># The resolution (in mm) to which the registered derivative outputs are written into.</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   this is for the single-volume functional-space outputs (i.e. derivatives)</span>
<span class="w">        </span><span class="c1">#   thus, a higher resolution may not result in a large increase in RAM needs as above</span>
<span class="w">        </span><span class="nt">func_derivative_outputs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3mm</span>

<span class="w">      </span><span class="nt">target_template</span><span class="p">:</span><span class="w">      </span>
<span class="w">        </span><span class="c1"># choose which template space to transform derivatives towards</span>
<span class="w">        </span><span class="c1"># using: [&#39;T1_template&#39;, &#39;EPI_template&#39;]</span>
<span class="w">        </span><span class="c1"># this is a fork point</span>
<span class="w">        </span><span class="c1"># NOTE:</span>
<span class="w">        </span><span class="c1">#   this will determine which registration transform to use to warp the functional</span>
<span class="w">        </span><span class="c1">#   outputs and derivatives to template space</span>
<span class="w">        </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;T1_template&#39;</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="nt">T1_template</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Standard Skull Stripped Template. Used as a reference image for functional registration.</span>
<span class="w">          </span><span class="c1"># This can be different than the template used as the reference/fixed for T1-to-template registration.</span>
<span class="w">          </span><span class="nt">T1w_brain_template_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${func_resolution}_brain.nii.gz</span>

<span class="w">          </span><span class="c1"># Standard Anatomical Brain Image with Skull.</span>
<span class="w">          </span><span class="c1"># This can be different than the template used as the reference/fixed for T1-to-template registration.</span>
<span class="w">          </span><span class="nt">T1w_template_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${func_resolution}.nii.gz</span>

<span class="w">          </span><span class="c1"># Template to be used during registration.</span>
<span class="w">          </span><span class="c1"># It is not necessary to change this path unless you intend to use a non-standard template.</span>
<span class="w">          </span><span class="nt">T1w_brain_template_mask_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${func_resolution}_brain_mask.nii.gz</span>

<span class="w">          </span><span class="c1"># a standard template for resampling if using float resolution</span>
<span class="w">          </span><span class="nt">T1w_template_for_resample</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_1mm_brain.nii.gz</span>

<span class="w">        </span><span class="nt">EPI_template</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># EPI template for direct functional-to-template registration</span>
<span class="w">          </span><span class="c1"># (bypassing coregistration and the anatomical-to-template transforms)</span>
<span class="w">          </span><span class="nt">EPI_template_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">s3://fcp-indi/resources/cpac/resources/epi_hbn.nii.gz</span>

<span class="w">          </span><span class="c1"># EPI template mask.</span>
<span class="w">          </span><span class="nt">EPI_template_mask_funcreg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">          </span><span class="c1"># a standard template for resampling if using float resolution</span>
<span class="w">          </span><span class="nt">EPI_template_for_resample</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_1mm_brain.nii.gz</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="nuisance">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Nuisance Signal Regression</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="anat">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Anatomical Preprocessing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2012‒2024, C-PAC Developers. C-PAC is licensed under LGPL-3.0-or-later
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Functional Preprocessing</a><ul>
<li><a class="reference internal" href="#initial-preprocessing">Initial Preprocessing</a><ul>
<li><a class="reference internal" href="#configuration-without-the-gui">Configuration Without the GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#slice-timing-correction">Slice Timing Correction</a><ul>
<li><a class="reference internal" href="#id6">Configuration Without the GUI</a></li>
<li><a class="reference internal" href="#through-the-data-configuration">Through the Data Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#field-map-based-distortion-correction">Field Map-Based Distortion Correction</a><ul>
<li><a class="reference internal" href="#id7">Configuration Without the GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functional-to-anatomical-registration">Functional to Anatomical Registration</a><ul>
<li><a class="reference internal" href="#id8">Configuration Without the GUI</a></li>
<li><a class="reference internal" href="#configuring-fsl-bet-options">Configuring FSL BET options:</a></li>
<li><a class="reference internal" href="#id9">Configuration Without the GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functional-to-template-registration">Functional to Template Registration</a><ul>
<li><a class="reference internal" href="#id10">Configuration Without the GUI</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=23d38711"></script>
    <script src="../_static/doctools.js?v=d248f5b3"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/underscore.js?v=f1230927"></script>
    <script src="../_static/doctools.js?v=d248f5b3"></script>
    <script src="../_static/hideEmptyHighlights.js?v=af317073"></script>
    <script defer="defer" src="../_static/versionList.js?v=f2bc52a7"></script>
    </body>
</html>