<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Timeseries Extraction &#8212; C-PAC 1.6.1.a Beta documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.6.1.a Beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex" />
    <link rel="search" title="Search" href="../search" />
    <link rel="top" title="C-PAC 1.6.1.a Beta documentation" href="../index" />
    <link rel="up" title="Pre-Processing Steps" href="preprocessing" />
    <link rel="next" title="After Warping Options" href="after_warp" />
    <link rel="prev" title="ICA-AROMA (Independent Component Analysis - Automatic Removal of Motion Artifacts)" href="aroma_ica" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="after_warp" title="After Warping Options"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="aroma_ica" title="ICA-AROMA (Independent Component Analysis - Automatic Removal of Motion Artifacts)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index">C-PAC 1.6.1.a Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index" >Welcome to C-PAC&#8217;s user guide!</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="preprocessing" accesskey="U">Pre-Processing Steps</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="timeseries-extraction">
<h1>Timeseries Extraction<a class="headerlink" href="#timeseries-extraction" title="Permalink to this headline">¶</a></h1>
<p>C-PAC lets you easily export BOLD timeseries in a number of different ways. This can be useful for those wishing to undertake advanced analysis not included in C-PAC, but still take advantage of its robust pre-processing features. For instructions on how to use these seeds within C-PAC
, please see <a class="reference internal" href="sca"><span class="doc">Seed-based Correlation Analysis</span></a>.</p>
<p>ROI Timeseries Extraction allows you to export the timeseries for one or more regions of interest (ROIs). This is done by calculating the average timeseries across all voxels within an ROI. As such, C-PAC will output one timeseries for each ROI specified by you.</p>
<div class="figure">
<img alt="../_images/roi_timeseries.png" src="../_images/roi_timeseries.png" />
</div>
<p>When an ROI is placed within a functionally homogeneous area, averaging signals in this way can produce a timeseries which may more accurately reflect the overall activity pattern in the region than does the timeseries of any individual voxel. Voxel Timeseries Extraction will export the individual timeseries of all voxels within one or more masks.</p>
<div class="figure">
<img alt="../_images/voxel_timeseries.png" src="../_images/voxel_timeseries.png" />
</div>
</div>
<div class="section" id="configuring-roi-time-series-extraction">
<h1>Configuring ROI Time Series Extraction<a class="headerlink" href="#configuring-roi-time-series-extraction" title="Permalink to this headline">¶</a></h1>
<div class="figure">
<img alt="../_images/tse_gui.png" src="../_images/tse_gui.png" />
</div>
<ol class="arabic simple">
<li><strong>Time Series Extraction- [On,Off]:</strong>  Extract the average time series of one or more ROIs/seeds. Must be enabled if you wish to run seed-based correlation analysis.</li>
<li><dl class="first docutils">
<dt><strong>TSE ROI Image - [path]:</strong> Clicking on the <em>+</em> icon to the bottom-right of the box here will bring up a dialog where you can define multiple paths to NifTIs containing ROI masks.  You may add multiple ROIs to the box.  Three columns within the box can be checked on and off to enable specific types of TSE:</dt>
<dd><ul class="first last">
<li>Avg - For each ROI, output the average of the all the voxel time series within that ROI.</li>
<li>Voxel - For each ROI, output the individual voxel time series for all voxels within that ROI.</li>
<li>SpatialReg - Use a spatial map as a spatial regressor in a GLM to find the time series associated with the voxels in that map (see <a class="reference internal" href="sca"><span class="doc">dual regression</span></a>).</li>
</ul>
</dd>
</dl>
</li>
<li><strong>Outputs - [CSV, NUMPY]:</strong> Choose to save voxelwise time series extraction outputs as a csv file or a Numpy array.  Voxelwise TSE outputs are saved as a text file and 1D file by default.  ROI Average TSE outputs are saved as a tab-delimited value file (&#8216;roi_stats.csv&#8217;) only.</li>
</ol>
<div class="section" id="configuration-without-the-gui">
<h2>Configuration Without the GUI<a class="headerlink" href="#configuration-without-the-gui" title="Permalink to this headline">¶</a></h2>
<p>The following key/value pairs must be defined in your <a class="reference internal" href="pipeline_config"><span class="doc">pipeline configuration YAML</span></a> for C-PAC to run time series extraction:</p>
<p>The box below contains an example of what these parameters might look like when defined in the YAML:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">runROITimeseries</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">tsa_roi_paths</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">s3</span><span class="p">:</span><span class="o">//</span><span class="n">fcp</span><span class="o">-</span><span class="n">indi</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">cpac</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">CC400</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span><span class="p">:</span> <span class="n">Avg</span>
      <span class="n">s3</span><span class="p">:</span><span class="o">//</span><span class="n">fcp</span><span class="o">-</span><span class="n">indi</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">cpac</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">PNAS_Smith09_rsn10</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span><span class="p">:</span> <span class="n">SpatialReg</span>
<span class="n">roiTSOutputs</span> <span class="p">:</span>  <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index">
              <img class="logo" src="../_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index">Table Of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index#the-c-pac-mission">The C-PAC Mission</a></li>
<li class="toctree-l2"><a class="reference internal" href="index#latest-release-version-1-6-1a-beta-mar-14-2020">Latest Release: Version 1.6.1a Beta (Mar 14, 2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index#the-c-pac-team">The C-PAC Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="index#funding-acknowledgements">Funding Acknowledgements</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index#user-guide-index">User Guide Index</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pipeline_config">3. Select Your Pipeline</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="preprocessing">4. Pre-Process Your Data</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l4"><a class="reference internal" href="aroma_ica">ICA Denoising</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Timeseries Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#configuration-without-the-gui">Configuration Without the GUI</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="derivatives">5. Compute Derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="running">6. All Run Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_analysis">7. Run Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="help">9. Troubleshoot</a></li>
<li class="toctree-l3"><a class="reference internal" href="rnotes">10. Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix">Appendix</a></li>
<li class="toctree-l3"><a class="reference internal" href="appendix#benchmark-package">Benchmark Package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index">Welcome to CPAC&#8217;s developer documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index#indices-and-tables">Indices and tables</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="after_warp" title="After Warping Options"
             >next</a> |</li>
        <li class="right" >
          <a href="aroma_ica" title="ICA-AROMA (Independent Component Analysis - Automatic Removal of Motion Artifacts)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index">C-PAC 1.6.1.a Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index" >Welcome to C-PAC&#8217;s user guide!</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="preprocessing" >Pre-Processing Steps</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, C-PAC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>
    <script defer src="https://fcp-indi.github.io/scripts/versionList.js"></script>

  </body>
</html>