
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Setting Up A Pipeline Configuration &#8212; C-PAC 1.8.4.dev Beta documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../../genindex" />
    <link rel="search" title="Search" href="../../search" />
    <link rel="next" title="Pre-configured Pipelines" href="preconfig" />
    <link rel="prev" title="Setting Up A Data Configuration File (Participant/Subject List)" href="../subject_list_config" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="preconfig" title="Pre-configured Pipelines"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../subject_list_config" title="Setting Up A Data Configuration File (Participant/Subject List)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index">C-PAC 1.8.4.dev Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index" accesskey="U">User Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Setting Up A Pipeline Configuration</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="setting-up-a-pipeline-configuration">
<h1>Setting Up A Pipeline Configuration<a class="headerlink" href="#setting-up-a-pipeline-configuration" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This section explains how to create a new pipeline or edit an existing one. If you wish to use one of the pre-configured pipelines that come packaged with C-PAC, you can view the current available library of <a class="reference internal" href="preconfig"><span class="doc">pipelines here</span></a>.</p>
<div class="topic" id="ndmg-atlases">
<p class="topic-title">Neuroparc v1.0: Baseline</p>
<p>On July 20, 2020, Neuroparc released v1.0. In moving from v0 to v1, the paths to several of the Neuroparc atlases changed. The atlases are used by C-PAC in its default and preconfigured pipelines. C-PAC v1.7.0 includes the Neuroparc v1.0 paths, but <strong>if you are using a pipeline based on C-PAC 1.6.2a or older, you will need to update any Nueroparc v0 paths in your config</strong></p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">All paths begin with <code class="docutils literal notranslate"><span class="pre">/ndmg_atlases/label/Human/</span></code></span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Neuroparc v0</p></th>
<th class="head"><p>Neuroparc v1</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>aal_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>AAL_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>aal_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
<td><p>AAL_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>AAL2zourioMazoyer2002.nii.gz</p></td>
<td><p>AAL_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>brodmann_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Brodmann_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>brodmann_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
<td><p>Brodmann_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>CorticalAreaParcellationfromRestingStateCorrelationsGordon2014.nii.gz</p></td>
<td><p>CAPRSC_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>desikan_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Desikan_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>desikan_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
<td><p>Desikan_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>DesikanKlein2012.nii.gz</p></td>
<td><p>DesikanKlein_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>glasser_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Glasser_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>Juelichgmthr252mmEickhoff2005.nii.gz</p></td>
<td><p>Juelich_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>MICCAI2012MultiAtlasLabelingWorkshopandChallengeNeuromorphometrics.nii.gz</p></td>
<td><p>MICCAI_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>princetonvisual-top_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
<td><p>Princetonvisual-top_space-MNI152NLin6_res-2x2x2.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>Schaefer2018-200-node_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Schaefer200_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>Schaefer2018-300-node_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Schaefer300_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>Schaefer2018-400-node_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Schaefer400_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>Schaefer2018-1000-node_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Schaefer1000_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>slab907_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Slab907_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>yeo-7_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Yeo-7_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>yeo-7-liberal_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Yeo-7-liberal_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-even"><td><p>yeo-17_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Yeo-17_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
<tr class="row-odd"><td><p>yeo-17-liberal_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
<td><p>Yeo-17-liberal_space-MNI152NLin6_res-1x1x1.nii.gz</p></td>
</tr>
</tbody>
</table>
</div>
<p>There are two ways of setting up or editing a pipeline configuration for C-PAC:</p>
<ul class="simple">
<li><p>Using the pipeline configuration interface in the C-PAC GUI</p></li>
<li><p>Using a text editor (useful for remote servers where using the C-PAC GUI is not possible or impractical)</p></li>
</ul>
<section id="definitions">
<h3>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h3>
<ul>
<li><dl class="simple">
<dt>Workflow</dt><dd><p>A workflow accomplishes a particular processing task (e.g. functional preprocessing, scrubbing, nuisance correction). Each workflow can be turned on or off in the pipeline configuration.  Sometimes a workflow can be set to both on and off, allowing for pipelines to branch.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Pipeline</dt><dd><p>A pipeline is a combination of workflows.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Strategy</dt><dd><p>A strategy is a set of preprocessing options. Specifically, a strategy is defined by nuisance corrections and scrubbing settings. Strategies can branch depending on which of these workflows are turned on or off and how they are configured.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Derivative</dt><dd><p>Derivatives are the results of processing a participant’s raw data (i.e., connectivity measures).</p>
</dd>
</dl>
</li>
<li><dl>
<dt>Atlas</dt><dd><blockquote>
<div><p>An <em>atlas</em> provides a guide to the location of anatomical features in a coordinate space.</p>
<p class="attribution">—<a class="bibtex reference internal" href="#glossary-pomn11" id="id1">[1]</a> p. 55</p>
</div></blockquote>
<p>An atlas provides a defined coordinate space, a <a class="reference internal" href="../../glossary/template"><span class="doc">template</span></a> for aligning images, and labels for regions of interest.</p>
<p>Currently C-PAC only supports atlases in NifTI format.</p>
<p>CIFTI is a popular atlas format not yet supported by C-PAC. As always, if anyone wants to share any tips or hacks with us, we are an open-source platform after all. Below are some resources that might help enable CIFTI atlas support in a future version of C-PAC.</p>
<p class="rubric">CIFTI Resources</p>
<ul class="simple" id="bibtex-bibliography-user/pipelines/pipeline_config-0">
<li><p>Mejia, M. 2015 August. <a class="reference external" href="https://mandymejia.com/2015/08/10/a-laymans-guide-to-working-with-cifti-files/">A layman’s guide to working with CIFTI files</a>, <em>Mandy Mejia.</em></p></li>
<li><p>Habeeb, H. 2018 December. <a class="reference external" href="https://neurostars.org/t/convert-from-cifti2-hcp-to-3d-array/3054">Convert from CIFTI2 (HCP) to 3D array</a>, <em>Neurostars.</em></p></li>
<li><p>Etzel, J. 2014 March. <a class="reference external" href="http://mvpa.blogspot.com/2014/03/nifti-cifti-gifti-in-hcp-and-workbench.html">NIfTI, CIFTI, GIFTI in the HCP and Workbench: a primer</a>, <em>MVPA meanderings.</em></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>Template</dt><dd><blockquote>
<div><p>A <em>template</em> is an image that is representative of the <a class="reference internal" href="../../glossary/atlas"><span class="doc">atlas</span></a> and provides a target to which individual images can be aligned.</p>
<p class="attribution">—<a class="bibtex reference internal" href="#glossary-pomn11" id="id2">[1]</a> p. 55</p>
</div></blockquote>
<p>C-PAC images include the following templates:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>path in container</p></td>
<td><p>source</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/ants_template/oasis</span></code></p></td>
<td><p><a class="reference external" href="https://figshare.com/articles/dataset/ANTs_ANTsR_Brain_Templates/915436?file=3133832">ANTs/ANTsR Brain Templates: OASIS.zip</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">/cpac_templates</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/FCP-INDI/C-PAC_templates">C-PAC Templates</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/ndmg_atlases</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/neurodata/neuroparc/releases/tag/v1.0">Neuroparc v1.0: Baseline</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">/opt/dcan-tools/pipeline/global/templates</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/DCAN-Labs/DCAN-HCP/tree/master/global/templates">DCAN-HCP Pipelines: global/templates</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/usr/share/data/fsl-mni152-templates</span></code></p></td>
<td><p><a class="reference external" href="http://neuro.debian.net/pkgs/fsl-mni152-templates.html">fsl-mni152-templates – MNI152 stereotaxic brain templates for FSL</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">/usr/share/fsl/5.0/data/atlases</span></code></p></td>
<td><p><a class="reference external" href="https://neuro.debian.net/pkgs/fsl-atlases.html">fsl-atlases – FSL’s MNI152 standard space stereotaxic brain atlases</a> <a class="reference external" href="http://fcon_1000.projects.nitrc.org/indi/cpac_resources.tar.gz">http://fcon_1000.projects.nitrc.org/indi/cpac_resources.tar.gz</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">/usr/share/fsl/5.0/data/standard</span></code></p></td>
<td><p><a class="reference external" href="http://fcon_1000.projects.nitrc.org/indi/cpac_resources.tar.gz">http://fcon_1000.projects.nitrc.org/indi/cpac_resources.tar.gz</a></p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="design-a-pipeline">
<h2>Design A Pipeline<a class="headerlink" href="#design-a-pipeline" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The C-PAC pipeline configuration was changed to a nested format with import capabilities in v1.8.0.</p>
<p>With this change, the following configuration keys are deprecated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">crashLogDirectory</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_tree</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fdCalc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reGenerateOutputs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runMedianAngleCorrection</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice_timing_pattern</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targetAngleDeg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runSymbolicLinks</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">configFileTwomm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_mask_2mm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">template_skull_for_anat_2mm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">surface_reconstruction</span></code></p></li>
</ul>
<p>See <a class="reference internal" href="../nuisance#nuisance-no-gui"><span class="std std-ref">Regressors specification</span></a> to manually update any of the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">nComponents</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nuisanceBandpassFreq</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numRemovePrecedingFrames</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numRemoveSubsequentFrames</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runFrequencyFiltering</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runFristonModel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runMotionSpike</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spikeThreshold</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">smoothing_order</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">already_skullstripped</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roiTSOutputs</span></code></p></li>
</ul>
<p>Mappings for all other C-PAC 1.7 keys can be found <a class="reference internal" href="1.7-1.8-nesting-mappings"><span class="doc">here</span></a>.</p>
</div>
<p>C-PAC offers a graphical interface you can use to quickly and easily modify the default pipeline or create your own from scratch: <a class="reference external" href="https://fcp-indi.github.io/C-PAC_GUI/">https://fcp-indi.github.io/C-PAC_GUI/</a></p>
<blockquote>
<div><blockquote>
<div><p>Currently the GUI creates a C-PAC v1.6.0 pipeline configuration file. This syntax persisted through v1.7.2 but is deprecated with the release of v1.8.0.</p>
<p>If given a pipeline file in the older syntax, C-PAC v1.8 will attempt to convert the pipeline configuration file to the new syntax, saving the converted file in your output directory.</p>
<p>An update to the GUI to create v1.8.0 syntax configuration files is underway.</p>
<p>The newer (v1.8) syntax will not work with older versions of C-PAC.</p>
<p>See <a class="reference internal" href="#using-a-text-editor"><span class="std std-ref">Using a Text Editor</span></a> for configuring a custom pipeline without the GUI.</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="1.7-1.8-nesting-mappings"><span class="doc">Details about mapping the older syntax to the new.</span></a></p>
</div>
</div></blockquote>
<figure class="align-default">
<img alt="../../_images/gui_home1.png" src="../../_images/gui_home1.png" />
</figure>
<p>Once you save the pipeline configuration YAML file, you can provide it to the C-PAC Docker container like so:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">docker run -i --rm \</span>
<span class="go">        -v /Users/You/local_bids_data:/bids_dataset \</span>
<span class="go">        -v /Users/You/some_folder:/outputs \</span>
<span class="go">        -v /tmp:/tmp \</span>
<span class="go">        -v /Users/You/Documents:/configs \</span>
<span class="go">        -v /Users/You/resources:/resources \</span>
<span class="go">        fcpindi/c-pac:latest /bids_dataset /outputs participant --pipeline_file /configs/pipeline_config.yml</span>
</pre></div>
</div>
<p>Or you can provide it to the C-PAC Singularity container like so:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity run \</span>
<span class="go">        -B /Users/You/some_folder:/outputs \</span>
<span class="go">        -B /tmp:/tmp \</span>
<span class="go">        -B /Users/You/Documents:/configs \</span>
<span class="go">        fcpindi_c-pac_latest-{date}-{hash value}.img s3://fcp-indi/data/Projects/ADHD200/RawDataBIDS /outputs participant --pipeline_file /configs/pipeline_config.yml</span>
</pre></div>
</div>
<p><strong>Reporting errors and getting help</strong></p>
<p>Please report errors on the <a class="reference external" href="https://github.com/FCP-INDI/C-PAC/issues">C-PAC github page issue tracker</a>. Please use the <a class="reference external" href="https://groups.google.com/forum/#!forum/cpax_forum">C-PAC google group</a> for help using C-PAC and this application.</p>
</section>
<section id="using-a-text-editor">
<span id="id3"></span><h2>Using a Text Editor<a class="headerlink" href="#using-a-text-editor" title="Permalink to this headline">¶</a></h2>
<p>If you want to base a pipeline on another pipeline configuration YAML file, you can specify</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">FROM</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/pipeline.yml</span><span class="w"></span>
</pre></div>
</div>
<p>in your pipeline configuration file. You can use the name of a <a class="reference internal" href="preconfig"><span class="doc">preconfigured pipeline</span></a> instead of a filepath if you want to base a configuration file on a preconfigured pipeline. If <code class="docutils literal notranslate"><span class="pre">FROM</span></code> is not specified, the pipeline will be based on <a class="reference internal" href="default"><span class="doc">the default pipeline</span></a>.</p>
<p>C-PAC will include all expected keys from the pipeline file specified in <code class="docutils literal notranslate"><span class="pre">FROM</span></code> (or the default pipeline if none is specified). Any keys specified in a pipeline configuration file will take precedence over the same key in the <code class="docutils literal notranslate"><span class="pre">FROM</span></code> base configuration, but all omitted keys will retain their values from the <code class="docutils literal notranslate"><span class="pre">FROM</span></code> base configuration.</p>
<p>From terminal, you can quickly generate a default pipeline configuration YAML file template in the directory you are in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">utils</span> <span class="n">pipe_config</span> <span class="n">new_template</span>
</pre></div>
</div>
<p>You can then edit the file as needed. For values that you want to leave at the default, you can either leave the key as-is, or you can remove the key, and C-PAC will automatically use value from the default pipeline configuration (or from the pipeline specified in <code class="docutils literal notranslate"><span class="pre">FROM</span></code>).</p>
<p>If you want to run the analysis from terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">run</span> <span class="o">--</span><span class="n">pipe_config</span> <span class="p">{</span><span class="n">path</span> <span class="n">to</span> <span class="n">pipeline</span> <span class="n">config</span><span class="p">}</span> <span class="p">{</span><span class="n">path</span> <span class="n">to</span> <span class="n">data</span> <span class="n">config</span><span class="p">}</span>
</pre></div>
</div>
<p>Pipeline configuration files, like the data settings and data configuration files discussed in the <a class="reference internal" href="../subject_list_config"><span class="doc">data configuration builder section</span></a>, are stored as YAML files.  Similarly, each of the parameters used by C-PAC to assemble your pipeline can be specified as nested key-value pairs, so a pipeline configuration YAML would have multiple lines of the form <code class="docutils literal notranslate"><span class="pre">key:</span> <span class="pre">value</span></code> like so</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">pipeline_setup</span><span class="p">:</span><span class="w"></span>

<span class="w">  </span><span class="c1"># Name for this pipeline configuration - useful for identification.</span><span class="w"></span>
<span class="w">  </span><span class="nt">pipeline_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpac-default-pipeline</span><span class="w"></span>

<span class="w">  </span><span class="nt">output_directory</span><span class="p">:</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Directory where C-PAC should write out processed data, logs, and crash reports.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># - If running in a container (Singularity/Docker), you can simply set this to an arbitrary</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   name like &#39;/output&#39;, and then map (-B/-v) your desired output directory to that label.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># - If running outside a container, this should be a full path to a directory.</span><span class="w"></span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/output</span><span class="w"></span>

<span class="w">    </span><span class="c1"># (Optional) Path to a BIDS-Derivatives directory that already has outputs.</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   - This option is intended to ingress already-existing resources from an output</span><span class="w"></span>
<span class="w">    </span><span class="c1">#     directory without writing new outputs back into the same directory.</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   - If provided, C-PAC will ingress the already-computed outputs from this directory and</span><span class="w"></span>
<span class="w">    </span><span class="c1">#     continue the pipeline from where they leave off.</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   - If left as &#39;None&#39;, C-PAC will ingress any already-computed outputs from the</span><span class="w"></span>
<span class="w">    </span><span class="c1">#     output directory you provide above in &#39;path&#39; instead, the default behavior.</span><span class="w"></span>
<span class="w">    </span><span class="nt">source_outputs_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Set to True to make C-PAC ingress the outputs from the primary output directory if they</span><span class="w"></span>
<span class="w">    </span><span class="c1"># exist, even if a source_outputs_dir is provided</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   - Setting to False will pull from source_outputs_dir every time, over-writing any</span><span class="w"></span>
<span class="w">    </span><span class="c1">#     calculated outputs in the main output directory</span><span class="w"></span>
<span class="w">    </span><span class="c1">#   - C-PAC will still pull from source_outputs_dir if the main output directory is</span><span class="w"></span>
<span class="w">    </span><span class="c1">#     empty, however</span><span class="w"></span>
<span class="w">    </span><span class="nt">pull_source_once</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Include extra versions and intermediate steps of functional preprocessing in the output directory.</span><span class="w"></span>
<span class="w">    </span><span class="nt">write_func_outputs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Include extra outputs in the output directory that may be of interest when more information is needed.</span><span class="w"></span>
<span class="w">    </span><span class="nt">write_debugging_outputs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Output directory format and structure.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Options: default, ndmg</span><span class="w"></span>
<span class="w">    </span><span class="nt">output_tree</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default&quot;</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Quality control outputs</span><span class="w"></span>
<span class="w">    </span><span class="nt">quality_control</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Generate quality control pages containing preprocessing and derivative outputs.</span><span class="w"></span>
<span class="w">      </span><span class="nt">generate_quality_control_images</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span><span class="w"></span>

<span class="w">      </span><span class="c1"># Generate eXtensible Connectivity Pipeline-style quality control files</span><span class="w"></span>
<span class="w">      </span><span class="nt">generate_xcpqc_files</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span><span class="w"></span>
</pre></div>
</div>
<p>An example of a pipeline configuration YAML file can be found <a class="reference internal" href="default"><span class="doc">here</span></a>.  Tables explaining the keys and their potential values can be found on the individual pages for each of the outputs C-PAC is capable of producing. All pipeline setup configuration files should have the keys in the <a class="reference internal" href="../output_config"><span class="doc">Output Settings</span></a> table defined.</p>
<p>String values can include the simplest form of <cite>POSIX parameter expansion &lt;https://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_02&gt;</cite> (<code class="docutils literal notranslate"><span class="pre">${parameter}</span></code>). Two special variables are included for these types of parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resolution_for_anat</span></code> will be populated with the value set in <code class="docutils literal notranslate"><span class="pre">registration_workflows['anatomical_registration']['resolution_for_anat']</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">func_resolution</span></code> will</p>
<ul>
<li><p>be populated with the value set in <code class="docutils literal notranslate"><span class="pre">registration_workflows['functional_registration']['func_registration_to_template']['output_resolution']['func_preproc_outputs']</span></code> if <code class="docutils literal notranslate"><span class="pre">funcreg</span></code> is in the value’s key,</p></li>
<li><p>be populated with the value set in <code class="docutils literal notranslate"><span class="pre">registration_workflows['functional_registration']['func_registration_to_template']['output_resolution']['func_derivative_outputs']</span></code> if <code class="docutils literal notranslate"><span class="pre">deriv</span></code> is in the value’s key, or</p></li>
<li><p>raise an exception if neither <code class="docutils literal notranslate"><span class="pre">funcreg</span></code> nor <code class="docutils literal notranslate"><span class="pre">deriv</span></code> is in the value’s key.</p></li>
</ul>
</li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">FROM</span></code> is defined (see above), any undefined keys will be inferred from the pipeline configuration specified; otherwise, any undefined keys will be inferred from the default pipeline.</p>
<section id="why-a-list">
<h3>Why a list?<a class="headerlink" href="#why-a-list" title="Permalink to this headline">¶</a></h3>
<p>You may notice as you learn about the settings for various outputs that many of the values for C-PAC’s configurable settings are stored in lists (i.e., multiple values are separated by commas and surrounded by square brackets).  Such lists containing <code class="docutils literal notranslate"><span class="pre">On``s</span> <span class="pre">and</span> <span class="pre">``Off``s</span> <span class="pre">(for</span> <span class="pre">``True</span></code> and <code class="docutils literal notranslate"><span class="pre">False</span></code> respectively) allow you to toggle on multiple options at the same time, and branch a pipeline into two different analysis strategies. See the <a class="reference external" href="http://fcp-indi.github.io/docs/developer/workflows/cpac_pipeline.html">developer documentation</a> for more information about how lists are used in C-PAC.</p>
</section>
</section>
<section id="configurable-settings">
<h2>Configurable Settings<a class="headerlink" href="#configurable-settings" title="Permalink to this headline">¶</a></h2>
<div class="flowchart-container"><object data="../_static/flowcharts/pipeline-individual.svg" type="image/svg+xml"></object></div><section id="data-management-and-environment-settings">
<h3>Data Management and Environment Settings<a class="headerlink" href="#data-management-and-environment-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../compute_config"><span class="doc">Computer Settings</span></a></p></li>
<li><p><a class="reference internal" href="../output_config"><span class="doc">Output Settings</span></a></p></li>
<li><p><a class="reference internal" href="random_state"><span class="doc">Random State</span></a></p></li>
</ul>
</section>
<section id="pre-and-post-processing">
<h3>Pre- and post-processing<a class="headerlink" href="#pre-and-post-processing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../anat"><span class="doc">Anatomical Preprocessing</span></a></p></li>
<li><p><a class="reference internal" href="../func"><span class="doc">Functional Preprocessing</span></a></p></li>
<li><p><a class="reference internal" href="../nuisance"><span class="doc">Nuisance Corrections</span></a></p></li>
<li><p><a class="reference internal" href="../tse"><span class="doc">Time Series Extraction</span></a></p></li>
<li><p><a class="reference internal" href="../after_warp"><span class="doc">After Warp Settings</span></a></p></li>
</ul>
</section>
<section id="derivatives">
<h3>Derivatives<a class="headerlink" href="#derivatives" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../sca"><span class="doc">Seed-based Correlation Analysis (SCA) and Dual Regression</span></a> - Analyze the connectivity between brain regions.</p></li>
<li><p><a class="reference internal" href="../vmhc"><span class="doc">Voxel-mirrored Homotopic Connectivity (VMHC)</span></a> - Investigate connectivity between hemispheres.</p></li>
<li><p><a class="reference internal" href="../alff"><span class="doc">Amplitude of Low Frequency Fluctuations (ALFF) and fractional ALFF (fALFF)</span></a> - Measure the power of slow fluctuations in brain activity.</p></li>
<li><p><a class="reference internal" href="../reho"><span class="doc">Regional Homogeneity (ReHo)</span></a> - Measure the similarity of activity patterns across neighboring voxels.</p></li>
<li><p><a class="reference internal" href="../centrality"><span class="doc">Network Centrality</span></a> - Analyze the structure of functional networks.</p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
</section>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<p id="bibtex-bibliography-user/pipelines/pipeline_config-1"><dl class="bibtex citation">
<dt class="bibtex label" id="glossary-pomn11"><span class="brackets">1</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>)</span></dt>
<dd><p>Poldrack, R. A., Mumford, J. A., and Nichols, T. E. 2011 August. <em>Handbook of Functional MRI Data Analysis</em>. New York: Cambridge University Press.</p>
</dd>
</dl>
</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index">
              <img class="logo" src="../../_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="../../index">Table of Contents</a></h3>
    <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../release_notes/v1.8.3">Latest Release: Version 1.8.3 Beta (Feb 11, 2022)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Select Your Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="preconfig">Pre-configured Pipelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="configurable-settings">Configurable Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="data-environment">Data Management and Environment Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="pre-and-post">Pre- and post-processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="derivatives">Derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="quality">Quality Control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../preprocessing">4. Pre-Process Your Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../derivatives">5. Compute Derivatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running">6. All Run Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../group_analysis">7. Run Group Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help">9. Troubleshoot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rnotes">10. Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../appendix#benchmark-package">Benchmark Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index">Developer Documentation</a></li>
</ul>

  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="preconfig" title="Pre-configured Pipelines"
             >next</a> |</li>
        <li class="right" >
          <a href="../subject_list_config" title="Setting Up A Data Configuration File (Participant/Subject List)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index">C-PAC 1.8.4.dev Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index" >User Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Setting Up A Pipeline Configuration</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, C-PAC Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>
    <script defer src="https://fcp-indi.github.io/scripts/versionList.js"></script>

  </body>
</html>