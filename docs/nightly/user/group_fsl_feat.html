<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex" /><link rel="search" title="Search" href="../search" /><link rel="next" title="Bootstrapped Analysis of Stable Clusters (PyBASC)" href="group_pybasc" /><link rel="prev" title="Group-Level Analysis" href="group_analysis" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.05.06 -->
        <title>FSL-FEAT/Randomise Group Analysis - C-PAC 1.8.8.dev1 Beta documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a96c6ba1" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fe2d11c3" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index"><div class="brand">C-PAC 1.8.8.dev1 Beta documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/cpac_logo_vertical.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">C-PAC 1.8.8.dev1 Beta documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="release_notes/v1.8.7">Latest Release: Version 1.8.7 Beta (May 03, 2024)</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="pipelines/pipeline_config">3. Select Your Pipeline</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 3. Select Your Pipeline</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="pipelines/preconfig">Pre-configured Pipelines</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/configurable-settings">Configurable Settings</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Configurable Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l4"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l4"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/data-environment">Data Management and Environment Settings</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Data Management and Environment Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="compute_config">Computer Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="output_config">Output Settings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/pre-and-post">Pre- and post-processing</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Pre- and post-processing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/derivatives">Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="sca">Seed-based Correlation Analysis (SCA) and Dual Regression - Analyze the connectivity between brain regions.</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">Voxel-mirrored Homotopic Connectivity (VMHC) - Investigate connectivity between hemispheres.</a></li>
<li class="toctree-l4"><a class="reference internal" href="alff">Amplitude of Low Frequency Fluctuations (ALFF) and fractional ALFF (fALFF) - Measure the power of slow fluctuations in brain activity.</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">Regional Homogeneity (ReHo) - Measure the similarity of activity patterns across neighboring voxels.</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality - Analyze the structure of functional networks.</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/quality">Quality Control</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Quality Control</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="qc_interface">QC Pages - Visual Data Quality Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="xcpqc">XCP QC files - eXtensible Connectivity Pipeline-style quality control files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="preprocessing">4. Pre-Process Your Data</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 4. Pre-Process Your Data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="longitudinal">Longitudinal Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l3"><a class="reference internal" href="aroma_ica">ICA Denoising</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="derivatives">5. Compute Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 5. Compute Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l3"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l3"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l3"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running">6. All Run Options</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="group_analysis">7. Run Group Analysis</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 7. Run Group Analysis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">FSL FEAT &amp; Randomise</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_pybasc">Bootstrapped Analysis of Stable Clusters (PyBASC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_isc">Inter-subject Correlation (ISC) &amp; Inter-subject Functional Correlation (ISFC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_qpp">Quasi-Periodic Patterns (QPP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="tutorials/index">9. Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of 9. Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials/observed_usage/index">1. Tutorial: optimizing memory estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="help">10. Troubleshoot</a></li>
<li class="toctree-l2"><a class="reference internal" href="rnotes">11. Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix#benchmark-package">Benchmark Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions">C-PAC versions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/index">Developer Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Developer Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/installation">Installing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/pipeline">Pipeline Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/templates">Templates and Atlases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/random_state">Random State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflow_documentation">Workflow Documentation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/workflows/index">Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Workflows</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/cpac_pipeline">C-PAC Pipeline Construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/anat_preproc">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/func_preproc">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/seg_preproc">Segmentation Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/sca">Seed Based Correlation Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/basc">Bootstrap Analysis of Stable Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/nuisance">Nuisance Signal Removal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/alff">Amplitude of Low Frequency Fluctuations(ALFF) and fractional ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/vmhc">Voxel Mirrored Homotopic Connectivity Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/reho">Regional Homogeneity Approach to fMRI data analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/generate_motion_statistics">Generate Motion and Power Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/scrubbing">Scrubbing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/group_analysis">Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/easy_thresh">Easy thresh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/median_angle">Median Angle Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/timeseries">Timeseries Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/network_centrality">Network Centrality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflows/index#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/xcpqc">eXtensible Connectivity Pipeline-style quality control files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/utils">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing">Testing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/continuous_integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/deprecating">Deprecating a version of C-PAC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license">License</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/user/group_fsl_feat.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="fsl-feat-randomise-group-analysis">
<h1>FSL-FEAT/Randomise Group Analysis<a class="headerlink" href="#fsl-feat-randomise-group-analysis" title="Permalink to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>C-PAC uses the <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide">FSL/FEAT</a> tool to compare findings across groups. You can construct models using a participant list and a phenotype file, select derivatives to be predicted by the model, and define contrasts between conditions using a custom CSV file. Then FSL/FEAT will run a second-level <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide#Appendix_A:_Brief_Overview_of_GLM_Analysis">General Linear Model (GLM)</a> for you.</p>
<p>In addition, FMRIB’s FSL Randomise package is also available in C-PAC for the execution of non-parametric permutation inference. FSL-Randomise can use the same group models you generate or build/edit via the C-PAC model builder for FSL-FEAT.</p>
<p>There are two ways to set up FSL-FEAT/Randomise group-level analysis for C-PAC:</p>
<ul class="simple">
<li><p><strong>The FLAME Model Presets</strong>: this allows you to generate a pre-configured analysis model.</p></li>
<li><p><strong>The Group Analysis Model Builder</strong>: this allows you to specify a model from scratch, or to modify any of the generated presets mentioned above.</p></li>
</ul>
<p>The following links provide an introduction to how groups are compared using FSL, as well as how to define contrasts:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.fmrib.ox.ac.uk/fslcourse/lectures/feat1_part2.pdf">http://www.fmrib.ox.ac.uk/fslcourse/lectures/feat1_part2.pdf</a></p></li>
</ul>
</section>
<section id="group-analysis-fsl-feat-randomise-presets">
<h2>Group Analysis FSL-FEAT/Randomise Presets<a class="headerlink" href="#group-analysis-fsl-feat-randomise-presets" title="Permalink to this heading">¶</a></h2>
<p>C-PAC has a selection of model presets designed to run commonly-used group analysis designs for FSL-FEAT/FLAME. These correspond to examples provided on <a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide">FSL’s user guide for FEAT/FLAME</a>. The preset generator will create a group analysis YAML configuration file that you can plug directly into C-PAC and run.</p>
<p>The presets that are generated:</p>
<ul class="simple">
<li><p>are meant to get you up and running quickly</p></li>
<li><p>are in the form of a group analysis configuration YAML file that can be plugged directly into C-PAC and run</p></li>
<li><p>include a complete design matrix as an input, which you can view before running</p></li>
<li><p>include already-configured contrasts in a custom contrasts .CSV file, which can be edited before running</p></li>
<li><p>can be modified to your liking either by using the standard Group Analysis Model Builder, or by hand via text editor</p></li>
<li><p>are all in one place in the output directory you specify in the Preset Generator</p></li>
</ul>
<p><strong>Preset options</strong>: Currently, there are 5 presets to choose from. More are on their way. If you have any commonly-used or useful group model designs you’d like to see as a preset, please let us know on <a class="reference external" href="https://github.com/FCP-INDI/C-PAC/issues/new?assignees=&amp;labels=enhancement%2Cuser-reported%2Cgroup-level+analysis&amp;template=feature_request.yml&amp;title=%E2%9C%A8+New+Preset+Group+Model+Design:+%5Bdesign+name%5D">GitHub</a> or <a class="reference external" href="https://neurostars.org/tag/cpac">Neurostars</a>!</p>
<p>The available presets are:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide#Single-Group_Average_.28One-Sample_T-Test.29">Single Group Average (One-Sample T-Test)</a></p></li>
<li><p><a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide#Single-Group_Average_with_Additional_Covariate">Single Group Average with Additional Covariate</a></p></li>
<li><p><a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide#Unpaired_Two-Group_Difference_.28Two-Sample_Unpaired_T-Test.29">Unpaired Two-Group Difference (Two-Sample Unpaired T-Test)</a></p></li>
<li><p><a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide#Paired_Two-Group_Difference_.28Two-Sample_Paired_T-Test.29">Paired Two-Group Difference (Two-Sample Paired T-Test)</a></p></li>
<li><p><a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FEAT/UserGuide#Tripled_Two-Group_Difference_.28.22Tripled.22_T-Test.29">Tripled Two-Group Difference (‘Tripled’ T-Test)</a></p></li>
</ul>
<section id="from-terminal">
<h3>From Terminal<a class="headerlink" href="#from-terminal" title="Permalink to this heading">¶</a></h3>
<p>You can generate any of these presets using the C-PAC command-line interface (CLI):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat load-preset &lt;preset type&gt;</span>
</pre></div>
</div>
<p>Enter any of the following in place of <code class="file docutils literal notranslate"><span class="pre">&lt;preset</span> <span class="pre">type&gt;</span></code> for the type of analysis you want to run:</p>
<ul class="simple">
<li><p><strong>single_grp_avg</strong> - Single Group Average (One-Sample T-Test)</p></li>
<li><p><strong>single_grp_cov</strong> - Single Group Average with Additional Covariate</p></li>
<li><p><strong>unpaired_two</strong> - Unpaired Two-Group Difference (Two-Sample Unpaired T-Test)</p></li>
<li><p><strong>paired_two</strong> - Paired Two-Group Difference (Two-Sample Paired T-Test)</p></li>
<li><p><strong>tripled_two</strong> - Tripled Two-Group Difference (‘Tripled’ T-Test)</p></li>
</ul>
<p>You can get more information about the required inputs for each preset with the <code class="file docutils literal notranslate"><span class="pre">--help</span></code> flag. For example, to check the parameters for a two-sample unpaired t-test:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat load-preset unpaired-two --help</span>
</pre></div>
</div>
<p>This will produce:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">   </span>Usage:<span class="w"> </span>run.py<span class="w"> </span>group<span class="w"> </span>feat<span class="w"> </span>load-preset<span class="w"> </span>unpaired-two<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span>PIPELINE_DIR
<span class="w">                                                     </span>Z_THRESH<span class="w"> </span>P_THRESH<span class="w"> </span>PHENO_FILE
<span class="w">                                                     </span>PHENO_SUB<span class="w"> </span>COVARIATE
<span class="w">                                                     </span>MODEL_NAME
<span class="w">   </span>
<span class="w">   </span>Options:
<span class="w">     </span>--output-dir,<span class="w"> </span>--output_dir<span class="w"> </span>TEXT
<span class="w">     </span>--group-participants,<span class="w"> </span>--group_participants<span class="w"> </span>TEXT
<span class="w">     </span>--help<span class="w">                          </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.
</pre></div>
</div>
<p>Following this, you could generate a ready-to-run two-sample unpaired t-test by running the following, assuming the phenotype CSV has a column of participant IDs named “subject_id” and a column named “diagnosis”, which is the covariate you wish to test:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat load-preset unpaired-two /path/to/group_participant_list.txt 2.3 0.05</span>
<span class="go">        /path/to/phenotypic_file.csv subject_id diagnosis grp_analysis1</span>
<span class="go">        --output-dir /path/to/output_dir</span>
</pre></div>
</div>
<p>You will receive a message like this shortly after:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Group-level analysis participant list written:</span>
<span class="go">/path/to/output_dir/group_analysis_participants.txt</span>

<span class="go">CSV file written:</span>
<span class="go">/path/to/output_dir/cpac_group_analysis/grp_analysis1/design_matrix_grp_analysis1.csv</span>

<span class="go">CSV file written:</span>
<span class="go">/path/to/output_dir/cpac_group_analysis/grp_analysis1/contrasts_matrix_grp_analysis1.csv</span>

<span class="go">Group-level analysis configuration YAML file written:</span>
<span class="go">/path/to/output_dir/cpac_group_analysis/grp_analysis1/group_config_grp_analysis1.yml</span>
</pre></div>
</div>
<p>The message indicates that all of the associated files have been generated. Most importantly, it generated a group configuration file that you can use to build and run your model. Once complete, you can review the model generated to make sure it meets your expectations. If you wish to tweak the model generated by a preset, you can load the group configuration file into the model builder (more details below) and make any modifications necessary.</p>
<p>When you are happy with your model, you can go ahead to build the model for each of your selected derivatives:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat build-models /path/to/group_config.yml</span>
</pre></div>
</div>
<p>Once this is complete, a design matrix will have been generated for each derivative, session, scan, and nuisance regression strategy you had in your pipeline directory. These are available for review in the group-level analysis output directory you specified in your group configuration file (or during preset generation). In addition, a <code class="docutils literal notranslate"><span class="pre">contrasts.csv</span></code> file will be generated in the top level of the FSL group model directory (in your selected group-level analysis output directory). This contrasts file will be set up in accordance with the design matrices created for your pipeline outputs, and will look like this:</p>
<figure class="align-default">
<img alt="../_images/ga_contrast_csv.png" src="../_images/ga_contrast_csv.png" />
</figure>
<p>The first column should be filled with labels for the contrasts that you can define - these do not have to follow any particular convention, and can be whatever works best for your experiment.  The remainder of the cells can be populated with contrast weights according to your needs.</p>
<p>If you would like to add f-tests, add each f-test as a column to the CSV with the label <code class="docutils literal notranslate"><span class="pre">f_test_#</span></code> and the assign weights to each contrast to be included in the f-test.</p>
<figure class="align-default">
<img alt="../_images/ga_contrast_ftest.png" src="../_images/ga_contrast_ftest.png" />
</figure>
<p>Once you have specified your contrasts, you can start FSL FEAT or Randomise with the commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat run /path/to/group_config.yml</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat randomise /path/to/group_config.yml</span>
</pre></div>
</div>
</section>
</section>
<section id="c-pac-group-analysis-model-builder">
<h2>C-PAC Group Analysis Model Builder<a class="headerlink" href="#c-pac-group-analysis-model-builder" title="Permalink to this heading">¶</a></h2>
<p>Use the model builder to create an FSL FEAT/Randomise model from scratch, or to modify any of the generated presets.</p>
<section id="from-the-terminal">
<h3>From the terminal<a class="headerlink" href="#from-the-terminal" title="Permalink to this heading">¶</a></h3>
<p>Similar to the pipeline configuration YAML file, the group configuration YAML file allows you to configure your runs with key-value combinations. From terminal, you can quickly generate a default group configuration YAML file template in the directory you are in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpac</span> <span class="n">utils</span> <span class="n">group</span><span class="o">-</span><span class="n">config</span> <span class="n">new</span><span class="o">-</span><span class="n">template</span>
</pre></div>
</div>
<p>This will generate a group configuration file that you can then modify to make your selections. See below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># General Group-Level Analysis Settings</span>
<span class="c1">##############################################################################</span>

<span class="c1"># The main input of group-level analysis- the output directory of your individual-level analysis pipeline run (pre-processing &amp; derivatives for each participant). This should be a path to your C-PAC individual-level run&#39;s pipeline folder, which includes the sub-directories labeled with the participant IDs.</span>
<span class="n">pipeline_dir</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">output_dir</span>


<span class="c1"># (Optional) Full path to a list of participants to be included in the model. You can use this to easily prune participants from your model. In group-level analyses involving phenotype files, this allows you to prune participants without removing them from the phenotype CSV/TSV file. This should be a text file with one subject per line. An easy way to manually create this file is to copy the participant ID column from your phenotype file.</span>
<span class="n">participant_list</span><span class="p">:</span> <span class="kc">None</span>


<span class="c1"># Full path to the directory where CPAC should place group-level analysis outputs and any applicable statistical model files.</span>
<span class="n">output_dir</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">output</span><span class="o">/</span><span class="nb">dir</span>


<span class="c1">#Much like the working directory for individual-level analysis, this is where the intermediate and working files will be stored during your run. This directory can be deleted later on. However, saving this directory allows the group analysis run to skip steps that have been already completed, in the case of re-runs.</span>
<span class="n">work_dir</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="nb">dir</span>


<span class="c1">#Where to write out log information for your group analysis run.</span>
<span class="n">log_dir</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="nb">dir</span>


<span class="c1"># The path to your FSL installation directory. This can be left as &#39;FSLDIR&#39; to grab your system&#39;s default FSL installation. However, if you prefer to use a specific install of FSL, you can enter the path here.</span>
<span class="n">FSLDIR</span><span class="p">:</span> <span class="n">FSLDIR</span>


<span class="c1"># FSL-FEAT</span>
<span class="c1">##############################################################################</span>

<span class="c1"># Run FSL FEAT group-level analysis.</span>
<span class="n">run_fsl_feat</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">1</span><span class="p">]</span>


<span class="c1"># How many statistical models to run in parallel. This number depends on computing resources.</span>
<span class="n">num_models_at_once</span> <span class="p">:</span>  <span class="mi">1</span>


<span class="c1"># Specify a name for the new model.</span>
<span class="n">model_name</span><span class="p">:</span> <span class="n">model_name_here</span>


<span class="c1"># Phenotype file</span>
<span class="c1"># Full path to a .csv or .tsv file containing EV/regressor information for each subject.</span>
<span class="n">pheno_file</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">phenotypic</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">csv</span>


<span class="c1"># Name of the participants column in your phenotype file.</span>
<span class="n">participant_id_label</span><span class="p">:</span> <span class="n">Participant</span>


<span class="c1"># Specify which EVs from your phenotype are categorical or numerical. Of those which are numerical, specify which are to be demeaned.</span>
<span class="c1"># ev_selections: {&#39;demean&#39;: [&#39;Age&#39;], &#39;categorical&#39;: [&#39;Sex&#39;, &#39;Diagnosis&#39;]}</span>
<span class="n">ev_selections</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;demean&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;categorical&#39;</span><span class="p">:</span> <span class="p">[]}</span>


<span class="c1"># Specify the formula to describe your model design. Essentially, including EVs in this formula inserts them into the model. The most basic format to include each EV you select would be &#39;EV + EV + EV + ..&#39;, etc. You can also select to include MeanFD, Measure_Mean, and Custom_ROI_Mean here. See the C-PAC User Guide for more detailed information regarding formatting your design formula.</span>
<span class="c1"># design_formula: Sex + Diagnosis + Age + MeanFD_Jenkinson + Custom_ROI_Mean</span>
<span class="n">design_formula</span><span class="p">:</span>


<span class="c1"># Choose the derivatives to run the group model on.</span>
<span class="c1">#</span>
<span class="c1"># These must be written out as a list, and must be one of the options listed below.</span>
<span class="c1">#</span>
<span class="c1"># For z-scored analyses:</span>
<span class="c1"># &#39;alff_to_standard_zstd&#39;, &#39;alff_to_standard_smooth_zstd&#39;, &#39;falff_to_standard_zstd&#39;, &#39;falff_to_standard_smooth_zstd&#39;, &#39;reho_to_standard_zstd&#39;, &#39;reho_to_standard_smooth_zstd&#39;, &#39;sca_roi_files_to_standard_fisher_zstd&#39;, &#39;sca_roi_files_to_standard_smooth_fisher_zstd&#39;, &#39;vmhc_fisher_zstd_zstat_map&#39;, &#39;dr_tempreg_maps_zstat_files_to_standard&#39;, &#39;dr_tempreg_maps_zstat_files_to_standard_smooth&#39;, &#39;sca_tempreg_maps_zstat_files&#39;, &#39;sca_tempreg_maps_zstat_files_smooth&#39;, &#39;centrality_outputs_zstd&#39;, &#39;centrality_outputs_smoothed_zstd&#39;</span>
<span class="c1">#</span>
<span class="c1"># Example input: derivative_list :  [&#39;alff_to_standard_smooth_zstd&#39;, &#39;sca_roi_files_to_standard_smooth_fisher_zstd&#39;]</span>
<span class="c1">#</span>
<span class="n">derivative_list</span><span class="p">:</span> <span class="p">[]</span>


<span class="c1"># Choose whether to use a group mask or individual-specific mask when calculating the output means to be used as a regressor.</span>
<span class="c1">#</span>
<span class="c1"># This only takes effect if you include the &#39;Measure_Mean&#39; regressor in your Design Matrix Formula.</span>
<span class="n">mean_mask</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Group Mask&#39;</span><span class="p">]</span>


<span class="c1"># Full path to a NIFTI file containing one or more ROI masks. The means of the masked regions will then be computed for each subject&#39;s output and will be included in the model as regressors (one for each ROI in the mask file) if you include &#39;Custom_ROI_Mean&#39; in the Design Matrix Formula.</span>
<span class="c1"># custom_roi_mask: /path/to/mask.nii.gz</span>
<span class="n">custom_roi_mask</span><span class="p">:</span> <span class="kc">None</span>


<span class="c1"># Choose the coding scheme to use when generating your model. &#39;Treatment&#39; encoding is generally considered the typical scheme. Consult the User Guide for more information.</span>
<span class="c1">#</span>
<span class="c1"># Available options:</span>
<span class="c1"># &#39;Treatment&#39;, &#39;Sum&#39;</span>
<span class="c1">#</span>
<span class="n">coding_scheme</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Treatment&#39;</span><span class="p">]</span>


<span class="c1"># Specify whether FSL should model the variance for each group separately.</span>
<span class="c1">#</span>
<span class="c1"># If this option is enabled, you must specify a grouping variable below.</span>
<span class="n">group_sep</span><span class="p">:</span> <span class="n">Off</span>


<span class="c1"># The name of the EV that should be used to group subjects when modeling variances.</span>
<span class="c1">#</span>
<span class="c1"># If you do not wish to model group variances separately, set this value to None.</span>
<span class="n">grouping_var</span><span class="p">:</span> <span class="kc">None</span>


<span class="c1"># Only voxels with a Z-score higher than this value will be considered significant.</span>
<span class="n">z_threshold</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;2.3&#39;</span><span class="p">]</span>


<span class="c1"># Significance threshold (P-value) to use when doing cluster correction for multiple comparisons.</span>
<span class="n">p_threshold</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;0.05&#39;</span><span class="p">]</span>


<span class="c1"># For repeated measures only. Enter the session names in your dataset that you wish to include within the same model (this is for repeated measures / within-subject designs).\n\nTip: These will be the names listed as &quot;unique_id&quot; in the original individual-level participant list, or the labels in the original data directories you marked as {session} while creating the CPAC participant list.</span>
<span class="c1"># sessions_list: [&#39;ses-01&#39;, &#39;ses-02&#39;]</span>
<span class="n">sessions_list</span><span class="p">:</span> <span class="p">[]</span>


<span class="c1"># For repeated measures only. Enter the series names in your dataset that you wish to include within the same model (this is for repeated measures / within-subject designs).\n\nTip: These will be the labels listed under &quot;func:&quot; in the original individual-level participant list, or the labels in the original data directories you marked as {series} while creating the CPAC participant list.</span>
<span class="c1"># series_list: [&#39;task-rest_run-1&#39;, &#39;task-rest_run-2&#39;]</span>
<span class="n">series_list</span><span class="p">:</span> <span class="p">[]</span>


<span class="c1"># Specify your contrasts here. For example, if two of your available contrasts are EV1 and EV0, you can enter contrast descriptions such as &#39;EV1 - EV0 = 0&#39; or &#39;EV1 = 0&#39;. Consult the User Guide for more information about describing contrasts. Alternatively, you can provide your own custom-written contrasts matrix in a CSV file in the &#39;Custom Contrasts Matrix&#39; field below.</span>
<span class="c1"># contrasts: [&#39;C(Diagnosis)[T.ADHD] - C(Diagnosis)[T.Typical] = 0&#39;, &#39;C(Diagnosis)[T.Typical] - C(Diagnosis)[T.ADHD] = 0&#39;]</span>
<span class="n">contrasts</span><span class="p">:</span> <span class="p">[]</span>


<span class="c1"># Optional: A list of f-test strings containing contrasts. If you do not wish to run f-tests, leave this blank.</span>
<span class="n">f_tests</span><span class="p">:</span> <span class="p">[]</span>


<span class="c1"># Optional: Full path to a CSV file which specifies the contrasts you wish to run in group analysis. Consult the User Guide for proper formatting.</span>
<span class="c1"># If you wish to use the standard contrast builder, leave this field blank. If you provide a path for this option, CPAC will use your custom contrasts matrix instead, and will use the f-tests described in this custom file only (ignoring those you have input in the f-tests field above).</span>
<span class="c1"># If you wish to include f-tests, create a new column in your CSV file for each f-test named &#39;f_test_1&#39;, &#39;f_test_2&#39;, .. etc. Then, mark the contrasts you would like to include in each f-test with a 1, and mark the rest 0. Note that you must select at least two contrasts per f-test.</span>
<span class="n">custom_contrasts</span><span class="p">:</span> <span class="kc">None</span>


<span class="c1"># FSL-Randomise</span>
<span class="c1">##############################################################################</span>

<span class="c1"># Run Randomise</span>
<span class="n">run_randomise</span> <span class="p">:</span>  <span class="p">[</span><span class="mi">0</span><span class="p">]</span>


<span class="c1"># Number of permutations you would like to use when building up the null distribution to test against.</span>
<span class="n">randomise_permutation</span> <span class="p">:</span>  <span class="mi">500</span>


<span class="c1"># Cluster-based thresholding corrected for multiple comparisons by using the null distribution of the max (across the image) cluster mask.</span>
<span class="n">randomise_thresh</span> <span class="p">:</span>  <span class="mi">5</span>


<span class="c1"># Demean data temporally before model fitting.</span>
<span class="n">randomise_demean</span> <span class="p">:</span>  <span class="kc">True</span>


<span class="c1"># From the FMRIB FSL-Randomise user guide: TFCE (Threshold-Free Cluster Enhancement) is a new method for finding &#39;clusters&#39; in your data without having to define clusters in a binary way. Cluster-like structures are enhanced but the image remains fundamentally voxelwise.</span>
<span class="n">randomise_tfce</span> <span class="p">:</span>  <span class="kc">True</span>
</pre></div>
</div>
<p>When you are done specifying your model, you can go ahead to build the model for each of your selected derivatives:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat build-models /path/to/group_config.yml</span>
</pre></div>
</div>
<p>Once this is complete, a design matrix will have been generated for each derivative, session, scan, and nuisance regression strategy you had in your pipeline directory. These are available for review in the group-level analysis output directory you specified in your group configuration file (or during preset generation). In addition, a <code class="docutils literal notranslate"><span class="pre">contrasts.csv</span></code> file will be generated in the top level of the FSL group model directory (in your selected group-level analysis output directory). This contrasts file will be set up in accordance with the design matrices created for your pipeline outputs, and will look like this:</p>
<figure class="align-default">
<img alt="../_images/ga_contrast_csv.png" src="../_images/ga_contrast_csv.png" />
</figure>
<p>The first column should be filled with labels for the contrasts that you can define - these do not have to follow any particular convention, and can be whatever works best for your experiment.  The remainder of the cells can be populated with contrast weights according to your needs.</p>
<p>If you would like to add f-tests, add each f-test as a column to the CSV with the label <code class="docutils literal notranslate"><span class="pre">f_test_#</span></code> and the assign weights to each contrast to be included in the f-test.</p>
<figure class="align-default">
<img alt="../_images/ga_contrast_ftest.png" src="../_images/ga_contrast_ftest.png" />
</figure>
<p>Once you have specified your contrasts, you can start FSL FEAT or Randomise with the commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat run /path/to/group_config.yml</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cpac group feat randomise /path/to/group_config.yml</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="group_pybasc">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Bootstrapped Analysis of Stable Clusters (PyBASC)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="group_analysis">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Group-Level Analysis</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2012‒2024, C-PAC Developers. C-PAC is licensed under LGPL-3.0-or-later
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">FSL-FEAT/Randomise Group Analysis</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#group-analysis-fsl-feat-randomise-presets">Group Analysis FSL-FEAT/Randomise Presets</a><ul>
<li><a class="reference internal" href="#from-terminal">From Terminal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-pac-group-analysis-model-builder">C-PAC Group Analysis Model Builder</a><ul>
<li><a class="reference internal" href="#from-the-terminal">From the terminal</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=68ced503"></script>
    <script src="../_static/doctools.js?v=d248f5b3"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/hideEmptyHighlights.js?v=af317073"></script>
    <script defer="defer" src="../_static/versionList.js?v=f2bc52a7"></script>
    </body>
</html>