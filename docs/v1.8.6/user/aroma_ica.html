<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex" /><link rel="search" title="Search" href="../search" /><link rel="next" title="Computable Derivatives" href="derivatives" /><link rel="prev" title="Longitudinal Preprocessing" href="longitudinal" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2023.09.10 -->
        <title>ICA-AROMA (Independent Component Analysis - Automatic Removal of Motion Artifacts) - C-PAC 1.8.6 Beta documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a96c6ba1" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fe2d11c3" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index"><div class="brand">C-PAC 1.8.6 Beta documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/cpac_logo_vertical.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">C-PAC 1.8.6 Beta documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="release_notes/v1.8.6">Latest Release: Version 1.8.6 Beta (Jan 15, 2024)</a></li>
<li class="toctree-l2"><a class="reference internal" href="quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="pipelines/pipeline_config">3. Select Your Pipeline</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 3. Select Your Pipeline</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="pipelines/preconfig">Pre-configured Pipelines</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/configurable-settings">Configurable Settings</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Configurable Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l4"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l4"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/data-environment">Data Management and Environment Settings</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Data Management and Environment Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="compute_config">Computer Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="output_config">Output Settings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/pre-and-post">Pre- and post-processing</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Pre- and post-processing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/derivatives">Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="sca">Seed-based Correlation Analysis (SCA) and Dual Regression - Analyze the connectivity between brain regions.</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">Voxel-mirrored Homotopic Connectivity (VMHC) - Investigate connectivity between hemispheres.</a></li>
<li class="toctree-l4"><a class="reference internal" href="alff">Amplitude of Low Frequency Fluctuations (ALFF) and fractional ALFF (fALFF) - Measure the power of slow fluctuations in brain activity.</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">Regional Homogeneity (ReHo) - Measure the similarity of activity patterns across neighboring voxels.</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality - Analyze the structure of functional networks.</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/quality">Quality Control</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Quality Control</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="qc_interface">QC Pages - Visual Data Quality Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="xcpqc">XCP QC files - eXtensible Connectivity Pipeline-style quality control files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="preprocessing">4. Pre-Process Your Data</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 4. Pre-Process Your Data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="longitudinal">Longitudinal Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="nuisance">Nuisance Corrections</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">ICA Denoising</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="derivatives">5. Compute Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 5. Compute Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l3"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l3"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l3"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running">6. All Run Options</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="group_analysis">7. Run Group Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 7. Run Group Analysis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="group_fsl_feat">FSL FEAT &amp; Randomise</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_pybasc">Bootstrapped Analysis of Stable Clusters (PyBASC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_isc">Inter-subject Correlation (ISC) &amp; Inter-subject Functional Correlation (ISFC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_qpp">Quasi-Periodic Patterns (QPP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="tutorials/index">9. Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of 9. Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials/observed_usage/index">1. Tutorial: optimizing memory estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="help">10. Troubleshoot</a></li>
<li class="toctree-l2"><a class="reference internal" href="rnotes">11. Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix#benchmark-package">Benchmark Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions">C-PAC versions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/index">Developer Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Developer Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/installation">Installing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/pipeline">Pipeline Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/templates">Templates and Atlases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/random_state">Random State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflow_documentation">Workflow Documentation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/workflows/index">Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Workflows</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/cpac_pipeline">C-PAC Pipeline Construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/anat_preproc">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/func_preproc">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/seg_preproc">Segmentation Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/sca">Seed Based Correlation Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/basc">Bootstrap Analysis of Stable Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/nuisance">Nuisance Signal Removal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/alff">Amplitude of Low Frequency Fluctuations(ALFF) and fractional ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/vmhc">Voxel Mirrored Homotopic Connectivity Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/reho">Regional Homogeneity Approach to fMRI data analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/generate_motion_statistics">Generate Motion and Power Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/scrubbing">Scrubbing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/group_analysis">Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/easy_thresh">Easy thresh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/median_angle">Median Angle Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/timeseries">Timeseries Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/network_centrality">Network Centrality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflows/index#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/xcpqc">eXtensible Connectivity Pipeline-style quality control files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/utils">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing">Testing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/continuous_integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/deprecating">Deprecating a version of C-PAC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license">License</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="ica-aroma-independent-component-analysis-automatic-removal-of-motion-artifacts">
<h1>ICA-AROMA (Independent Component Analysis - Automatic Removal of Motion Artifacts)<a class="headerlink" href="#ica-aroma-independent-component-analysis-automatic-removal-of-motion-artifacts" title="Permalink to this heading">#</a></h1>
<section id="introduction">
<h2>INTRODUCTION<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>Motion artifacts, when induced in fMRI can cause true effects to be classified into noise, or correlate motion artifacts to true effects.While most methods for dealing with the artifacts may result in reduction of temporal freedom or destroy autocorrelation structure, and such drawbacks can be overcome by using AROMA-ICA().
ICA-AROMA concerns a data-driven method to identify and remove motion-related independent components from fMRI data.To that end it exploits a small, but robust set of theoretically motivated features, preventing the need for classifier re-training and therefore providing direct and easy applicability.</p>
</section>
<section id="computation-and-analysis-consideration">
<h2>COMPUTATION AND ANALYSIS CONSIDERATION:<a class="headerlink" href="#computation-and-analysis-consideration" title="Permalink to this heading">#</a></h2>
<p>This method uses an ICA-based strategy for Automatic Removal of Motion Artifacts (ICA-AROMA) that uses a small (n=4), but robust set of theoretically motivated temporal and spatial features. Our strategy does not require classifier re-training, retains the data’s autocorrelation structure and largely preserves temporal degrees of freedom.ICA-AROMA identified motion components with high accuracy and robustness as illustrated by leave-N-out cross-validation.(Pruim R1 et.al.,NeuroImage,2015). C-PAC’s implementation of Aroma-ICA involves using the nipype’s interface to the package developed in FSL (<a class="reference external" href="https://github.com/maartenmennes/ICA-AROMA">https://github.com/maartenmennes/ICA-AROMA</a>). The output directory includes the denoised file along with the melodic directory, statistics and other feature classification texts. The movement parameters necessary for running this script is obtained using FSL’s McFLIRT, and the mask file is obtained using FSL’s BET (as per suggestion).</p>
</section>
<section id="installing-aroma-ica">
<h2>INSTALLING AROMA-ICA:<a class="headerlink" href="#installing-aroma-ica" title="Permalink to this heading">#</a></h2>
<p>To run AROMA-ICA using C-PAC, it is essential to download and set up AROMA-ICA in your system. This can be accomplished by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ICA</span><span class="o">-</span><span class="n">AROMA</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="s2">&quot;https://github.com/rhr-pruim/ICA-AROMA/archive/v0.4.3-beta.tar.gz&quot;</span> <span class="o">|</span> <span class="n">tar</span> <span class="o">-</span><span class="n">xzC</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ICA</span><span class="o">-</span><span class="n">AROMA</span> <span class="o">--</span><span class="n">strip</span><span class="o">-</span><span class="n">components</span> <span class="mi">1</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">ICA</span><span class="o">-</span><span class="n">AROMA</span><span class="o">/</span><span class="n">ICA_AROMA</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section id="configuring-c-pac-to-run-aroma-ica">
<h2>CONFIGURING C-PAC TO RUN AROMA-ICA:<a class="headerlink" href="#configuring-c-pac-to-run-aroma-ica" title="Permalink to this heading">#</a></h2>
<figure class="align-default">
<img alt="../_images/ICA-AROMA_gui.png" src="../_images/ICA-AROMA_gui.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>Run Aroma-ICA:</strong> Choose “On” to run Aroma-ICA.</p></li>
<li><p><strong>Denoise type:</strong> Choose between ‘nonaggr’ for non-aggressively denoised file and ‘aggr’ aggressively denoised file.</p></li>
</ol>
</section>
<section id="configuring-aroma-ica-using-a-yaml-file">
<h2>CONFIGURING AROMA-ICA USING A YAML FILE:<a class="headerlink" href="#configuring-aroma-ica-using-a-yaml-file" title="Permalink to this heading">#</a></h2>
<p>The following nested key/value pairs that will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="c1">#   - if &#39;single_step_resampling_from_stc&#39;, &#39;template&#39; is the only valid option for ``nuisance_corrections: 2-nuisance_regression: space``</span>
<span class="w">        </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;default&#39;</span>


<span class="nt">functional_preproc</span><span class="p">:</span>

<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">update_header</span><span class="p">:</span><span class="w"> </span>

<span class="w">    </span><span class="c1"># Convert raw data from LPI to RPI</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">truncation</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># First timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is 0 (beginning of timeseries).</span>
<span class="w">    </span><span class="c1"># First timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">start_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># Last timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is None or End (end of timeseries).</span>
<span class="w">    </span><span class="c1"># Last timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">stop_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">scaling</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Scale functional raw data, usually used in rodent pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">    </span><span class="c1"># Scale the size of the dataset voxels by the factor.</span>
<span class="w">    </span><span class="nt">scaling_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">  </span><span class="nt">despiking</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Run AFNI 3dDespike</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">slice_timing_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Interpolate voxel time courses so they are sampled at the same time points.</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># use specified slice time pattern rather than one in header</span>
<span class="w">    </span><span class="nt">tpattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">    </span><span class="c1"># align each slice to given time offset</span>
<span class="w">    </span><span class="c1"># The default alignment time is the average of the &#39;tpattern&#39; values (either from the dataset header or from the tpattern option).</span>
<span class="w">    </span><span class="nt">tzero</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">motion_estimates_and_correction</span><span class="p">:</span>
<span class="w">  </span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_estimates</span><span class="p">:</span><span class="w"> </span>

<span class="w">      </span><span class="c1"># calculate motion statistics BEFORE slice-timing correction</span>
<span class="w">      </span><span class="nt">calculate_motion_first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># calculate motion statistics AFTER motion correction</span>
<span class="w">      </span><span class="nt">calculate_motion_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_correction</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># using: [&#39;3dvolreg&#39;, &#39;mcflirt&#39;]</span>
<span class="w">      </span><span class="c1"># Forking is currently broken for this option.</span>
<span class="w">      </span><span class="c1"># Please use separate configs if you want to use each of 3dvolreg and mcflirt.</span>
<span class="w">      </span><span class="c1"># Follow https://github.com/FCP-INDI/C-PAC/issues/1935 to see when this issue is resolved.</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3dvolreg&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># option parameters</span>
<span class="w">      </span><span class="nt">AFNI-3dvolreg</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># This option is useful when aligning high-resolution datasets that may need more alignment than a few voxels.</span>
<span class="w">        </span><span class="nt">functional_volreg_twopass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference. Options: mean, median, selected_volume, fmriprep_reference</span>
<span class="w">      </span><span class="nt">motion_correction_reference</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;mean&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference volume</span>
<span class="w">      </span><span class="nt">motion_correction_reference_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="nt">motion_estimate_filter</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Filter physiological (respiration) artifacts from the head motion estimates.</span>
<span class="w">      </span><span class="c1"># Adapted from DCAN Labs filter.</span>
<span class="w">      </span><span class="c1">#     https://www.ohsu.edu/school-of-medicine/developmental-cognition-and-neuroimaging-lab</span>
<span class="w">      </span><span class="c1">#     https://www.biorxiv.org/content/10.1101/337360v1.full.pdf</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notch&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Highest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For notch filter.</span>
<span class="w">          </span><span class="nt">breathing_rate_max</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># notch filter direct customization parameters</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min and breathing_rate_max are provided,</span>
<span class="w">          </span><span class="c1"># the following parameters will be ignored.</span>

<span class="w">          </span><span class="c1"># the center frequency of the notch filter</span>
<span class="w">          </span><span class="nt">center_frequency</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># the width of the notch filter</span>
<span class="w">          </span><span class="nt">filter_bandwidth</span><span class="p">:</span>

<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lowpass&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># lowpass filter direct customization parameter</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min is provided, the following</span>
<span class="w">          </span><span class="c1"># parameter will be ignored.</span>

<span class="w">          </span><span class="c1"># the frequency cutoff of the filter</span>
<span class="w">          </span><span class="nt">lowpass_cutoff</span><span class="p">:</span>

<span class="w">  </span><span class="nt">distortion_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># using: [&#39;PhaseDiff&#39;, &#39;Blip&#39;, &#39;Blip-FSL-TOPUP&#39;]</span>
<span class="w">    </span><span class="c1">#   PhaseDiff - Perform field map correction using a single phase difference image, a subtraction of the two phase images from each echo. Default scanner for this method is SIEMENS.</span>
<span class="w">    </span><span class="c1">#   Blip - Uses AFNI 3dQWarp to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="c1">#   Blip-FSL-TOPUP - Uses FSL TOPUP to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;PhaseDiff&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;Blip&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># option parameters</span>
<span class="w">    </span><span class="nt">PhaseDiff</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Since the quality of the distortion heavily relies on the skull-stripping step, we provide a choice of method (&#39;AFNI&#39; for AFNI 3dSkullStrip or &#39;BET&#39; for FSL BET).</span>
<span class="w">      </span><span class="c1"># Options: &#39;BET&#39; or &#39;AFNI&#39;</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_option</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;BET&#39;</span>

<span class="w">      </span><span class="c1"># Set the fraction value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.5.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_BET_frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>

<span class="w">      </span><span class="c1"># Set the threshold value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.6.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_AFNI_threshold</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="w">      </span>
<span class="w">    </span><span class="nt">Blip-FSL-TOPUP</span><span class="p">:</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># (approximate) resolution (in mm) of warp basis for the different sub-sampling levels, default 10</span>
<span class="w">      </span><span class="nt">warpres</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># sub-sampling scheme, default 1</span>
<span class="w">      </span><span class="nt">subsamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># FWHM (in mm) of gaussian smoothing kernel, default 8</span>
<span class="w">      </span><span class="nt">fwhm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Max # of non-linear iterations, default 5</span>
<span class="w">      </span><span class="nt">miter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Weight of regularisation, default depending on --ssqlambda and --regmod switches. See user documentation.</span>
<span class="w">      </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), lambda is weighted by current ssq, default 1</span>
<span class="w">      </span><span class="nt">ssqlambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Model for regularisation of warp-field [membrane_energy bending_energy], default bending_energy</span>
<span class="w">      </span><span class="nt">regmod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bending_energy</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Estimate movements if set, default 1 (true)</span>
<span class="w">      </span><span class="nt">estmov</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Minimisation method 0=Levenberg-Marquardt, 1=Scaled Conjugate Gradient, default 0 (LM)</span>
<span class="w">      </span><span class="nt">minmet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Order of spline, 2-&gt;Qadratic spline, 3-&gt;Cubic spline. Default=3</span>
<span class="w">      </span><span class="nt">splineorder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Precision for representing Hessian, double or float. Default double</span>
<span class="w">      </span><span class="nt">numprec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># Image interpolation model, linear or spline. Default spline</span>
<span class="w">      </span><span class="nt">interp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spline</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), the images are individually scaled to a common mean, default 0 (false)</span>
<span class="w">      </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span>
<span class="w">      </span><span class="c1"># If set (=1), the calculations are done in a different grid, default 1 (true)</span>
<span class="w">      </span><span class="nt">regrid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">  </span><span class="nt">func_masking</span><span class="p">:</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">    </span><span class="c1"># using: [&#39;AFNI&#39;, &#39;FSL&#39;, &#39;FSL_AFNI&#39;, &#39;Anatomical_Refined&#39;, &#39;Anatomical_Based&#39;, &#39;Anatomical_Resampled&#39;, &#39;CCS_Anatomical_Refined&#39;]</span>

<span class="w">    </span><span class="c1"># FSL_AFNI: fMRIPrep-style BOLD mask. Ref: https://github.com/nipreps/niworkflows/blob/a221f612/niworkflows/func/util.py#L246-L514</span>
<span class="w">    </span><span class="c1"># Anatomical_Refined: 1. binarize anat mask, in case it is not a binary mask. 2. fill holes of anat mask 3. init_bold_mask : input raw func → dilate init func brain mask 4. refined_bold_mask : input motion corrected func → dilate anatomical mask 5. get final func mask</span>
<span class="w">    </span><span class="c1"># Anatomical_Based: Generate the BOLD mask by basing it off of the anatomical brain mask. Adapted from DCAN Lab&#39;s BOLD mask method from the ABCD pipeline.</span>
<span class="w">    </span><span class="c1"># Anatomical_Resampled: Resample anatomical brain mask in standard space to get BOLD brain mask in standard space. Adapted from DCAN Lab&#39;s BOLD mask method from the ABCD pipeline. (&quot;Create fMRI resolution standard space files for T1w image, wmparc, and brain mask […] don&#39;t use FLIRT to do spline interpolation with -applyisoxfm for the 2mm and 1mm cases because it doesn&#39;t know the peculiarities of the MNI template FOVs&quot;)</span>
<span class="w">    </span><span class="c1"># CCS_Anatomical_Refined: Generate the BOLD mask by basing it off of the anatomical brain. Adapted from the BOLD mask method from the CCS pipeline.</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;AFNI&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">FSL-BET</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Apply to 4D FMRI data, if bold_bet_functional_mean_boolean : Off.</span>
<span class="w">      </span><span class="c1"># Mutually exclusive with functional, reduce_bias, robust, padding, remove_eyes, surfaces</span>
<span class="w">      </span><span class="c1"># It must be &#39;on&#39; if select &#39;reduce_bias&#39;, &#39;robust&#39;, &#39;padding&#39;, &#39;remove_eyes&#39;, or &#39;bet_surfaces&#39; on</span>
<span class="w">      </span><span class="nt">functional_mean_boolean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Set an intensity threshold to improve skull stripping performances of FSL BET on rodent scans.</span>
<span class="w">      </span><span class="nt">functional_mean_thr</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>
<span class="w">        </span><span class="nt">threshold_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">98</span>

<span class="w">      </span><span class="c1"># Bias correct the functional mean image to improve skull stripping performances of FSL BET on rodent scans</span>
<span class="w">      </span><span class="nt">functional_mean_bias_correction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Set the threshold value controling the brain vs non-brain voxels.</span>
<span class="w">      </span><span class="nt">frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>

<span class="w">      </span><span class="c1"># Mesh created along with skull stripping</span>
<span class="w">      </span><span class="nt">mesh_boolean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Create a surface outline image</span>
<span class="w">      </span><span class="nt">outline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Add padding to the end of the image, improving BET.Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">padding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Integer value of head radius</span>
<span class="w">      </span><span class="nt">radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="c1"># Reduce bias and cleanup neck. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">reduce_bias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Eyes and optic nerve cleanup. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">remove_eyes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Robust brain center estimation. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">robust</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Create a skull image</span>
<span class="w">      </span><span class="nt">skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Gets additional skull and scalp surfaces by running bet2 and betsurf. This is mutually exclusive with reduce_bias, robust, padding, remove_eyes</span>
<span class="w">      </span><span class="nt">surfaces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Apply thresholding to segmented brain image and mask</span>
<span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Vertical gradient in fractional intensity threshold (-1,1)</span>
<span class="w">      </span><span class="nt">vertical_gradient</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>

<span class="w">    </span><span class="nt">FSL_AFNI</span><span class="p">:</span>

<span class="w">      </span><span class="nt">bold_ref</span><span class="p">:</span>

<span class="w">      </span><span class="nt">brain_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain_mask.nii.gz</span>

<span class="w">      </span><span class="nt">brain_probseg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain_mask.nii.gz</span>

<span class="w">    </span><span class="nt">Anatomical_Refined</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Choose whether or not to dilate the anatomical mask if you choose &#39;Anatomical_Refined&#39; as the functional masking option. It will dilate one voxel if enabled.</span>
<span class="w">      </span><span class="nt">anatomical_mask_dilation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="w">    </span><span class="c1"># Apply functional mask in native space</span>
<span class="w">    </span><span class="nt">apply_func_mask_in_native_space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">generate_func_mean</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Generate mean functional image</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">normalize_func</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Normalize functional image</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">coreg_prep</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Generate sbref</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="nt">nuisance_corrections</span><span class="p">:</span>

<span class="w">  </span><span class="nt">1-ICA-AROMA</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># Types of denoising strategy:</span>
<span class="w">    </span><span class="c1">#   nonaggr: nonaggressive-partial component regression</span>
<span class="w">    </span><span class="c1">#   aggr:    aggressive denoising</span>
<span class="w">    </span><span class="nt">denoising_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nonaggr</span>
</pre></div>
</div>
</section>
<section id="external-resources">
<h2>EXTERNAL RESOURCES:<a class="headerlink" href="#external-resources" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>AROMA-ICA python script: <a class="reference external" href="https://github.com/maartenmennes/ICA-AROMA">https://github.com/maartenmennes/ICA-AROMA</a></p></li>
</ul>
</div></blockquote>
</section>
<section id="references">
<h2>REFERENCES:<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Neuroimage. 2015 May 15;112:267-277. doi: 10.1016/j.neuroimage.2015.02.064. Epub 2015 Mar 11.</p></li>
<li><p><a class="reference external" href="https://github.com/maartenmennes/ICA-AROMA/blob/master/Manual.pdf">https://github.com/maartenmennes/ICA-AROMA/blob/master/Manual.pdf</a></p></li>
</ul>
</div></blockquote>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="derivatives">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Computable Derivatives</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="longitudinal">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Longitudinal Preprocessing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2012‒2023, C-PAC Developers. C-PAC is licensed under LGPL-3.0-or-later
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">ICA-AROMA (Independent Component Analysis - Automatic Removal of Motion Artifacts)</a><ul>
<li><a class="reference internal" href="#introduction">INTRODUCTION</a></li>
<li><a class="reference internal" href="#computation-and-analysis-consideration">COMPUTATION AND ANALYSIS CONSIDERATION:</a></li>
<li><a class="reference internal" href="#installing-aroma-ica">INSTALLING AROMA-ICA:</a></li>
<li><a class="reference internal" href="#configuring-c-pac-to-run-aroma-ica">CONFIGURING C-PAC TO RUN AROMA-ICA:</a></li>
<li><a class="reference internal" href="#configuring-aroma-ica-using-a-yaml-file">CONFIGURING AROMA-ICA USING A YAML FILE:</a></li>
<li><a class="reference internal" href="#external-resources">EXTERNAL RESOURCES:</a></li>
<li><a class="reference internal" href="#references">REFERENCES:</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b075f932"></script>
    <script src="../_static/doctools.js?v=d248f5b3"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/hideEmptyHighlights.js?v=af317073"></script>
    <script defer="defer" src="../_static/versionList.js?v=f2bc52a7"></script>
    </body>
</html>