
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Scrubbing &#8212; C-PAC 1.8.5.dev1 Beta documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex" />
    <link rel="search" title="Search" href="../../search" />
    <link rel="next" title="Group Analysis" href="group_analysis" />
    <link rel="prev" title="Generate Motion and Power Statistics" href="generate_motion_statistics" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="group_analysis" title="Group Analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="generate_motion_statistics" title="Generate Motion and Power Statistics"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index">C-PAC 1.8.5.dev1 Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index" >Developer Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index" accesskey="U">Workflows</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Scrubbing</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-CPAC.scrubbing">
<span id="scrubbing"></span><h1>Scrubbing<a class="headerlink" href="#module-CPAC.scrubbing" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="CPAC.scrubbing.create_scrubbing_preproc">
<span class="sig-prename descclassname"><span class="pre">CPAC.scrubbing.</span></span><span class="sig-name descname"><span class="pre">create_scrubbing_preproc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wf_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'scrubbing'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/CPAC/scrubbing/scrubbing#create_scrubbing_preproc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#CPAC.scrubbing.create_scrubbing_preproc" title="Permalink to this definition">¶</a></dt>
<dd><p>This workflow essentially takes the list of offending timepoints that are to be removed
and removes it from the motion corrected input image. Also, it removes the information
of discarded time points from the movement parameters file obtained during motion correction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>wf_name</strong><span class="classifier">string</span></dt><dd><p>Name of the workflow</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>scrub</strong><span class="classifier">object</span></dt><dd><p>Scrubbing workfow object</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p><a class="reference external" href="https://github.com/openconnectome/C-PAC/blob/master/CPAC/scrubbing/scrubbing.py">Source</a></p>
<p>Workflow Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputspec</span><span class="o">.</span><span class="n">frames_in_ID</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">mat</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">file</span> <span class="n">containing</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">time</span> <span class="n">points</span> <span class="k">for</span> <span class="n">which</span> <span class="n">FD</span> <span class="o">&gt;</span> <span class="n">threshold</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">movement_parameters</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">mat</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">file</span> <span class="n">containing</span> <span class="mi">1</span><span class="n">D</span> <span class="n">file</span> <span class="n">containing</span> <span class="n">six</span> <span class="n">movement</span><span class="o">/</span><span class="n">motion</span> <span class="n">parameters</span>
    <span class="p">(</span><span class="mi">3</span> <span class="n">Translation</span><span class="p">,</span> <span class="mi">3</span> <span class="n">Rotations</span><span class="p">)</span> <span class="ow">in</span> <span class="n">different</span> <span class="n">columns</span> 
<span class="n">inputspec</span><span class="o">.</span><span class="n">preprocessed</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">preprocessed</span> <span class="nb">input</span> <span class="n">image</span> <span class="n">path</span>
</pre></div>
</div>
<p>Workflow Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputspec</span><span class="o">.</span><span class="n">preprocessed</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">preprocessed</span> <span class="n">scrubbed</span> <span class="n">output</span> <span class="n">image</span> 
<span class="n">outputspec</span><span class="o">.</span><span class="n">scrubbed_movement_parameters</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">mat</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="mi">1</span><span class="n">D</span> <span class="n">file</span> <span class="n">containing</span> <span class="n">six</span> <span class="n">movement</span><span class="o">/</span><span class="n">motion</span> <span class="n">parameters</span>
    <span class="k">for</span> <span class="n">the</span> <span class="n">timepoints</span> <span class="n">which</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">discarded</span> <span class="n">by</span> <span class="n">scrubbing</span>
</pre></div>
</div>
<p>Order of Commands:</p>
<ul>
<li><p>Remove all movement parameters for all the time frames other than those that are present
in the frames_in_1D file</p></li>
<li><p>Remove the discarded timepoints from the input image. For details see <a class="reference external" href="http://afni.nimh.nih.gov/pub/dist/doc/program_help/3dcalc.html">3dcalc</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">3</span><span class="n">dcalc</span> <span class="o">-</span><span class="n">a</span> <span class="n">bandpassed_demeaned_filtered</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">287</span><span class="p">,</span><span class="mi">288</span><span class="p">,</span><span class="mi">289</span><span class="p">,</span><span class="mi">290</span><span class="p">,</span><span class="mi">291</span><span class="p">,</span><span class="mi">292</span><span class="p">,</span><span class="mi">293</span><span class="p">,</span><span class="mi">294</span><span class="p">,</span><span class="mi">295</span><span class="p">]</span> 
       <span class="o">-</span><span class="n">expr</span> <span class="s1">&#39;a&#39;</span> <span class="o">-</span><span class="n">prefix</span> <span class="n">bandpassed_demeaned_filtered_3dc</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</li>
</ul>
<p>High Level Workflow Graph:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<a class="reference internal image-reference" href="images/generated/scrubbing.png"><img alt="images/generated/scrubbing.png" src="images/generated/scrubbing.png" style="width: 500px;" /></a>
<p>Detailed Workflow Graph:</p>
<a class="reference internal image-reference" href="images/generated/scrubbing_detailed.png"><img alt="images/generated/scrubbing_detailed.png" src="images/generated/scrubbing_detailed.png" style="width: 500px;" /></a>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CPAC.scrubbing.get_indx">
<span class="sig-prename descclassname"><span class="pre">CPAC.scrubbing.</span></span><span class="sig-name descname"><span class="pre">get_indx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scrub_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frames_in_1D_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/CPAC/scrubbing/scrubbing#get_indx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#CPAC.scrubbing.get_indx" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to get the list of time 
frames that are to be included</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>in_file</strong><span class="classifier">string</span></dt><dd><p>path to file containing the valid time frames</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>scrub_input_string</strong><span class="classifier">string</span></dt><dd><p>input string for 3dCalc in scrubbing workflow,
looks something like ” 4dfile.nii.gz[0,1,2,..100] “</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="CPAC.scrubbing.get_mov_parameters">
<span class="sig-prename descclassname"><span class="pre">CPAC.scrubbing.</span></span><span class="sig-name descname"><span class="pre">get_mov_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">infile_a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infile_b</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/CPAC/scrubbing/scrubbing#get_mov_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#CPAC.scrubbing.get_mov_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to get the new movement parameters
file after removing the offending time frames 
(i.e., those exceeding FD 0.5mm/0.2mm threshold)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>infile_a</strong><span class="classifier">string</span></dt><dd><p>path to file containing the valid time frames</p>
</dd>
<dt><strong>infile_b</strong><span class="classifier">string</span></dt><dd><p>path to the file containing  motion parameters</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>out_file</strong><span class="classifier">string</span></dt><dd><p>path to the file containing motion parameters
for the valid time frames</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index">
              <img class="logo" src="../../_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index">Table of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user/index">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index">Developer Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation">Installing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline">Pipeline Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../templates">Templates and Atlases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random_state">Random State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflow_documentation">Workflow Documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index">Workflows</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cpac_pipeline">C-PAC Pipeline Construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="anat_preproc">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="func_preproc">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="seg_preproc">Segmentation Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="sca">Seed Based Correlation Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="basc">Bootstrap Analysis of Stable Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="nuisance">Nuisance Signal Removal</a></li>
<li class="toctree-l3"><a class="reference internal" href="alff">Amplitude of Low Frequency Fluctuations(ALFF) and fractional ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="vmhc">Voxel Mirrored Homotopic Connectivity Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="reho">Regional Homogeneity Approach to fMRI data analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="generate_motion_statistics">Generate Motion and Power Statistics</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Scrubbing</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_analysis">Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="easy_thresh">Easy thresh</a></li>
<li class="toctree-l3"><a class="reference internal" href="mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="median_angle">Median Angle Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="timeseries">Timeseries Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="network_centrality">Network Centrality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xcpqc">eXtensible Connectivity Pipeline-style quality control files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing">Testing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../continuous_integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deprecating">Deprecating a version of C-PAC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../license">License</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="group_analysis" title="Group Analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="generate_motion_statistics" title="Generate Motion and Power Statistics"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index">C-PAC 1.8.5.dev1 Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index" >Developer Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index" >Workflows</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Scrubbing</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2012‒2022, C-PAC Developers. C-PAC is licensed under LGPL-3.0-or-later.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.0.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>
    <script defer src="https://fcp-indi.github.io/scripts/versionList.js"></script>

  </body>
</html>