
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Usage: cpac run &#8212; C-PAC 1.8.5.dev Beta documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex" />
    <link rel="search" title="Search" href="../../search" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index">C-PAC 1.8.5.dev Beta documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Usage: cpac run</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="usage-cpac-run">
<h1>Usage: cpac run<a class="headerlink" href="#usage-cpac-run" title="Permalink to this headline">¬∂</a></h1>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cpac run --help

<span class="go">Loading üê≥ Docker</span>
<span class="go">Could not create /outputs/output. Binding /outputs/output to /home/circleci/build/outputs/output instead.</span>
<span class="go">Could not create /outputs/logs. Binding /outputs/logs to /home/circleci/build/outputs/logs instead.</span>
<span class="go">Could not create /outputs/crash. Binding /outputs/crash to /home/circleci/build/outputs/crash instead.</span>
<span class="go">Could not create /outputs/working. Binding /outputs/working to /home/circleci/build/outputs/working instead.</span>
<span class="go">Loading üê≥ fcpindi/c-pac:latest as &quot;circleci (3434)&quot; with these directory bindings:</span>
<span class="go">  local                                 Docker                mode</span>
<span class="go">  ------------------------------------  --------------------  ------</span>
<span class="go">  /etc/passwd                           /etc/passwd           ro</span>
<span class="go">  /home/circleci/.cpac                  /home/circleci/.cpac  rw</span>
<span class="go">  /home/circleci/build                  /home/circleci/build  rw</span>
<span class="go">  /home/circleci/build/outputs/output   /outputs/output       rw</span>
<span class="go">  /home/circleci/build/outputs/logs     /outputs/logs         rw</span>
<span class="go">  /home/circleci/build/outputs/crash    /outputs/crash        rw</span>
<span class="go">  /home/circleci/build/outputs/working  /outputs/working      rw</span>
<span class="go">Logging messages will refer to the Docker paths.</span>

<span class="go">usage: run.py [-h] [--pipeline_file PIPELINE_FILE] [--group_file GROUP_FILE]</span>
<span class="go">              [--data_config_file DATA_CONFIG_FILE] [--preconfig PRECONFIG]</span>
<span class="go">              [--aws_input_creds AWS_INPUT_CREDS]</span>
<span class="go">              [--aws_output_creds AWS_OUTPUT_CREDS] [--n_cpus N_CPUS]</span>
<span class="go">              [--mem_mb MEM_MB] [--mem_gb MEM_GB]</span>
<span class="go">              [--runtime_usage RUNTIME_USAGE]</span>
<span class="go">              [--runtime_buffer RUNTIME_BUFFER]</span>
<span class="go">              [--num_ants_threads NUM_ANTS_THREADS]</span>
<span class="go">              [--random_seed RANDOM_SEED]</span>
<span class="go">              [--save_working_dir [SAVE_WORKING_DIR]] [--disable_file_logging]</span>
<span class="go">              [--participant_label PARTICIPANT_LABEL [PARTICIPANT_LABEL ...]]</span>
<span class="go">              [--participant_ndx PARTICIPANT_NDX] [--T1w_label T1W_LABEL]</span>
<span class="go">              [--bold_label BOLD_LABEL [BOLD_LABEL ...]] [-v]</span>
<span class="go">              [--bids_validator_config BIDS_VALIDATOR_CONFIG]</span>
<span class="go">              [--skip_bids_validator] [--anat_only] [--tracking_opt-out]</span>
<span class="go">              [--monitoring]</span>
<span class="go">              bids_dir output_dir {participant,group,test_config,cli}</span>

<span class="go">C-PAC Pipeline Runner. Copyright (C) 2022 C-PAC Developers. This program comes</span>
<span class="go">with ABSOLUTELY NO WARRANTY. This is free software, and you are welcome to</span>
<span class="go">redistribute it under certain conditions. For details, see https://fcp-</span>
<span class="go">indi.github.io/docs/v1.8.4/license or the COPYING and COPYING.LESSER files</span>
<span class="go">included in the source code.</span>

<span class="go">positional arguments:</span>
<span class="go">  bids_dir              The directory with the input dataset formatted</span>
<span class="go">                        according to the BIDS standard. Use the format</span>
<span class="go">                        s3://bucket/path/to/bidsdir to read data directly from</span>
<span class="go">                        an S3 bucket. This may require AWS S3 credentials</span>
<span class="go">                        specified via the --aws_input_creds option.</span>
<span class="go">  output_dir            The directory where the output files should be stored.</span>
<span class="go">                        If you are running group level analysis this folder</span>
<span class="go">                        should be prepopulated with the results of the</span>
<span class="go">                        participant level analysis. Use the format</span>
<span class="go">                        s3://bucket/path/to/bidsdir to write data directly to</span>
<span class="go">                        an S3 bucket. This may require AWS S3 credentials</span>
<span class="go">                        specified via the --aws_output_creds option.</span>
<span class="go">  {participant,group,test_config,cli}</span>
<span class="go">                        Level of the analysis that will be performed. Multiple</span>
<span class="go">                        participant level analyses can be run independently</span>
<span class="go">                        (in parallel) using the same output_dir. test_config</span>
<span class="go">                        will run through the entire configuration process but</span>
<span class="go">                        will not execute the pipeline.</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  --pipeline_file PIPELINE_FILE</span>
<span class="go">                        Path for the pipeline configuration file to use. Use</span>
<span class="go">                        the format s3://bucket/path/to/pipeline_file to read</span>
<span class="go">                        data directly from an S3 bucket. This may require AWS</span>
<span class="go">                        S3 credentials specified via the --aws_input_creds</span>
<span class="go">                        option.</span>
<span class="go">  --group_file GROUP_FILE</span>
<span class="go">                        Path for the group analysis configuration file to use.</span>
<span class="go">                        Use the format s3://bucket/path/to/pipeline_file to</span>
<span class="go">                        read data directly from an S3 bucket. This may require</span>
<span class="go">                        AWS S3 credentials specified via the --aws_input_creds</span>
<span class="go">                        option. The output directory needs to refer to the</span>
<span class="go">                        output of a preprocessing individual pipeline.</span>
<span class="go">  --data_config_file DATA_CONFIG_FILE</span>
<span class="go">                        Yaml file containing the location of the data that is</span>
<span class="go">                        to be processed. This file is not necessary if the</span>
<span class="go">                        data in bids_dir is organized according to the BIDS</span>
<span class="go">                        format. This enables support for legacy data</span>
<span class="go">                        organization and cloud based storage. A bids_dir must</span>
<span class="go">                        still be specified when using this option, but its</span>
<span class="go">                        value will be ignored. Use the format</span>
<span class="go">                        s3://bucket/path/to/data_config_file to read data</span>
<span class="go">                        directly from an S3 bucket. This may require AWS S3</span>
<span class="go">                        credentials specified via the --aws_input_creds</span>
<span class="go">                        option.</span>
<span class="go">  --preconfig PRECONFIG</span>
<span class="go">                        Name of the preconfigured pipeline to run. Available</span>
<span class="go">                        preconfigured pipelines: [&#39;abcd-options&#39;, &#39;anat-only&#39;,</span>
<span class="go">                        &#39;benchmark-FNIRT&#39;, &#39;blank&#39;, &#39;ccs-options&#39;, &#39;fmriprep-</span>
<span class="go">                        options&#39;, &#39;fx-options&#39;, &#39;monkey&#39;, &#39;monkey-ABCD&#39;,</span>
<span class="go">                        &#39;ndmg&#39;, &#39;nhp-macaque&#39;, &#39;preproc&#39;, &#39;rbc-options&#39;,</span>
<span class="go">                        &#39;rodent&#39;]. See https://fcp-</span>
<span class="go">                        indi.github.io/docs/v1.8.4/user/pipelines/preconfig</span>
<span class="go">                        for more information about the preconfigured</span>
<span class="go">                        pipelines.</span>
<span class="go">  --aws_input_creds AWS_INPUT_CREDS</span>
<span class="go">                        Credentials for reading from S3. If not provided and</span>
<span class="go">                        s3 paths are specified in the data config we will try</span>
<span class="go">                        to access the bucket anonymously use the string &quot;env&quot;</span>
<span class="go">                        to indicate that input credentials should read from</span>
<span class="go">                        the environment. (E.g. when using AWS iam roles).</span>
<span class="go">  --aws_output_creds AWS_OUTPUT_CREDS</span>
<span class="go">                        Credentials for writing to S3. If not provided and s3</span>
<span class="go">                        paths are specified in the output directory we will</span>
<span class="go">                        try to access the bucket anonymously use the string</span>
<span class="go">                        &quot;env&quot; to indicate that output credentials should read</span>
<span class="go">                        from the environment. (E.g. when using AWS iam roles).</span>
<span class="go">  --n_cpus N_CPUS       Number of execution resources per participant</span>
<span class="go">                        available for the pipeline. This flag takes precidence</span>
<span class="go">                        over max_cores_per_participant in the pipeline</span>
<span class="go">                        configuration file.</span>
<span class="go">  --mem_mb MEM_MB       Amount of RAM available per participant in megabytes.</span>
<span class="go">                        Included for compatibility with BIDS-Apps standard,</span>
<span class="go">                        but mem_gb is preferred. This flag takes precedence</span>
<span class="go">                        over maximum_memory_per_participant in the pipeline</span>
<span class="go">                        configuration file.</span>
<span class="go">  --mem_gb MEM_GB       Amount of RAM available per participant in gigabytes.</span>
<span class="go">                        If this is specified along with mem_mb, this flag will</span>
<span class="go">                        take precedence. This flag also takes precedence over</span>
<span class="go">                        maximum_memory_per_participant in the pipeline</span>
<span class="go">                        configuration file.</span>
<span class="go">  --runtime_usage RUNTIME_USAGE</span>
<span class="go">                        Path to a callback.log from a prior run of the same</span>
<span class="go">                        pipeline configuration (including any resource-</span>
<span class="go">                        management parameters that will be applied in this</span>
<span class="go">                        run, like &#39;n_cpus&#39; and &#39;num_ants_threads&#39;). This log</span>
<span class="go">                        will be used to override per-node memory estimates</span>
<span class="go">                        with observed values plus a buffer.</span>
<span class="go">  --runtime_buffer RUNTIME_BUFFER</span>
<span class="go">                        Buffer to add to per-node memory estimates if</span>
<span class="go">                        --runtime_usage is specified. This number is a</span>
<span class="go">                        percentage of the observed memory usage.</span>
<span class="go">  --num_ants_threads NUM_ANTS_THREADS</span>
<span class="go">                        The number of cores to allocate to ANTS-based</span>
<span class="go">                        anatomical registration per participant. Multiple</span>
<span class="go">                        cores can greatly speed up this preprocessing step.</span>
<span class="go">                        This number cannot be greater than the number of cores</span>
<span class="go">                        per participant.</span>
<span class="go">  --random_seed RANDOM_SEED</span>
<span class="go">                        Random seed used to fix the state of execution. If</span>
<span class="go">                        unset, each process uses its own default. If set, a</span>
<span class="go">                        `random.log` file will be generated logging the random</span>
<span class="go">                        state used by each process. If set to a positive</span>
<span class="go">                        integer (up to 2147483647), that integer will be used</span>
<span class="go">                        to seed each process. If set to &#39;random&#39;, a random</span>
<span class="go">                        seed will be generated and recorded for each process.</span>
<span class="go">  --save_working_dir [SAVE_WORKING_DIR]</span>
<span class="go">                        Save the contents of the working directory.</span>
<span class="go">  --disable_file_logging</span>
<span class="go">                        Disable file logging, this is useful for clusters that</span>
<span class="go">                        have disabled file locking.</span>
<span class="go">  --participant_label PARTICIPANT_LABEL [PARTICIPANT_LABEL ...]</span>
<span class="go">                        The label of the participant that should be analyzed.</span>
<span class="go">                        The label corresponds to sub-&lt;participant_label&gt; from</span>
<span class="go">                        the BIDS spec (so it does not include &quot;sub-&quot;). If this</span>
<span class="go">                        parameter is not provided all participants should be</span>
<span class="go">                        analyzed. Multiple participants can be specified with</span>
<span class="go">                        a space separated list.</span>
<span class="go">  --participant_ndx PARTICIPANT_NDX</span>
<span class="go">                        The index of the participant that should be analyzed.</span>
<span class="go">                        This corresponds to the index of the participant in</span>
<span class="go">                        the data config file. This was added to make it easier</span>
<span class="go">                        to accommodate SGE array jobs. Only a single</span>
<span class="go">                        participant will be analyzed. Can be used with</span>
<span class="go">                        participant label, in which case it is the index into</span>
<span class="go">                        the list that follows the participant_label flag. Use</span>
<span class="go">                        the value &quot;-1&quot; to indicate that the participant index</span>
<span class="go">                        should be read from the AWS_BATCH_JOB_ARRAY_INDEX</span>
<span class="go">                        environment variable.</span>
<span class="go">  --T1w_label T1W_LABEL</span>
<span class="go">                        C-PAC only runs one T1w per participant-session at a</span>
<span class="go">                        time, at this time. Use this flag to specify any BIDS</span>
<span class="go">                        entity (e.g., &quot;acq-VNavNorm&quot;) or sequence of BIDS</span>
<span class="go">                        entities (e.g., &quot;acq-VNavNorm_run-1&quot;) to specify which</span>
<span class="go">                        of multiple T1w files to use. Specify &quot;--T1w_label</span>
<span class="go">                        T1w&quot; to choose the T1w file with the fewest BIDS</span>
<span class="go">                        entities (i.e., the final option of [*_acq-</span>
<span class="go">                        VNavNorm_T1w.nii.gz, *_acq-HCP_T1w.nii.gz,</span>
<span class="go">                        *_T1w.nii.gz&quot;]). C-PAC will choose the first T1w it</span>
<span class="go">                        finds if the user does not provide this flag, or if</span>
<span class="go">                        multiple T1w files match the --T1w_label provided. If</span>
<span class="go">                        multiple T2w files are present and a comparable filter</span>
<span class="go">                        is possible, T2w files will be filtered as well. If no</span>
<span class="go">                        T2w files match this --T1w_label, T2w files will be</span>
<span class="go">                        processed as if no --T1w_label were provided.</span>
<span class="go">  --bold_label BOLD_LABEL [BOLD_LABEL ...]</span>
<span class="go">                        To include a specified subset of available BOLD files,</span>
<span class="go">                        use this flag to specify any BIDS entity (e.g., &quot;task-</span>
<span class="go">                        rest&quot;) or sequence of BIDS entities (e.g. &quot;task-</span>
<span class="go">                        rest_run-1&quot;). To specify the bold file with the fewest</span>
<span class="go">                        BIDS entities in the file name, specify &quot;--bold_label</span>
<span class="go">                        bold&quot;. Multiple `--bold_label`s can be specified with</span>
<span class="go">                        a space-separated list. If multiple `--bold_label`s</span>
<span class="go">                        are provided (e.g., &quot;--bold_label task-rest_run-1</span>
<span class="go">                        task-rest_run-2&quot;, each scan that includes all BIDS</span>
<span class="go">                        entities specified in any of the provided</span>
<span class="go">                        `--bold_label`s will be analyzed. If this parameter is</span>
<span class="go">                        not provided all BOLD scans should be analyzed.</span>
<span class="go">  -v, --version         show program&#39;s version number and exit</span>
<span class="go">  --bids_validator_config BIDS_VALIDATOR_CONFIG</span>
<span class="go">                        JSON file specifying configuration of bids-validator:</span>
<span class="go">                        See https://github.com/bids-standard/bids-validator</span>
<span class="go">                        for more info.</span>
<span class="go">  --skip_bids_validator</span>
<span class="go">                        Skips bids validation.</span>
<span class="go">  --anat_only           run only the anatomical preprocessing</span>
<span class="go">  --tracking_opt-out    Disable usage tracking. Only the number of</span>
<span class="go">                        participants on the analysis is tracked.</span>
<span class="go">  --monitoring          Enable monitoring server on port 8080. You need to</span>
<span class="go">                        bind the port using the Docker flag &quot;-p&quot;.</span>
</pre></div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index">
              <img class="logo" src="../../_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index">Table of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license">License</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index">C-PAC 1.8.5.dev Beta documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Usage: cpac run</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2012‚Äí2022, C-PAC Developers. C-PAC is licensed under LGPL-3.0-or-later.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.0.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>
    <script defer src="https://fcp-indi.github.io/scripts/versionList.js"></script>

  </body>
</html>