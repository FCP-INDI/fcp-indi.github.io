<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex" /><link rel="search" title="Search" href="../search" /><link rel="next" title="Timeseries Extraction" href="tse" /><link rel="prev" title="Functional Preprocessing" href="func" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 7.3.2 and Furo 2024.08.06 -->
        <title>Nuisance Signal Regression - C-PAC 1.8.8.dev1 Beta documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a96c6ba1" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fe2d11c3" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index"><div class="brand">C-PAC 1.8.8.dev1 Beta documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/cpac_logo_vertical.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">C-PAC 1.8.8.dev1 Beta documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index">User Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quick">1. C-PAC Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="subject_list_config">2. Specify Your Data</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="pipelines/pipeline_config">3. Select Your Pipeline</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 3. Select Your Pipeline</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pipelines/preconfig">Pre-configured Pipelines</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/configurable-settings">Configurable Settings</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Configurable Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l4"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l4"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/data-environment">Data Management and Environment Settings</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Data Management and Environment Settings</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="compute_config">Computer Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="output_config">Output Settings</a></li>
</ul>
</li>
<li class="toctree-l3 current has-children"><a class="reference internal" href="pipelines/pre-and-post">Pre- and post-processing</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Pre- and post-processing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l4"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Nuisance Corrections</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/derivatives">Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="sca">Seed-based Correlation Analysis (SCA) and Dual Regression - Analyze the connectivity between brain regions.</a></li>
<li class="toctree-l4"><a class="reference internal" href="vmhc">Voxel-mirrored Homotopic Connectivity (VMHC) - Investigate connectivity between hemispheres.</a></li>
<li class="toctree-l4"><a class="reference internal" href="alff">Amplitude of Low Frequency Fluctuations (ALFF) and fractional ALFF (fALFF) - Measure the power of slow fluctuations in brain activity.</a></li>
<li class="toctree-l4"><a class="reference internal" href="reho">Regional Homogeneity (ReHo) - Measure the similarity of activity patterns across neighboring voxels.</a></li>
<li class="toctree-l4"><a class="reference internal" href="centrality">Network Centrality - Analyze the structure of functional networks.</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pipelines/quality">Quality Control</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Quality Control</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="qc_interface">QC Pages - Visual Data Quality Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="xcpqc">XCP QC files - eXtensible Connectivity Pipeline-style quality control files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="preprocessing">4. Pre-Process Your Data</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 4. Pre-Process Your Data</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="anat">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="func">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="longitudinal">Longitudinal Preprocessing</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Nuisance Corrections</a></li>
<li class="toctree-l3"><a class="reference internal" href="aroma_ica">ICA Denoising</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse">Timeseries Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="tse#configuring-roi-time-series-extraction">Configuring ROI Time Series Extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="after_warp">After Warp Settings</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="derivatives">5. Compute Derivatives</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 5. Compute Derivatives</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="alff">ALFF and f/ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="reho">ReHo</a></li>
<li class="toctree-l3"><a class="reference internal" href="centrality">Network Centrality</a></li>
<li class="toctree-l3"><a class="reference internal" href="sca">SCA/Dual Regression</a></li>
<li class="toctree-l3"><a class="reference internal" href="vmhc">VMHC</a></li>
<li class="toctree-l3"><a class="reference internal" href="pypeer">PyPEER Integration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running">6. All Run Options</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="group_analysis">7. Run Group Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 7. Run Group Analysis</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="group_fsl_feat">FSL FEAT &amp; Randomise</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_pybasc">Bootstrapped Analysis of Stable Clusters (PyBASC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_isc">Inter-subject Correlation (ISC) &amp; Inter-subject Functional Correlation (ISFC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="group_qpp">Quasi-Periodic Patterns (QPP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="output_dir">8. Check Your Outputs</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="tutorials/index">9. Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of 9. Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorials/observed_usage/index">1. Tutorial: optimizing memory estimation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="help">10. Troubleshoot</a></li>
<li class="toctree-l2"><a class="reference internal" href="rnotes">11. Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix">Appendix</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix#benchmark-package">Benchmark Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="versions">C-PAC versions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer/index">Developer Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Developer Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer/installation">Installing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/pipeline">Pipeline Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/templates">Templates and Atlases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/nodes">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/random_state">Random State</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflow_documentation">Workflow Documentation</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../developer/workflows/index">Workflows</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Workflows</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/cpac_pipeline">C-PAC Pipeline Construction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/anat_preproc">Anatomical Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/func_preproc">Functional Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/seg_preproc">Segmentation Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/sca">Seed Based Correlation Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/basc">Bootstrap Analysis of Stable Clusters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/nuisance">Nuisance Signal Removal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/alff">Amplitude of Low Frequency Fluctuations(ALFF) and fractional ALFF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/vmhc">Voxel Mirrored Homotopic Connectivity Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/reho">Regional Homogeneity Approach to fMRI data analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/generate_motion_statistics">Generate Motion and Power Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/scrubbing">Scrubbing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/group_analysis">Group Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/easy_thresh">Easy thresh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/mdmr">Multivariate Distance Matrix Regression (MDMR)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/median_angle">Median Angle Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/timeseries">Timeseries Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/workflows/network_centrality">Network Centrality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/workflows/index#indices-and-tables">Indices and tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/xcpqc">eXtensible Connectivity Pipeline-style quality control files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/utils">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/testing">Testing CPAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/continuous_integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/deprecating">Deprecating a version of C-PAC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license">License</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/user/nuisance.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="nuisance-signal-regression">
<h1>Nuisance Signal Regression<a class="headerlink" href="#nuisance-signal-regression" title="Link to this heading">¶</a></h1>
<p>A key step in preparing fMRI data for statistical analysis is the removal of nusiance signals and noise. C-PAC provides a number of options for removing nuisance signals. These methods can be combined as desired by you, and are described below.</p>
<section id="regressors">
<h2>Regressors<a class="headerlink" href="#regressors" title="Link to this heading">¶</a></h2>
<section id="mean-white-matter-csf">
<h3>Mean White Matter / CSF<a class="headerlink" href="#mean-white-matter-csf" title="Link to this heading">¶</a></h3>
<p>The mean WM and CSF time series are calculated by averaging signal over all voxels within a WM or CSF mask for each time point. Mean WM and CSF time series are then used as temporal covariates and removed from the raw data through linear regression.</p>
<p><strong>Note:</strong> The <strong>Lateral Ventricles Mask</strong> in standard space is provided for isolating signal changes in the CSF. This mask is based off of the HarvardOxford atlas that is in standard MNI space. If you wish to use your own standard and lateral ventricles mask, and wish to run CSF nuisance regression, you must specify it in your pipeline configuration.</p>
</section>
<section id="acompcor">
<h3>aCompCor<a class="headerlink" href="#acompcor" title="Link to this heading">¶</a></h3>
<p>The term “noise region-of-interest” (noise ROI) refers to areas such as white matter (WM) and cerebral spinal fluid (CSF) in which temporal fluctuations are unlikely to be modulated by neural activity, and thus primarily reflect physiological noise (Behzadi et al., 2007). Based on the assumption that signal from a noise ROI can be used to accurately model physiological fluctuations in gray matter regions, a novel component based noise reduction method (CompCor) was proposed to correct for physiological noise by regressing out principal components from noise ROIs (Behzadi et al., 2007). Compared to the average signal from WM and CSF regions (i.e. WM/CSF regression methods), signals captured by principal components derived from these noise ROIs can better account for voxel-specific phase differences in physiological noise due to the potential of principle component analysis to identify temporal pattern of physiological noise (Tomas et al., 2002). Thus, preprocessing with CompCor can significantly reduce physiological noise as well as noise from other sources (Behzadi et al., 2007; Chai et al., 2012).</p>
<p>The first step of CompCor is to determine noise ROIs. This can be done either by using anatomical data to identify voxels that consist primarily of either WM or CSF, or by defining noise ROIs as voxels with high temporal standard deviation. A principal component analysis (PCA) is then applied to characterize the time series data from the noise ROIs. Significant principal components are then introduced as covariates in a general linear model (GLM) as an estimate of the physiological noise signal space (Behzadi et al., 2007).</p>
<p>Also, C-PAC allows users configure nuisance correction to perform cosine/linear filtering on the time series data prior to CompCor calculation.</p>
</section>
<section id="tcompcor">
<h3>tCompCor<a class="headerlink" href="#tcompcor" title="Link to this heading">¶</a></h3>
<p>As showed by Lund and Hanson (2001), voxel time courses with a relatively high temporal standard deviation were dominated by physiological noise. Behzadi et al. (2007) proposed an unsupervised method to assess the temporal standard deviation and then used princial components analysis to reduce the data dimensionality.</p>
</section>
<section id="global-signal-regression">
<h3>Global Signal Regression<a class="headerlink" href="#global-signal-regression" title="Link to this heading">¶</a></h3>
<p>Global signal, the average signal across all voxels in the brain, is assumed to reflect a combination of resting-state fluctuations, physiological noise (e.g. respiratory and cardiac noise), and other noise signals with non-neural origin. Global signal regression (GSR) is a preprocessing technique for removing the spontaneous BOLD fluctuations common to the whole brain using a general linear model (GLM). Although GSR can potentially change functional connectivity distributions and result in increased negative correlations (Murphy et al., 2009; Saad et al., 2012; Weissenbacher et al., 2009), this technique has been shown to facilitate the detection of localized neuronal signals and improve the specificity of functional connectivity analysis (Fox et al., 2005; Fox et al., 2009). Thus, GSR remains a common and useful processing technique in some situations.</p>
</section>
<section id="global-mean">
<h3>Global Mean<a class="headerlink" href="#global-mean" title="Link to this heading">¶</a></h3>
<p>A global mean (defined as the average signal over all voxels for each time point) is used as a temporal covariate and regressed out using linear regression.</p>
</section>
<section id="principle-components-removal">
<h3>Principle Components Removal<a class="headerlink" href="#principle-components-removal" title="Link to this heading">¶</a></h3>
<p>Performs a Principal Components Analysis and regresses out the chosen principal component. The first component is assumed to be the global mean signal.</p>
</section>
<section id="polynomial-detrending">
<h3>Polynomial Detrending<a class="headerlink" href="#polynomial-detrending" title="Link to this heading">¶</a></h3>
<p>Removes linear or quadratic trends in the timeseries. The linear trend is likely due to the scanner heating up as the scan progresses, while the quadratic trend is possibly due to slow movement-related effects.</p>
</section>
</section>
<section id="motion-correction">
<h2>Motion Correction<a class="headerlink" href="#motion-correction" title="Link to this heading">¶</a></h2>
<p>Movement during scanning is one of of the largest factors influencing the quality of fMRI data. Movement of the head between the acquisition of each volume can cause brain images to become misaligned. Head motion during scanning can also cause spurious changes in signal intensity. If they are not corrected, these changes can influence the results of activation and connectivity analyses. Recent studies have shown that motion as small as 0.1 mm can systematically bias both within- and between- group effects during the analysis of fMRI data (Power et al., 2011; Satterhwaite et al., 2012; Van Dijk et al., 2012). Even the most cooperative participants often still show displacements of up to a millimeter, and head movements of several millimeters are not uncommon in studies of hyperkinetic subjects such as young children, older adults, or patient populations.</p>
<p>There are four main approaches to motion correction: volume realignment, using a general linear model to regress out motion-related artifacts (i.e. regression of motion parameters, as described as one of the regressors in nuisance regression above), de-spiking of motion confounded time points, and censoring of motion confounded time points (i.e. “scrubbing”).</p>
<section id="volume-realignment">
<h3>Volume Realignment<a class="headerlink" href="#volume-realignment" title="Link to this heading">¶</a></h3>
<p>Volume realignment aligns reconstructed volumes by calculating motion parameters based on a solid-body model of the head and brain (Friston 1996). Based on these parameters, each volume is registered to the volume preceding it.</p>
<p>C-PAC runs volume realignment on all functional images during functional preprocessing. You can select from two sets of motion parameters to use during this process:</p>
<ul class="simple">
<li><p><strong>6-Parameter Model</strong> - Three translation and three rotation parameters as described in Friston 1996.</p></li>
<li><p><strong>Friston 24-Parameter Model</strong> - The 6 motion parameters of the current volume and the preceding volume, plus each of these values squared.</p></li>
</ul>
</section>
<section id="regression-of-motion-parameters">
<h3>Regression of Motion Parameters<a class="headerlink" href="#regression-of-motion-parameters" title="Link to this heading">¶</a></h3>
<p>Another approach to motion correction is to regress out the effects of motion when running statistical analysis. This is done by calculating motion parameters and including them in your General Linear Model (Fox et al., 2005; Weissenbacher et al., 2009).</p>
<p>By default, C-PAC will calculate and output the motion parameters used during volume realignment. You can optionally enable the calculation of additional motion parameters, including Framewise Displacement (FD) and DVARS (as described below and in Power et al., 2011).</p>
</section>
</section>
<section id="de-spiking">
<h2>De-Spiking<a class="headerlink" href="#de-spiking" title="Link to this heading">¶</a></h2>
<p><strong>Note:</strong> You cannot run De-Spiking and Scrubbing at the same time.</p>
</section>
<section id="scrubbing">
<h2>Scrubbing<a class="headerlink" href="#scrubbing" title="Link to this heading">¶</a></h2>
<p>One way to ensure that your results are have not been influenced by spurious, motion-related noise is to remove volumes during which significant movement occurred. This is known as volume censoring, or scrubbing.
Power and colleagues (2011) proposed two measures to identify volumes contaminated by excessive motion; framewise displacement (FD) and DVARS:</p>
<ul class="simple">
<li><p>FD is calculated from derivatives of the six rigid-body realignment parameters estimated during standard volume realignment, and is a compressed single index of the six realignment parameters.</p></li>
<li><p>DVARS is the root mean squared (RMS) change in BOLD signal from volume to volume (D referring to temporal derivative of time courses and VARS referring to RMS variance over voxels). DVARS is calculated by first differentiating the volumetric time series and then calculating the RMS signal change over the whole brain. This measure indexes the change rate of BOLD signal across the entire brain at each frame of data or, in other words, how much the intensity of a brain image changes relative to the previous time point.</p></li>
</ul>
<p>Together, these two measures capture the head displacements and the brain-wide BOLD signal displacements from volume to volume over all voxels within the brain (Power et al., 2011).</p>
<p>After calculating FD and DVARS, thresholds can be applied to censor the data. Selecting thresholds for scrubbing is a trade-off. More stringent thresholds allow more complete removal of motion-contaminated data, and minimize motion-induced artifacts. Meanwhile, more stringent scrubbing will also remove more data, which may increase the variability and decrease the test-retest reliability of the data. Commonly used thresholds are FD &gt; 0.2 to 0.5 mm and DVARS &gt; 0.3 to 0.5% of BOLD.</p>
<p><strong>IMPORTANT:</strong> Removing time points from a continuous time series (as is done during scrubbing) disrupts the temporal structure of the data and precludes frequency-based analyses such as <a class="reference external" href="alff">ALFF/fAlff</a>. However, scrubbing can effectively be used to minimize motion-related artifacts in seed-based correlation analyses (Power et al., 2011; 2012).</p>
<p><strong>Note:</strong> You cannot run De-Spiking and Scrubbing at the same time.</p>
</section>
<section id="temporal-filtering">
<h2>Temporal Filtering<a class="headerlink" href="#temporal-filtering" title="Link to this heading">¶</a></h2>
<p>The overall goal of temporal filtering is to increase the signal-to-noise ratio. Due to the relatively poor temporal resolution of fMRI, time series data contain little high-frequency noise. They do, however, often contain very slow frequency fluctuations that may be unrelated to the signal of interest. Slow changes in magnetic field strength may be responsible for part of the low-frequency signal observed in fMRI time series (Smith et al., 1999). Other factors contributing to noise in a time series are cardiac and respiratory effects, which will often show up as noise around ~0.15 and ~0.34 Hz, respectively (Wager et al., 2007).  The temporal filtering method implemented by C-PAC is relatively simple. You specify a lower and upper bound for a band-pass filter, which then removes any information in frequencies outside the specified frequency band.</p>
<p>Recent work has revealed a portion of the low-frequency signal (0.01 to 0.1 Hz) to be the result of slow oscillations intrinsic to brain activity (Gee et al., 2011; Zuo et al., 2010; Schroeder and Lakatos, 2009). Utilizing measures such as Amplitude of Low Frequency Fluctuations (ALFF) and fractional ALFF, the power of these oscillations has been shown to differ both across subjects (Zang et al., 2007) and between conditions (Yan et al., 2009). Resting functional connectivity has been shown to be most prominent at these frequency bands (Cordes et al., 2001), and as such these fluctuations are commonly used to measure functional connectivity in the resting brain (Gee et al., 2010).</p>
<p>As these low-frequency oscillations are likely of interest to researchers, it is important to take this knowledge into account when deciding on what temporal filtering settings to use. As a general rule, it is safe to filter frequencies below 0.0083 Hz (Ashby, 2011).</p>
<p>Additionally, there is some evidence (Davey et al., 2012) that temporal filtering may induce correlation in resting fMRI data, breaking the assumption of temporal sample independence and potentially invalidating the results of connectivity analysis. This should be taken into account when running temporal filtering on data on which you will later run connectivity analysis.</p>
</section>
<section id="median-angle-correction">
<h2>Median Angle Correction<a class="headerlink" href="#median-angle-correction" title="Link to this heading">¶</a></h2>
<p>Median angle correction is another global signal correction approach. It is assumed that the global signal in resting-state fMRI can be viewed as the sum of two components: a component that reflects the intrinsic correlations of resting state fMRI signals between regions, and a nuisance component that reflects an additive global signal confound. Unlike the GSR method which removes both components, median angle correction can characterize the properties of the global signal and effectively minimize the effects of the additive global signal confound while preserving the desired components.</p>
<p>Principal component analysis (PCA) is used to decompose the resting-state data. Median angle is computed by taking the inverse cosine of each voxel’s time series vector’s projection onto the first principal component (i.e. the global mean signal) and then calculating the median over the angles from all the vectors. If an inverse relation is found between the median angle and the mean BOLD signal amplitude, then an additive signal confound is present. As resting-state data sets with high median angles and low mean BOLD magnitudes are likely to be the least contaminated by an additive global confound (He and Liu, 2011), the inverse relation between median angle and mean BOLD magnitude is used to correct for differences in the additive confound. Specifically, the angular distributions of datasets with small median angles can be shifted to attain a larger target median angle to effectively minimize the effects of the global signal confound. The calculation of target angle for median angle correction is described in He and Liu (2011).</p>
</section>
<section id="custom-regressors">
<h2>Custom Regressors<a class="headerlink" href="#custom-regressors" title="Link to this heading">¶</a></h2>
<p>You can provide your own custom regressor signals beyond those provided by C-PAC (e.g., task encodings or quasi-periodic pattern waveforms).</p>
<p>Each custom regressor must be either a CSV or NIFTI file that contains a single column of the same length as the functional signal with <code class="docutils literal notranslate"><span class="pre">1</span></code>s indicating volumes to keep and <code class="docutils literal notranslate"><span class="pre">0</span></code>s indicating volumes to censor.</p>
<p>The custom regressor specification also takes a boolean <code class="docutils literal notranslate"><span class="pre">convolve</span></code> (default = <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
<p>An example with one custom regressor is included in <a class="reference internal" href="#nuisance-no-gui"><span class="std std-ref">Configuration Without the GUI</span></a>, below.</p>
</section>
<section id="configuring-nuisance-signal-regression-options">
<h2>Configuring Nuisance Signal Regression Options<a class="headerlink" href="#configuring-nuisance-signal-regression-options" title="Link to this heading">¶</a></h2>
<figure class="align-default">
<img alt="../_images/nuisance.png" src="../_images/nuisance.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>Run Nuisance Signal Correction - [Off, On, On/Off]:</strong> Covary out various sources of noise.</p></li>
<li><p><strong>Lateral Ventricles Mask (Standard Space) - [path, None]:</strong> A binary mask of the lateral ventricles. If choosing None, no lateral ventricles mask will be applied.</p></li>
<li><p><strong>Select Regressors: - [checkbox: compcor, wm, csf, global, pc1, motion, linear, quadratic]:</strong>  Clicking on the <em>+</em> icon to the right of the box here will bring up a dialog where you can check off which nuisance variables you would like to include.  You may generate multiple sets of nuisance regression strategies in this way.  When you are done defining nuisance regression strategies, check the box next to each strategy you would like to run.</p></li>
</ol>
<section id="configuring-temporal-filtering-options">
<h3>Configuring Temporal Filtering Options<a class="headerlink" href="#configuring-temporal-filtering-options" title="Link to this heading">¶</a></h3>
<figure class="align-default">
<img alt="../_images/tf_gui.png" src="../_images/tf_gui.png" />
</figure>
<ol class="arabic simple">
<li><p><strong>Run Temporal Filtering - [Off, On, On/Off]:</strong> Apply a temporal band-pass filter to functional data.</p></li>
<li><p><strong>Select regressors: - [dialogue: Low-frequency cutoff, High-frequency cutoff]:</strong>  Clicking on the <em>+</em> icon to the right of the box here will bring up a dialog where you can define the upper and lower cutoffs for the bandpass filter.  You may generate multiple sets of bandpass filter strategies in this way.  When you are done defining bandpasses, check the box next to each bandpass you would like to run.</p></li>
</ol>
</section>
<section id="configuration-without-the-gui">
<span id="nuisance-no-gui"></span><h3>Configuration Without the GUI<a class="headerlink" href="#configuration-without-the-gui" title="Link to this heading">¶</a></h3>
<p>The following nested key/value pairs will be set to these defaults if not defined in your <a class="reference internal" href="pipelines/pipeline_config"><span class="doc">pipeline configuration YAML</span></a>.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="c1">#   - if &#39;single_step_resampling_from_stc&#39;, &#39;template&#39; is the only valid option for ``nuisance_corrections: 2-nuisance_regression: space``</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="c1">#   - if &#39;single_step_resampling_from_stc&#39;, &#39;template&#39; is the only valid option for ``nuisance_corrections: 2-nuisance_regression: space``</span>
<span class="w">        </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;default&#39;</span>


<span class="nt">functional_preproc</span><span class="p">:</span>

<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">update_header</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Convert raw data from LPI to RPI</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">truncation</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># First timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is 0 (beginning of timeseries).</span>
<span class="w">    </span><span class="c1"># First timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">start_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="c1"># Last timepoint to include in analysis.</span>
<span class="w">    </span><span class="c1"># Default is None or End (end of timeseries).</span>
<span class="w">    </span><span class="c1"># Last timepoint selection in the scan parameters in the data configuration file, if present, will over-ride this selection.</span>
<span class="w">    </span><span class="c1"># Note: the selection here applies to all scans of all participants.</span>
<span class="w">    </span><span class="nt">stop_tr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">scaling</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Scale functional raw data, usually used in rodent pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">    </span><span class="c1"># Scale the size of the dataset voxels by the factor.</span>
<span class="w">    </span><span class="nt">scaling_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">  </span><span class="nt">despiking</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Run AFNI 3dDespike</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">slice_timing_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Interpolate voxel time courses so they are sampled at the same time points.</span>
<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># use specified slice time pattern rather than one in header</span>
<span class="w">    </span><span class="nt">tpattern</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">    </span><span class="c1"># align each slice to given time offset</span>
<span class="w">    </span><span class="c1"># The default alignment time is the average of the &#39;tpattern&#39; values (either from the dataset header or from the tpattern option).</span>
<span class="w">    </span><span class="nt">tzero</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">None</span>

<span class="w">  </span><span class="nt">motion_estimates_and_correction</span><span class="p">:</span>

<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_estimates</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># calculate motion statistics BEFORE slice-timing correction</span>
<span class="w">      </span><span class="nt">calculate_motion_first</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># calculate motion statistics AFTER motion correction</span>
<span class="w">      </span><span class="nt">calculate_motion_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="nt">motion_correction</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># using: [&#39;3dvolreg&#39;, &#39;mcflirt&#39;]</span>
<span class="w">      </span><span class="c1"># Forking is currently broken for this option.</span>
<span class="w">      </span><span class="c1"># Please use separate configs if you want to use each of 3dvolreg and mcflirt.</span>
<span class="w">      </span><span class="c1"># Follow https://github.com/FCP-INDI/C-PAC/issues/1935 to see when this issue is resolved.</span>
<span class="w">      </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;3dvolreg&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># option parameters</span>
<span class="w">      </span><span class="nt">AFNI-3dvolreg</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># This option is useful when aligning high-resolution datasets that may need more alignment than a few voxels.</span>
<span class="w">        </span><span class="nt">functional_volreg_twopass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference. Options: mean, median, selected_volume, fmriprep_reference</span>
<span class="w">      </span><span class="nt">motion_correction_reference</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;mean&#39;</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="c1"># Choose motion correction reference volume</span>
<span class="w">      </span><span class="nt">motion_correction_reference_volume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">    </span><span class="nt">motion_estimate_filter</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Filter physiological (respiration) artifacts from the head motion estimates.</span>
<span class="w">      </span><span class="c1"># Adapted from DCAN Labs filter.</span>
<span class="w">      </span><span class="c1">#     https://www.ohsu.edu/school-of-medicine/developmental-cognition-and-neuroimaging-lab</span>
<span class="w">      </span><span class="c1">#     https://www.biorxiv.org/content/10.1101/337360v1.full.pdf</span>
<span class="w">      </span><span class="c1"># this is a fork point</span>
<span class="w">      </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">      </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;notch&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># Highest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For notch filter.</span>
<span class="w">          </span><span class="nt">breathing_rate_max</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># notch filter direct customization parameters</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min and breathing_rate_max are provided,</span>
<span class="w">          </span><span class="c1"># the following parameters will be ignored.</span>

<span class="w">          </span><span class="c1"># the center frequency of the notch filter</span>
<span class="w">          </span><span class="nt">center_frequency</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># the width of the notch filter</span>
<span class="w">          </span><span class="nt">filter_bandwidth</span><span class="p">:</span>

<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># options: &quot;notch&quot;, &quot;lowpass&quot;</span>
<span class="w">          </span><span class="nt">filter_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lowpass&quot;</span>

<span class="w">          </span><span class="c1"># Number of filter coefficients.</span>
<span class="w">          </span><span class="nt">filter_order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>

<span class="w">          </span><span class="c1"># Dataset-wide respiratory rate data from breathing belt.</span>
<span class="w">          </span><span class="c1"># Notch filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot; and &quot;breathing_rate_max&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;center_frequency&quot; and &quot;filter_bandwitdh&quot;.</span>
<span class="w">          </span><span class="c1"># Lowpass filter requires either:</span>
<span class="w">          </span><span class="c1">#     &quot;breathing_rate_min&quot;</span>
<span class="w">          </span><span class="c1"># or</span>
<span class="w">          </span><span class="c1">#     &quot;lowpass_cutoff&quot;.</span>
<span class="w">          </span><span class="c1"># If &quot;breathing_rate_min&quot; (for lowpass and notch filter)</span>
<span class="w">          </span><span class="c1"># and &quot;breathing_rate_max&quot; (for notch filter) are set,</span>
<span class="w">          </span><span class="c1"># the values set in &quot;lowpass_cutoff&quot; (for lowpass filter),</span>
<span class="w">          </span><span class="c1"># &quot;center_frequency&quot; and &quot;filter_bandwidth&quot; (for notch filter)</span>
<span class="w">          </span><span class="c1"># options are ignored.</span>

<span class="w">          </span><span class="c1"># Lowest Breaths-Per-Minute in dataset.</span>
<span class="w">          </span><span class="c1"># For both notch and lowpass filters.</span>
<span class="w">          </span><span class="nt">breathing_rate_min</span><span class="p">:</span>

<span class="w">          </span><span class="c1"># lowpass filter direct customization parameter</span>

<span class="w">          </span><span class="c1"># mutually exclusive with breathing_rate options above.</span>
<span class="w">          </span><span class="c1"># If breathing_rate_min is provided, the following</span>
<span class="w">          </span><span class="c1"># parameter will be ignored.</span>

<span class="w">          </span><span class="c1"># the frequency cutoff of the filter</span>
<span class="w">          </span><span class="nt">lowpass_cutoff</span><span class="p">:</span>

<span class="w">  </span><span class="nt">distortion_correction</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># using: [&#39;PhaseDiff&#39;, &#39;Blip&#39;, &#39;Blip-FSL-TOPUP&#39;]</span>
<span class="w">    </span><span class="c1">#   PhaseDiff - Perform field map correction using a single phase difference image, a subtraction of the two phase images from each echo. Default scanner for this method is SIEMENS.</span>
<span class="w">    </span><span class="c1">#   Blip - Uses AFNI 3dQWarp to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="c1">#   Blip-FSL-TOPUP - Uses FSL TOPUP to calculate the distortion unwarp for EPI field maps of opposite/same phase encoding direction.</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;PhaseDiff&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;Blip&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># option parameters</span>
<span class="w">    </span><span class="nt">PhaseDiff</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Since the quality of the distortion heavily relies on the skull-stripping step, we provide a choice of method (&#39;AFNI&#39; for AFNI 3dSkullStrip or &#39;BET&#39; for FSL BET).</span>
<span class="w">      </span><span class="c1"># Options: &#39;BET&#39; or &#39;AFNI&#39;</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_option</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;BET&#39;</span>

<span class="w">      </span><span class="c1"># Set the fraction value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.5.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_BET_frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>

<span class="w">      </span><span class="c1"># Set the threshold value for the skull-stripping of the magnitude file. Depending on the data, a tighter extraction may be necessary in order to prevent noisy voxels from interfering with preparing the field map.</span>
<span class="w">      </span><span class="c1"># The default value is 0.6.</span>
<span class="w">      </span><span class="nt">fmap_skullstrip_AFNI_threshold</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>

<span class="w">    </span><span class="nt">Blip-FSL-TOPUP</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># (approximate) resolution (in mm) of warp basis for the different sub-sampling levels, default 10</span>
<span class="w">      </span><span class="nt">warpres</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>

<span class="w">      </span><span class="c1"># sub-sampling scheme, default 1</span>
<span class="w">      </span><span class="nt">subsamp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">      </span><span class="c1"># FWHM (in mm) of gaussian smoothing kernel, default 8</span>
<span class="w">      </span><span class="nt">fwhm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>

<span class="w">      </span><span class="c1"># Max # of non-linear iterations, default 5</span>
<span class="w">      </span><span class="nt">miter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="w">      </span><span class="c1"># Weight of regularisation, default depending on --ssqlambda and --regmod switches. See user documentation.</span>
<span class="w">      </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">      </span><span class="c1"># If set (=1), lambda is weighted by current ssq, default 1</span>
<span class="w">      </span><span class="nt">ssqlambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">      </span><span class="c1"># Model for regularisation of warp-field [membrane_energy bending_energy], default bending_energy</span>
<span class="w">      </span><span class="nt">regmod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bending_energy</span>

<span class="w">      </span><span class="c1"># Estimate movements if set, default 1 (true)</span>
<span class="w">      </span><span class="nt">estmov</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">      </span><span class="c1"># Minimisation method 0=Levenberg-Marquardt, 1=Scaled Conjugate Gradient, default 0 (LM)</span>
<span class="w">      </span><span class="nt">minmet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="c1"># Order of spline, 2-&gt;Qadratic spline, 3-&gt;Cubic spline. Default=3</span>
<span class="w">      </span><span class="nt">splineorder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">      </span><span class="c1"># Precision for representing Hessian, double or float. Default double</span>
<span class="w">      </span><span class="nt">numprec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">double</span>

<span class="w">      </span><span class="c1"># Image interpolation model, linear or spline. Default spline</span>
<span class="w">      </span><span class="nt">interp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">spline</span>

<span class="w">      </span><span class="c1"># If set (=1), the images are individually scaled to a common mean, default 0 (false)</span>
<span class="w">      </span><span class="nt">scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="c1"># If set (=1), the calculations are done in a different grid, default 1 (true)</span>
<span class="w">      </span><span class="nt">regrid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">  </span><span class="nt">func_masking</span><span class="p">:</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">    </span><span class="c1"># using: [&#39;AFNI&#39;, &#39;FSL&#39;, &#39;FSL_AFNI&#39;, &#39;Anatomical_Refined&#39;, &#39;Anatomical_Based&#39;, &#39;Anatomical_Resampled&#39;, &#39;CCS_Anatomical_Refined&#39;]</span>

<span class="w">    </span><span class="c1"># FSL_AFNI: fMRIPrep-style BOLD mask. Ref: https://github.com/nipreps/niworkflows/blob/a221f612/niworkflows/func/util.py#L246-L514</span>
<span class="w">    </span><span class="c1"># Anatomical_Refined: 1. binarize anat mask, in case it is not a binary mask. 2. fill holes of anat mask 3. init_bold_mask : input raw func → dilate init func brain mask 4. refined_bold_mask : input motion corrected func → dilate anatomical mask 5. get final func mask</span>
<span class="w">    </span><span class="c1"># Anatomical_Based: Generate the BOLD mask by basing it off of the anatomical brain mask. Adapted from DCAN Lab&#39;s BOLD mask method from the ABCD pipeline.</span>
<span class="w">    </span><span class="c1"># Anatomical_Resampled: Resample anatomical brain mask in standard space to get BOLD brain mask in standard space. Adapted from DCAN Lab&#39;s BOLD mask method from the ABCD pipeline. (&quot;Create fMRI resolution standard space files for T1w image, wmparc, and brain mask […] don&#39;t use FLIRT to do spline interpolation with -applyisoxfm for the 2mm and 1mm cases because it doesn&#39;t know the peculiarities of the MNI template FOVs&quot;)</span>
<span class="w">    </span><span class="c1"># CCS_Anatomical_Refined: Generate the BOLD mask by basing it off of the anatomical brain. Adapted from the BOLD mask method from the CCS pipeline.</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="nt">using</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;AFNI&#39;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">FSL-BET</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Apply to 4D FMRI data, if bold_bet_functional_mean_boolean : Off.</span>
<span class="w">      </span><span class="c1"># Mutually exclusive with functional, reduce_bias, robust, padding, remove_eyes, surfaces</span>
<span class="w">      </span><span class="c1"># It must be &#39;on&#39; if select &#39;reduce_bias&#39;, &#39;robust&#39;, &#39;padding&#39;, &#39;remove_eyes&#39;, or &#39;bet_surfaces&#39; on</span>
<span class="w">      </span><span class="nt">functional_mean_boolean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Set an intensity threshold to improve skull stripping performances of FSL BET on rodent scans.</span>
<span class="w">      </span><span class="nt">functional_mean_thr</span><span class="p">:</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>
<span class="w">        </span><span class="nt">threshold_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">98</span>

<span class="w">      </span><span class="c1"># Bias correct the functional mean image to improve skull stripping performances of FSL BET on rodent scans</span>
<span class="w">      </span><span class="nt">functional_mean_bias_correction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Set the threshold value controling the brain vs non-brain voxels.</span>
<span class="w">      </span><span class="nt">frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>

<span class="w">      </span><span class="c1"># Mesh created along with skull stripping</span>
<span class="w">      </span><span class="nt">mesh_boolean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Create a surface outline image</span>
<span class="w">      </span><span class="nt">outline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Add padding to the end of the image, improving BET.Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">padding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Integer value of head radius</span>
<span class="w">      </span><span class="nt">radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">      </span><span class="c1"># Reduce bias and cleanup neck. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">reduce_bias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Eyes and optic nerve cleanup. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">remove_eyes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Robust brain center estimation. Mutually exclusive with functional,reduce_bias,robust,padding,remove_eyes,surfaces</span>
<span class="w">      </span><span class="nt">robust</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Create a skull image</span>
<span class="w">      </span><span class="nt">skull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Gets additional skull and scalp surfaces by running bet2 and betsurf. This is mutually exclusive with reduce_bias, robust, padding, remove_eyes</span>
<span class="w">      </span><span class="nt">surfaces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Apply thresholding to segmented brain image and mask</span>
<span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">      </span><span class="c1"># Vertical gradient in fractional intensity threshold (-1,1)</span>
<span class="w">      </span><span class="nt">vertical_gradient</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>

<span class="w">    </span><span class="nt">FSL_AFNI</span><span class="p">:</span>

<span class="w">      </span><span class="nt">bold_ref</span><span class="p">:</span>

<span class="w">      </span><span class="nt">brain_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain_mask.nii.gz</span>

<span class="w">      </span><span class="nt">brain_probseg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/standard/MNI152_T1_${resolution_for_anat}_brain_mask.nii.gz</span>

<span class="w">    </span><span class="nt">Anatomical_Refined</span><span class="p">:</span>

<span class="w">      </span><span class="c1"># Choose whether or not to dilate the anatomical mask if you choose &#39;Anatomical_Refined&#39; as the functional masking option. It will dilate one voxel if enabled.</span>
<span class="w">      </span><span class="nt">anatomical_mask_dilation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>

<span class="w">    </span><span class="c1"># Apply functional mask in native space</span>
<span class="w">    </span><span class="nt">apply_func_mask_in_native_space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">generate_func_mean</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Generate mean functional image</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">normalize_func</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Normalize functional image</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">  </span><span class="nt">coreg_prep</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># Generate sbref</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="nt">nuisance_corrections</span><span class="p">:</span>

<span class="w">  </span><span class="nt">1-ICA-AROMA</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Off</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># Types of denoising strategy:</span>
<span class="w">    </span><span class="c1">#   nonaggr: nonaggressive-partial component regression</span>
<span class="w">    </span><span class="c1">#   aggr:    aggressive denoising</span>
<span class="w">    </span><span class="nt">denoising_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nonaggr</span>

<span class="w">  </span><span class="nt">2-nuisance_regression</span><span class="p">:</span>

<span class="w">    </span><span class="c1"># this is a fork point</span>
<span class="w">    </span><span class="c1">#   run: [On, Off] - this will run both and fork the pipeline</span>
<span class="w">    </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="c1"># this is not a fork point</span>
<span class="w">    </span><span class="c1"># Run nuisance regression in native or template space</span>
<span class="w">    </span><span class="c1">#   - If set to template, will use the brain mask configured in</span>
<span class="w">    </span><span class="c1">#     ``functional_preproc: func_masking: FSL_AFNI: brain_mask``</span>
<span class="w">    </span><span class="c1">#   - If ``registration_workflows: functional_registration: func_registration_to_template: apply_trasnform: using: single_step_resampling_from_stc``, this must be set to template</span>
<span class="w">    </span><span class="nt">space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">native</span>

<span class="w">    </span><span class="c1"># switch to Off if nuisance regression is off and you don&#39;t want to write out the regressors</span>
<span class="w">    </span><span class="nt">create_regressors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>

<span class="w">    </span><span class="c1"># Select which nuisance signal corrections to apply</span>
<span class="w">    </span><span class="nt">Regressors</span><span class="p">:</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w">  </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;default&#39;</span>

<span class="w">         </span><span class="nt">Motion</span><span class="p">:</span>
<span class="w">           </span><span class="nt">include_delayed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">           </span><span class="nt">include_squared</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">           </span><span class="nt">include_delayed_squared</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">         </span><span class="nt">aCompCor</span><span class="p">:</span>
<span class="w">           </span><span class="nt">summary</span><span class="p">:</span>
<span class="w">             </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DetrendPC</span>
<span class="w">             </span><span class="nt">components</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">           </span><span class="nt">tissues</span><span class="p">:</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WhiteMatter</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CerebrospinalFluid</span>
<span class="w">           </span><span class="nt">extraction_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">         </span><span class="nt">CerebrospinalFluid</span><span class="p">:</span>
<span class="w">           </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mean</span>
<span class="w">           </span><span class="nt">extraction_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">           </span><span class="nt">erode_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">         </span><span class="nt">GlobalSignal</span><span class="p">:</span>
<span class="w">           </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mean</span>

<span class="w">         </span><span class="nt">PolyOrt</span><span class="p">:</span>
<span class="w">          </span><span class="nt">degree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">         </span><span class="nt">Bandpass</span><span class="p">:</span>
<span class="w">           </span><span class="nt">bottom_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">           </span><span class="nt">top_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">           </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w">  </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;defaultNoGSR&#39;</span>

<span class="w">         </span><span class="nt">Motion</span><span class="p">:</span>
<span class="w">           </span><span class="nt">include_delayed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">           </span><span class="nt">include_squared</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">           </span><span class="nt">include_delayed_squared</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">         </span><span class="nt">aCompCor</span><span class="p">:</span>
<span class="w">           </span><span class="nt">summary</span><span class="p">:</span>
<span class="w">             </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DetrendPC</span>
<span class="w">             </span><span class="nt">components</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">           </span><span class="nt">tissues</span><span class="p">:</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WhiteMatter</span>
<span class="w">             </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CerebrospinalFluid</span>
<span class="w">           </span><span class="nt">extraction_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">         </span><span class="nt">CerebrospinalFluid</span><span class="p">:</span>
<span class="w">           </span><span class="nt">summary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Mean</span>
<span class="w">           </span><span class="nt">extraction_resolution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">           </span><span class="nt">erode_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">         </span><span class="nt">PolyOrt</span><span class="p">:</span>
<span class="w">          </span><span class="nt">degree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="w">         </span><span class="nt">Bandpass</span><span class="p">:</span>
<span class="w">           </span><span class="nt">bottom_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">           </span><span class="nt">top_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">           </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>

<span class="w">    </span><span class="c1"># Standard Lateral Ventricles Binary Mask</span>
<span class="w">    </span><span class="c1"># used in CSF mask refinement for CSF signal-related regressions</span>
<span class="w">    </span><span class="nt">lateral_ventricles_mask</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$FSLDIR/data/atlases/HarvardOxford/HarvardOxford-lateral-ventricles-thr25-2mm.nii.gz</span>

<span class="w">    </span><span class="c1"># Whether to run frequency filtering before or after nuisance regression.</span>
<span class="w">    </span><span class="c1"># Options: &#39;After&#39; or &#39;Before&#39;</span>
<span class="w">    </span><span class="nt">bandpass_filtering_order</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;After&#39;</span>

<span class="w">    </span><span class="c1"># Process and refine masks used to produce regressors and time series for</span>
<span class="w">    </span><span class="c1"># regression.</span>
<span class="w">    </span><span class="nt">regressor_masks</span><span class="p">:</span>

<span class="w">      </span><span class="nt">erode_anatomical_brain_mask</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode binarized anatomical brain mask. If choosing True, please also set regressor_masks[&#39;erode_csf&#39;][&#39;run&#39;]: True; anatomical_preproc[&#39;brain_extraction&#39;][&#39;using&#39;]: niworkflows-ants.</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Target volume ratio, if using erosion.</span>
<span class="w">        </span><span class="c1"># Default proportion is None for anatomical brain mask.</span>
<span class="w">        </span><span class="c1"># If using erosion, using both proportion and millimeters is not recommended.</span>
<span class="w">        </span><span class="nt">brain_mask_erosion_prop</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode brain mask in millimeters, default for brain mask is 30 mm</span>
<span class="w">        </span><span class="c1"># Brain erosion default is using millimeters.</span>
<span class="w">        </span><span class="nt">brain_mask_erosion_mm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="w">        </span><span class="c1"># Erode binarized brain mask in millimeter</span>
<span class="w">        </span><span class="nt">brain_erosion_mm</span><span class="p">:</span>

<span class="w">      </span><span class="nt">erode_csf</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode binarized csf tissue mask.</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Target volume ratio, if using erosion.</span>
<span class="w">        </span><span class="c1"># Default proportion is None for cerebrospinal fluid mask.</span>
<span class="w">        </span><span class="c1"># If using erosion, using both proportion and millimeters is not recommended.</span>
<span class="w">        </span><span class="nt">csf_erosion_prop</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode cerebrospinal fluid mask in millimeters, default for cerebrospinal fluid is 30mm</span>
<span class="w">        </span><span class="c1"># Cerebrospinal fluid erosion default is using millimeters.</span>
<span class="w">        </span><span class="nt">csf_mask_erosion_mm</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="w">        </span><span class="c1"># Erode binarized cerebrospinal fluid mask in millimeter</span>
<span class="w">        </span><span class="nt">csf_erosion_mm</span><span class="p">:</span>

<span class="w">      </span><span class="nt">erode_wm</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode WM binarized tissue mask.</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Target volume ratio, if using erosion.</span>
<span class="w">        </span><span class="c1"># Default proportion is 0.6 for white matter mask.</span>
<span class="w">        </span><span class="c1"># If using erosion, using both proportion and millimeters is not recommended.</span>
<span class="w">        </span><span class="c1"># White matter erosion default is using proportion erosion method when use erosion for white matter.</span>
<span class="w">        </span><span class="nt">wm_erosion_prop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>

<span class="w">        </span><span class="c1"># Erode white matter mask in millimeters, default for white matter is None</span>
<span class="w">        </span><span class="nt">wm_mask_erosion_mm</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode binarized white matter mask in millimeters</span>
<span class="w">        </span><span class="nt">wm_erosion_mm</span><span class="p">:</span>

<span class="w">      </span><span class="nt">erode_gm</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode gray matter binarized tissue mask.</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>

<span class="w">        </span><span class="c1"># Target volume ratio, if using erosion.</span>
<span class="w">        </span><span class="c1"># If using erosion, using both proportion and millimeters is not recommended.</span>
<span class="w">        </span><span class="nt">gm_erosion_prop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>

<span class="w">        </span><span class="c1"># Erode gray matter mask in millimeters</span>
<span class="w">        </span><span class="nt">gm_mask_erosion_mm</span><span class="p">:</span>

<span class="w">        </span><span class="c1"># Erode binarized gray matter mask in millimeters</span>
<span class="w">        </span><span class="nt">gm_erosion_mm</span><span class="p">:</span>
</pre></div>
</div>
<p>An example of a custom regressor with one file:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">nuisance_corrections</span><span class="p">:</span>
<span class="w">  </span><span class="nt">2-nuisance_regression</span><span class="p">:</span>
<span class="w">    </span><span class="nt">Regressors</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;first_custom_regressor&#39;</span>
<span class="w">        </span><span class="nt">Custom</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom_signal.1D</span>
<span class="w">            </span><span class="nt">convolve</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
</section>
<section id="an-example-of-nuisance-regressors">
<h2>An example of nuisance regressors<a class="headerlink" href="#an-example-of-nuisance-regressors" title="Link to this heading">¶</a></h2>
<p>The following box contains an example of a TSV file generated by C-PAC with the regressors used on nuisance regression.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># CPAC 1.4.1
# Nuisance regressors:
# RotY     RotYBack    RotYSq    RotYBackSq    RotX      RotXBack    RotXSq    RotXBackSq    RotZ      RotZBack    RotZSq    RotZBackSq    Y          YBack      YSq       YBackSq    X          XBack      XSq       XBackSq    Z          ZBack      ZSq       ZBackSq    aCompCorDetrendPC0    aCompCorDetrendPC1    aCompCorDetrendPC2    aCompCorDetrendPC3    aCompCorDetrendPC4    CerebrospinalFluidMean
-0.0276    0           0.0007    0             0.1954    0           0.0381    0             0.0488    0           0.0023    0             -0.3694    0          0.1364    0          -0.0061    0          0.0000    0          -0.3843    0          0.1476    0          -0.0458               0.0335                -0.0736               0.0579                -0.0114               10392.7714
-0.0192    -0.0276     0.0003    0.0007        0.2613    0.1954      0.0682    0.0381        0.0774    0.0488      0.0059    0.0023        -0.4328    -0.3694    0.1873    0.1364     0.0202     -0.0061    0.0004    0.0000     -0.3547    -0.3843    0.1258    0.1476     -0.1048               0.0727                -0.2194               0.1391                0.0235                10432.6865
-0.0394    -0.0192     0.0015    0.0003        0.1324    0.2613      0.0175    0.0682        0.0132    0.0774      0.0001    0.0059        -0.3399    -0.4328    0.1155    0.1873     -0.0262    0.0202     0.0006    0.0004     -0.3366    -0.3547    0.1132    0.1258     -0.1030               0.0668                -0.1124               0.0937                0.0553                10460.6806
-0.0394    -0.0394     0.0015    0.0015        0.1597    0.1324      0.0255    0.0175        0.0389    0.0132      0.0015    0.0001        -0.3419    -0.3399    0.1168    0.1155     0.0004     -0.0262    0.0000    0.0006     -0.3387    -0.3366    0.1147    0.1132     -0.0984               0.0633                -0.1343               0.1038                0.0736                10421.9697
-0.0232    -0.0394     0.0005    0.0015        0.1393    0.1597      0.0194    0.0255        0.0316    0.0389      0.0009    0.0015        -0.3486    -0.3419    0.1215    0.1168     -0.0081    0.0004     0.0000    0.0000     -0.3391    -0.3387    0.1149    0.1147     -0.0924               0.0698                -0.0869               0.1085                0.0369                10433.9453
-0.0225    -0.0232     0.0005    0.0005        0.1565    0.1393      0.0244    0.0194        0.0339    0.0316      0.0011    0.0009        -0.3828    -0.3486    0.1465    0.1215     -0.0033    -0.0081    0.0000    0.0000     -0.3498    -0.3391    0.1223    0.1149     -0.1071               0.0753                -0.0597               0.1258                -0.0705               10426.4130
-0.0233    -0.0225     0.0005    0.0005        0.1494    0.1565      0.0223    0.0244        0.0288    0.0339      0.0008    0.0011        -0.3405    -0.3828    0.1159    0.1465     -0.0062    -0.0033    0.0000    0.0000     -0.3458    -0.3498    0.1195    0.1223     -0.1158               0.0549                -0.1046               0.0821                -0.0871               10445.0371
</pre></div>
</div>
</section>
<section id="pulling-regressors-from-fmriprep-output-directory">
<h2>Pulling Regressors from fMRIPrep Output Directory<a class="headerlink" href="#pulling-regressors-from-fmriprep-output-directory" title="Link to this heading">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.8.6.</span></p>
</div>
<p>C-PAC is now compatible with fMRIPrep output directories so that users can run nuisance regression and calculate derivatives. There are a few things to note to configure this option in the pipeline file.</p>
<ul class="simple">
<li><p>Nuisance regression has to be in template space.</p></li>
<li><p><span class="xref std std-ref">Create_regressors</span> should be switched off</p></li>
<li><p>The names of the regressors under <strong>Columns</strong> must match the column names from the fMRIPrep confounds file</p></li>
<li><p>If there are regressor strategies under <span class="xref std std-ref">nuisance_corrections &gt; 2-nuisance_regression &gt; Regressors</span>, the ‘Name’ field of one strategy must match the name of the regressor strategy listed under <span class="xref std std-ref">ingress_regressors</span>. If you are not running bandpass filtering, the field <span class="xref std std-ref">nuisance_corrections &gt; 2-nuisance_regression &gt; Regressors</span> can be blank. See below for an example.</p></li>
<li><p>Nuisance regression cannot fork with ingressed regressors</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example of nuisance regression section of pipeline file</span>
<span class="nt">nuisance_corrections</span><span class="p">:</span>
<span class="w"> </span><span class="nt">2-nuisance_regression</span><span class="p">:</span>
<span class="w">   </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">On</span><span class="p p-Indicator">]</span>

<span class="w">   </span><span class="c1"># Select which nuisance signal corrections to apply</span>
<span class="w">   </span><span class="nt">Regressors</span><span class="p">:</span>
<span class="w">     </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strat1</span>
<span class="w">       </span><span class="nt">Bandpass</span><span class="p">:</span>
<span class="w">         </span><span class="nt">bottom_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="w">         </span><span class="nt">top_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">         </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">   </span><span class="nt">ingress_regressors</span><span class="p">:</span>
<span class="w">     </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">     </span><span class="nt">Regressors</span><span class="p">:</span>
<span class="w">       </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">strat1</span>
<span class="w">       </span><span class="nt">Columns</span><span class="p">:</span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">global_signal</span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">white_matter</span>
<span class="w">   </span><span class="nt">create_regressors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Off</span>
</pre></div>
</div>
</section>
<section id="configuring-median-angle-correction-options">
<h2>Configuring Median Angle Correction Options<a class="headerlink" href="#configuring-median-angle-correction-options" title="Link to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>median angle correction functionality was removed in C-PAC v1.8.0.</p>
</div>
</section>
<section id="external-resources">
<h2>External Resources<a class="headerlink" href="#external-resources" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://mindhive.mit.edu/node/116">Temporal Filtering FAQ - MIT Mindhive</a></p></li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<p>Ashby, F.G., (2011). Preprocessing. In Statistical Analysis of MRI Data. Cambridge: Cambridge University Press.</p>
<p>Cordes, D., Haughton, V. M., Arfanakis, K., Carew, J. D., Turski, P. A., Moritz, C. H., Quigley, M. A., et al. (2001). <a class="reference external" href="http://www.ajnr.org/content/22/7/1326.long">Frequencies contributing to functional connectivity in the cerebral cortex in “resting-state” data</a>. AJNR. American journal of neuroradiology, 22(7), 1326–1333.</p>
<p>Dagli, M.S., Ingeholm, J.E., Haxby, J.V., 1999. <a class="reference external" href="http://lbcnimh.nih.gov/OC/Publications/Dagli_et_al_Neuroimage_1999.pdf">Localization of cardiac-induced signal
change in fMRI</a>. NeuroImage 9, 407–415.</p>
<p>Davey, C. E., Grayden, D. B., Egan, G. F., &amp; Johnston, L. A. (2012). <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/22939874">Filtering induces correlation in fMRI resting state data</a>. Neuroimage. doi:10.1016/j.neuroimage.2012.08.022
Fox, M.D., Snyder, A.Z., Vincent, J.L., Corbetta, M., Van Essen, D.C., Raichle, M.E., 2005. <a class="reference external" href="http://www.pnas.org/content/102/27/9673.long">The human brain is intrinsically organized into dynamic, anticorrelated functional networks</a>. Proc Natl Acad Sci U S A 102, 9673-9678.</p>
<p>Fox, M.D., Zhang, D., Snyder, A.Z., Raichle, M.E., 2009. <a class="reference external" href="http://jn.physiology.org/content/101/6/3270.full.pdf">The global signal and observed anticorrelated resting state brain networks</a>. J Neurophysiol 101, 3270-3283.</p>
<p>Friston, K. J., Williams, S., Howard, R., Frackowiak, R. S., &amp; Turner, R. (1996). Movement-related effects in fMRI time-series. Magnetic Resonance in Medicine, 35(3), 346–355.</p>
<p>Gee, D. G., Biswal, B. B., Kelly, C., Stark, D. E., Margulies, D. S., Shehzad, Z., Uddin, L. Q., et al. (2011). <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3134281/">Low frequency fluctuations reveal integrated and segregated processing among the cerebral hemispheres</a>. Neuroimage, 54(1), 517–527.</p>
<p>He Hongjian, Liu Thomas T., <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/21982929">A geometric view of global signal confounds in resting-state functional MRI</a>, NeuroImage, Volume 59, Issue 3, 1 February 2012, Pages 2339-2348</p>
<p>Murphy, K., Birn, R.M., Handwerker, D.A., Jones, T.B., Bandettini, P.A., 2009. <a class="reference external" href="http://intramural.nimh.nih.gov/research/pubs/bandettini07.pdf">The impact of global signal regression on resting state correlations: are anti-correlated networks introduced</a>? Neuroimage 44, 893-905.</p>
<p>Power, J.D., Barnes, K.A., Snyder, A.Z., Schlaggar, B.L., Petersen, S.E., 2011. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/22019881">Spurious but systematic correlations in functional connectivity MRI networks arise from subject motion</a>. Neuroimage 59, 2142-2154.</p>
<p>Power, J.D., Barnes, K.A., Snyder, A.Z., Schlaggar, B.L., Petersen, S.E., 2012. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/22440651">Steps toward optimizing motion artifact removal in functional connectivity MRI; a reply to Carp</a>. Neuroimage.</p>
<p>Saad, Z.S., Gotts, S.J., Murphy, K., Chen, G., Jo, H.J., Martin, A., Cox, R.W., 2012. <a class="reference external" href="http://afni.nimh.nih.gov/sscc/rwcox/papers/TroubleAtRest2012.pdf">Trouble at rest: how correlation patterns and group differences become distorted after global signal regression</a>. Brain Connect 2, 25-32.</p>
<p>Satterthwaite, T.D., Wolf, D.H., Loughead, J., Ruparel, K., Elliott, M.A., Hakonarson, H., Gur, R.C., Gur, R.E., 2012. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/22233733">Impact of in-scanner head motion on multiple measures of functional connectivity: Relevance for studies of neurodevelopment in youth</a>. Neuroimage 60, 623-632.</p>
<p>Schroeder, C. E., &amp; Lakatos, P. (2009). <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2990947/">Low-frequency neuronal oscillations as instruments of sensory selection</a>. Trends in neurosciences, 32(1), 9–18. doi:10.</p>
<p>Smith, AM, Lewis, BK, Ruttimann, UE, Ye, FQ, Sinnwell, TM, Yang, Y, Duyn, JH, &amp; Frank, JA. 1999. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/10329292">Investigation of low frequency drift in fMRI signal</a>. Neuroimage, 9, 526–33.</p>
<p>Thomas, C.G., Harshman, R.A., Menon, R.S., 2002. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/12414291">Noise reduction in BOLD-based fMRI using component analysis</a>. NeuroImage 17 (3), 1521–1537.</p>
<p>Van Dijk, K.R., Sabuncu, M.R., Buckner, R.L., 2012. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/21810475">The influence of head motion on intrinsic functional connectivity MRI</a>. Neuroimage 59, 431-438.</p>
<p>Wager, T.D., Hernandes, L., Jonides, J., and Lindquist, M., Elements of Functional Neuroimaging. In Cacioppo, J.T., Tassinary, L.G., and Berntson, G.G., (2007) Handbook of Psychophysiology, Third Edition.</p>
<p>Weissenbacher, A., Kasess, C., Gerstl, F., Lanzenberger, R., Moser, E., Windischberger, C., 2009. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/19442749">Correlations and anticorrelations in resting-state functional connectivity MRI: a quantitative comparison of preprocessing strategies</a>. Neuroimage 47, 1408-1416</p>
<p>Windischberger, C., Langenberger, H., Sycha, T., Tschernko, E.M., Fuchsjager-Mayerl, G., Schmetterer, L., Moser, E., 2002. <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/12467863">On the origin of respiratory artifacts in BOLD-EPI of the human brain</a>. Magn. Reson. Imaging 20, 575–582.</p>
<p>Yan, C., Liu, D., He, Y., Zou, Q., Zhu, C., Zuo, X., Long, X., et al. (2009). <a class="reference external" href="http://www.plosone.org/article/info:doi/10.1371/journal.pone.0005743">Spontaneous brain activity in the default mode network is sensitive to different resting-state conditions with limited cognitive load</a>. PLoS ONE, 4(5), e5743.</p>
<p>Zang, Y.-F., He, Y., Zhu, C.-Z., Cao, Q.-J., Sui, M.-Q., Liang, M., Tian, L.-X., et al. (2007). <a class="reference external" href="http://nlpr-web.ia.ac.cn/2007papers/gjkw/gk38.pdf">Altered baseline brain activity in children with ADHD revealed by resting-state functional MRI</a>. Brain &amp; development, 29(2), 83–91.</p>
<p>Zuo, X.-N., Di Martino, A., Kelly, C., Shehzad, Z. E., Gee, D. G., Klein, D. F., Castellanos, F. X., et al. (2010). <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2856476/">The oscillating brain: complex and reliable</a>. Neuroimage, 49(2), 1432–1445.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="tse">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Timeseries Extraction</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="func">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Functional Preprocessing</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2012‒2024, C-PAC Developers. C-PAC is licensed under LGPL-3.0-or-later
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Nuisance Signal Regression</a><ul>
<li><a class="reference internal" href="#regressors">Regressors</a><ul>
<li><a class="reference internal" href="#mean-white-matter-csf">Mean White Matter / CSF</a></li>
<li><a class="reference internal" href="#acompcor">aCompCor</a></li>
<li><a class="reference internal" href="#tcompcor">tCompCor</a></li>
<li><a class="reference internal" href="#global-signal-regression">Global Signal Regression</a></li>
<li><a class="reference internal" href="#global-mean">Global Mean</a></li>
<li><a class="reference internal" href="#principle-components-removal">Principle Components Removal</a></li>
<li><a class="reference internal" href="#polynomial-detrending">Polynomial Detrending</a></li>
</ul>
</li>
<li><a class="reference internal" href="#motion-correction">Motion Correction</a><ul>
<li><a class="reference internal" href="#volume-realignment">Volume Realignment</a></li>
<li><a class="reference internal" href="#regression-of-motion-parameters">Regression of Motion Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#de-spiking">De-Spiking</a></li>
<li><a class="reference internal" href="#scrubbing">Scrubbing</a></li>
<li><a class="reference internal" href="#temporal-filtering">Temporal Filtering</a></li>
<li><a class="reference internal" href="#median-angle-correction">Median Angle Correction</a></li>
<li><a class="reference internal" href="#custom-regressors">Custom Regressors</a></li>
<li><a class="reference internal" href="#configuring-nuisance-signal-regression-options">Configuring Nuisance Signal Regression Options</a><ul>
<li><a class="reference internal" href="#configuring-temporal-filtering-options">Configuring Temporal Filtering Options</a></li>
<li><a class="reference internal" href="#configuration-without-the-gui">Configuration Without the GUI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#an-example-of-nuisance-regressors">An example of nuisance regressors</a></li>
<li><a class="reference internal" href="#pulling-regressors-from-fmriprep-output-directory">Pulling Regressors from fMRIPrep Output Directory</a></li>
<li><a class="reference internal" href="#configuring-median-angle-correction-options">Configuring Median Angle Correction Options</a></li>
<li><a class="reference internal" href="#external-resources">External Resources</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=fda68b68"></script>
    <script src="../_static/doctools.js?v=d248f5b3"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/underscore.js?v=f1230927"></script>
    <script src="../_static/doctools.js?v=d248f5b3"></script>
    <script src="../_static/hideEmptyHighlights.js?v=af317073"></script>
    <script defer="defer" src="../_static/versionList.js?v=f2bc52a7"></script>
    </body>
</html>